---
title: Автоматизация обучения модели с помощью ML.NET CLI
description: Сведения о том, как использовать средство ML.NET CLI для автоматического обучения оптимальной модели из командной строки.
ms.date: 06/03/2020
ms.custom: how-to, mlnet-tooling
ms.openlocfilehash: 0b230e4a517b6493abdb1ec975776fd286b654e3
ms.sourcegitcommit: b27645cb378d4e8137a267e5467ff31409acf6c0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2021
ms.locfileid: "103231411"
---
# <a name="automate-model-training-with-the-mlnet-cli"></a>Автоматизация обучения модели с помощью ML.NET CLI

ML.NET CLI автоматизирует создание моделей для разработчиков, использующих .NET.

Чтобы использовать ML.NET API сам по себе (без ML.NET AutoML CLI), вам нужно выбрать алгоритм обучения (реализация алгоритма машинного обучения для конкретной задачи) и набор преобразований данных (конструирование признаков), применяемые к вашим данным. Оптимальный конвейер индивидуален для каждого набора данных, а выбор оптимального алгоритма из всех возможных вариантов только усложняет задачу. Кроме того, каждый алгоритм имеет набор настраиваемых гиперпараметров. Таким образом, вы можете потратить недели (а иногда и месяцы) на оптимизацию модели машинного обучения, пытаясь найти лучшие сочетания конструирования признаков, алгоритмов обучения и гиперпараметров.

ML.NET CLI упрощает этот процесс с помощью автоматизированного машинного обучения (AutoML).

> [!NOTE]
> В этом разделе описано, как использовать средства ML.NET **CLI** и ML.NET **AutoML**, которые сейчас находятся на этапе предварительной версии. Этот материал может быть изменен.

## <a name="what-is-the-mlnet-command-line-interface-cli"></a>Что такое интерфейс командной строки ML.NET CLI?

Интерфейс командной строки ML.NET — это [средство .NET Core](../core/tools/global-tools.md). После установки вы передаете ему задачу машинного обучения и набор данных для обучения, а он создает модель ML.NET и код C# для выполнения, чтобы использовать модель в приложении.

Как показано на следующем рисунке, можно легко создать высококачественную модель ML.NET (ZIP-файл сериализованной модели), а также пример кода C# для запуска и оценки этой модели. Кроме того, создается код C# для создания и обучения этой модели, поэтому вы можете исследовать алгоритм и параметры, используемые для созданной "оптимальной модели", и выполнять итерацию по ним.

![Ядро AutoML, работающее в программе командной строки ML.NET](media/automate-training-with-cli/cli-high-level-process.png)

Вы можете создать эти ресурсы из собственных наборов данных без самостоятельного написания кода, что также повышает производительность вашего труда, даже если вы уже знакомы с ML.NET.

Сейчас ML.NET CLI поддерживает следующие задачи машинного обучения:

- классификация;
- регрессия;
- рекомендация.
- классификация изображений.

Пример использования (сценарий классификации):

```console
mlnet classification --dataset "yelp_labelled.txt" --label-col 1 --has-header false --train-time 10
```

![Классификация ML.NET из командной строки](media/automate-training-with-cli/mlnet-classification-powershell.gif)

Его можно схожим образом запустить в *Windows PowerShell*, *оболочке Bash в macOS или Linux* или в *Windows CMD*. Однако функция табличного автозавершения (предложения параметров) не будет работать в *Windows CMD*.

## <a name="output-assets-generated"></a>Созданные выходные ресурсы

Команды задачи машинного обучения в интерфейсе командной строки создают следующие ресурсы в выходной папке.

- Готовый к использованию ZIP-файл сериализованной модели ("оптимальной модели") для выполнения прогнозов.
- Решение C#, включающее в себя следующее:
  - код C# для запуска или оценки созданной модели (для прогнозирования в приложениях пользователей);
  - обучающий код C#, используемый для создания этой модели (в учебных целях или для переобучения модели).
- Файл журнала с информацией обо всех итерациях/проходах по нескольким оцениваемым алгоритмам, включая их подробную конфигурацию или конвейер.

Первые два ресурса можно использовать непосредственно в приложениях конечных пользователей (веб-приложениях и службах ASP.NET Core, классических приложениях и т. д.) для прогнозирования с помощью созданной модели машинного обучения.

Третий ресурс, обучающий код, показывает, какой код ML.NET API использовался средством CLI для обучения созданной модели, чтобы вы могли переобучить модель и определить, какой конкретный алгоритм обучения и гиперпараметры были выбраны средствами CLI и AutoML.

## <a name="understanding-the-quality-of-the-model"></a>Общие сведения о качестве модели

При создании "оптимальной модели" с помощью средства CLI вы регистрируете метрики качества (такие как точность и достоверность аппроксимации), необходимые для требуемой задачи машинного обучения.

Здесь приведены сводные данные об этих метриках, сгруппированные по задачам машинного обучения, чтобы вы могли определить качество автоматически созданной "оптимальной модели".

### <a name="metrics-for-classification-models"></a>Метрики моделей классификации

Ниже приведено изображение со списком метрик для классификации пяти ведущих моделей в CLI:

![Метрики классификации для пяти основных моделей](media/automate-training-with-cli/cli-multiclass-classification-metrics.png)

 Точность является популярной метрикой для проблем классификации, но она не всегда является лучшей метрикой для выбора оптимальной модели, что показано в ссылках ниже. Бывают случаи, когда нужно оценить качество модели с помощью дополнительных метрик.

Чтобы изучить метрики, выводимые интерфейсом командной строки, см. раздел [Метрики для классификации](resources/metrics.md#evaluation-metrics-for-multi-class-classification).

### <a name="metrics-for-regression-and-recommendation-models"></a>Метрики для моделей регрессии и рекомендаций

Модель регрессии хорошо соответствует данным, если различия между наблюдаемыми значениями и прогнозируемыми значениями модели являются незначительными и несистематическими. Регрессию можно оценить с помощью определенных метрик.

Вы увидите аналогичный список метрик для пяти основных моделей качества в CLI, только в этом случае пять основных моделей относятся к задаче машинного обучения с регрессией:

![Метрики регрессии для пяти основных моделей](media/automate-training-with-cli/cli-regression-metrics.png)

Чтобы изучить метрики, выводимые интерфейсом командной строки, см. раздел [Метрики для регрессии](resources/metrics.md#evaluation-metrics-for-regression-and-recommendation).

## <a name="see-also"></a>См. также

- [Установка интерфейса командной строки ML.NET](how-to-guides/install-ml-net-cli.md)
- [Учебник. Анализ тональности с помощью интерфейса командной строки (CLI) ML.NET](tutorials/sentiment-analysis-cli.md)
- [Справочник по командам интерфейса командной строки ML.NET](reference/ml-net-cli-reference.md)
- [Данные телеметрии в интерфейсе командной строки ML.NET](resources/ml-net-cli-telemetry.md)
