---
title: 'CA2245: не назначайте свойство самому себе (анализ кода)'
description: 'Сведения о правиле анализа кода CA2245: не назначайте свойство самому себе'
ms.date: 04/29/2020
ms.topic: reference
f1_keywords:
- CA2245
helpviewer_keywords:
- CA2245
author: mavasani
ms.author: mavasani
ms.openlocfilehash: a5be42593807cb0bfcea2a96488adfb8bd35ab86
ms.sourcegitcommit: 05d0087dfca85aac9ca2960f86c5efd218bf833f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "99714668"
---
# <a name="ca2245-do-not-assign-a-property-to-itself"></a>CA2245: не назначайте свойство самому себе

| | Значение |
|-|-|
| **Идентификатор правила** |CA2245|
| **Категория** |[Использование](usage-warnings.md)|
| **Исправление является критическим или не критическим** |Не критическое|

## <a name="cause"></a>Причина

Свойство было случайно назначено самому себе.

## <a name="rule-description"></a>Описание правила

Компилятор C# создает предупреждение [CS1717: проведено присвоение той же переменной; действительно выполнить такое назначение, а не иное?](../../../csharp/misc/cs1717.md) при назначении символа поля, локального символа или символа параметра самому себе. Такая ошибка часто встречается в том случае, когда имя локального символа, символа параметра или поля аналогично имени другого символа в области. Вместо разных символов в левой и правой частях назначения использовался один и тот же символ. Это приводит к избыточному назначению значения самому себе и, как правило, указывает на функциональную ошибку.

Назначение свойства самому себе также является функциональной ошибкой практически во всех реальных случаях. Однако в некоторых крайних случаях получение значения свойства может иметь побочные эффекты, а новое значение свойства отличается от исходного значения. Если это так, назначение свойства самому себе не является избыточным и не может быть удалено. Это позволит избежать вывода предупреждения `CS1717` компилятора о назначении свойства самому себе и не вносить критических изменений.

Правило `CA2245` призвано устранить эту проблему. Оно сообщает о нарушении назначения свойства самому себе, чтобы помочь исправить эти функциональные ошибки. В ряде крайних случаев, когда назначение свойства самому себе является желательным поведением, предупреждения о нарушении `CA2245` можно отключить в источнике с указанием соответствующего комментария с обоснованием.

## <a name="how-to-fix-violations"></a>Устранение нарушений

Чтобы устранить нарушения, в левой и правой частях назначения следует использовать разные символы. Например, в следующем фрагменте кода показано нарушение правила и способы его устранения:

```csharp
public class C
{
    private int p = 0;
    public int P { get; private set; }

    public void M(int p)
    {
        // CS1717: Accidentally assigned the parameter 'p' to itself.
        p = p;

        // CA2245: Accidentally assigned the property 'P' to itself.
        P = P;
    }
}
```

```csharp
public class C
{
    private int p = 0;
    public int P { get; private set; }

    public void M(int p)
    {
        // No violation, now the parameter is assigned to the field.
        this.p = p;

        // No violation, now the parameter is assigned to the property.
        P = p;
    }
}
```

## <a name="when-to-suppress-warnings"></a>Условия для отключения предупреждений

Можно отключить вывод предупреждений для этого правила, если получение значения свойства может иметь побочные эффекты, а новое значение свойства отличается от исходного значения. Если это так, назначение свойства самому себе не является избыточным. Чтобы задокументировать это как ожидаемое поведение, в подавление следует добавить комментарий с обоснованием.

## <a name="related-rules"></a>Связанные правила

- [CS1717: проведено присвоение той же переменной; действительно выполнить такое назначение, а не иное?](../../../csharp/misc/cs1717.md)
- [CA2011: не присваивайте свойство в методе задания](ca2011.md)
- [CA2246: не присваивайте значения символу и его элементу в одном операторе](ca2246.md)

## <a name="see-also"></a>См. также раздел

- [Правила использования](usage-warnings.md)
