---
title: 'CA1008: перечисления должны иметь нулевое значение (анализ кода)'
description: Дополнительные сведения о правиле анализа кода CA1008 — перечисления должны иметь нулевое значение
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- CA1008
- EnumsShouldHaveZeroValue
helpviewer_keywords:
- CA1008
- EnumsShouldHaveZeroValue
author: gewarren
ms.author: gewarren
dev_langs:
- CSharp
- VB
ms.openlocfilehash: 84ce595f5da3de1ac2485a164e6ba951df897249
ms.sourcegitcommit: 05d0087dfca85aac9ca2960f86c5efd218bf833f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "99547581"
---
# <a name="ca1008-enums-should-have-zero-value"></a>CA1008. Перечисляемые типы должны иметь нулевое значение

| | Значение |
|-|-|
| **Идентификатор правила** |CA1008|
| **Категория** |[Microsoft.Design](design-warnings.md)|
| **Исправление является критическим или не критическим** |Не критическое — при появлении запроса на добавление значения `None` в перечисление без флага. Критическое — при появлении запроса на переименование или удаление любых значений перечисления.|

## <a name="cause"></a>Причина

Перечисление без применения <xref:System.FlagsAttribute?displayProperty=fullName> не определяет элемент, имеющий нулевое значение. Или перечисление с применением <xref:System.FlagsAttribute> определяет член, имеющий нулевое значение, но его имя не равно "None". Или перечисление определяет несколько элементов с нулевым значением.

По умолчанию это правило проверяет только видимые извне перечисления, но это поведение [можно настроить](#configure-code-to-analyze).

## <a name="rule-description"></a>Описание правила

Значение по умолчанию неинициализированного перечисления, как и других типов значений, равно нулю. Перечисление без флагов в качестве атрибутов должно определять элемент с использованием нулевого значения так, чтобы значение по умолчанию было допустимым значением перечисления. При необходимости присвойте элементу имя "None". В противном случае необходимо присвоить нулевое значение наиболее часто используемому элементу. По умолчанию, если значение первого элемента перечисления не задано в объявлении, его значение равно нулю.

Если перечисление с примененным атрибутом <xref:System.FlagsAttribute> определяет элемент с нулевым значением, для него должно быть задано имя "None", свидетельствующее о том, что в перечислении не были заданы значения. Использование элемента с нулевым значением в любых других целях противоречит использованию <xref:System.FlagsAttribute>, поскольку побитовые операторы AND и OR бесполезны с этим элементом. Это означает, что только одному элементу должно быть присвоено нулевое значение. Если несколько элементов с нулевым значением встречаются в перечислении с флагами, `Enum.ToString()` возвращает неверные результаты для элементов, которые не равны нулю.

## <a name="how-to-fix-violations"></a>Устранение нарушений

Чтобы устранить нарушение этого правила для перечислений без флагов, определите элемент, имеющий нулевое значение. Это некритическое изменение. Для перечислений с флагами, которые определяют элемент с нулевым значением, присвойте этому элементу имя "None" и удалите остальные элементы, имеющие нулевые значения. Это критическое изменение.

## <a name="when-to-suppress-warnings"></a>Условия для отключения предупреждений

Не отключайте предупреждение из этого правила, за исключением перечислений с флагами, которые были отправлены ранее.

[!INCLUDE [suppress-warning](../../../../includes/code-analysis/suppress-warning.md)]

## <a name="configure-code-to-analyze"></a>Настройка кода для анализа

Используйте следующий параметр, чтобы выбрать части базы кода для применения этого правила.

- [Включение определенных контактных зон API](#include-specific-api-surfaces)

Этот параметр можно настроить только для некоторого правила, для всех правил или для всех правил в этой категории (конструктор). Дополнительные сведения см. в статье [Параметры конфигурации правила качества кода](../code-quality-rule-options.md).

[!INCLUDE[api-surface](~/includes/code-analysis/api-surface.md)]

## <a name="example"></a>Пример

В следующем примере показаны два перечисления, которые удовлетворяют правилу, и перечисление `BadTraceOptions`, которое нарушает правило.

:::code language="csharp" source="snippets/csharp/all-rules/ca1008.cs":::

:::code language="vb" source="snippets/vb/all-rules/ca1008-enums-should-have-zero-value_1.vb":::

## <a name="related-rules"></a>Связанные правила

- [CA2217. Не помечайте перечисляемые типы с помощью FlagsAttribute](ca2217.md)
- [CA1700. Не присваивайте перечисляемым значениям имя Reserved](ca1700.md)
- [CA1712. Не добавляйте имя типа перед перечисляемыми значениями](ca1712.md)
- [CA1028. Хранилище перечисляемых типов должно относиться к типу Int32](ca1028.md)
- [CA1027. Пометьте перечисляемые типы с помощью FlagsAttribute](ca1027.md)

## <a name="see-also"></a>См. также раздел

- <xref:System.Enum?displayProperty=fullName>
