---
title: Настройка правил анализа кода
description: Сведения о том, как настроить правила анализа кода в файле конфигурации анализатора.
ms.date: 09/24/2020
no-loc:
- EditorConfig
ms.openlocfilehash: b9f934d13a510fa9e349d1cefc8131f22e9cd549
ms.sourcegitcommit: 8f71a6c655a9c39d5223401aed76c02ba00e03ee
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2021
ms.locfileid: "107740973"
---
# <a name="configuration-options-for-code-analysis"></a>Параметры конфигурации для анализа кода

Для правил анализа кода доступно несколько параметров конфигурации. Эти параметры указываются в [файле конфигурации анализатора](configuration-files.md) в формате пар "ключ — значение" с использованием синтаксиса `<option key> = <option value>`.

Чаще всего вам придется настраивать такой параметр, как [серьезность правила](#severity-level). Уровень серьезности можно настроить отдельно для всех правил анализатора, включая [правила качества кода](quality-rules/index.md) и [правила стиля кода](style-rules/index.md). Например, чтобы использовать правило как предупреждение, добавьте в файл EditorConfig следующую пару "ключ — значение".

`dotnet_diagnostic.<rule ID>.severity = warning`

Кроме того, можно настроить поведение правила с помощью дополнительных параметров:

- Правила качества кода имеют [дополнительные параметры](code-quality-rule-options.md) для настройки поведения, например имен методов, к которым будет применяться правило.
- Правила стиля кода имеют [пользовательские параметры стиля кода](code-style-rule-options.md).
- Правила анализатора от сторонних поставщиков могут включать определения собственных параметров конфигурации с произвольными именами ключей и форматами значений.

Ниже приведен пример синтаксиса для настройки серьезности конкретного правила в [файле конфигурации анализатора](configuration-files.md):

```ini
dotnet_diagnostic.<rule ID>.severity = <severity>
```

## <a name="general-options"></a>Общие параметры

Эти параметры применяются к анализу кода в целом. Вы не можете применять их только к одному правилу или набору правил.

### <a name="exclude-generated-code"></a>Исключение созданного кода

Вы можете указать дополнительные файлы и папки, которые следует считать предназначенными для созданного кода, добавив запись `generated_code = true | false` в [файл конфигурации](configuration-files.md). Предупреждения анализатора кода .NET бесполезны для файлов созданного кода, например создаваемых конструктором файлов, так как пользователи не смогут изменить их для устранения обнаруженных нарушений. В большинстве случаев анализаторы кода пропускают файлы созданного кода и не сообщают о нарушениях в них.

По умолчанию файлы с определенными расширениями или автоматически создаваемыми заголовками обрабатываются как файлы созданного кода. Например, файл с постфиксом `.designer.cs` или `.generated.cs` считается содержащим созданный код. Этот параметр конфигурации позволяет указать дополнительные шаблоны именования.

Например, чтобы считать все файлы, имена которых оканчиваются на `.MyGenerated.cs`, содержащими созданный код, добавьте следующую запись:

```ini
[*.MyGenerated.cs]
generated_code = true
```

## <a name="rule-specific-options"></a>Параметры для конкретных правил

Параметры для конкретных правил могут применяться к одному правилу, к набору правил или ко всем правилам. Доступны следующие параметры для конкретных правил:

- [Уровень серьезности правила.](#severity-level)
- [Параметры для правил *качества кода*.](code-quality-rule-options.md)

### <a name="severity-level"></a>Степень серьезности

В следующей таблице представлены разные уровни серьезности правил, которые можно настроить для всех правил анализатора, включая правила [качества кода](quality-rules/index.md) и [стиля кода](style-rules/index.md).

| Значение конфигурации серьезности | Реакция на событие во время сборки |
|-|-|
| `error` | Нарушения отображаются как *ошибки* при сборке, которые аварийно завершают ее.|
| `warning` | Нарушения отображаются как *предупреждения* сборки, но не приводят к аварийному завершению, если вы не настроили параметр, требующий обрабатывать предупреждения как ошибки. |
| `suggestion` | Нарушения отображаются как *сообщения* сборки и предложения в интегрированной среде разработки Visual Studio. |
| `silent` | Нарушения не видны пользователю. |
| `none` | Правило подавляется полностью. |
| `default` | Используется серьезность правила по умолчанию. Уровни серьезности по умолчанию для каждого выпуска .NET приведены в [репозитории roslyn-analyzers](https://github.com/dotnet/roslyn-analyzers/blob/main/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md). В этой таблице "Disabled" соответствует `none`, "Hidden" соответствует `silent`, а "info" соответствует `suggestion`. |

> [!TIP]
> Сведения о том, как проявляются уровни серьезности правил в Visual Studio, см. в разделе об [уровнях серьезности](/visualstudio/ide/editorconfig-language-conventions#severity-levels).

#### <a name="scope"></a>Область

Чтобы задать серьезность правила для одного правила, используйте следующий синтаксис.

```ini
dotnet_diagnostic.<rule ID>.severity = <severity value>
```

Чтобы задать серьезность по умолчанию для [категории правил](categories.md), используйте следующий синтаксис. Категория для каждого правила указана на странице справки соответствующего правила, например [CA1000](quality-rules/ca1000.md).

```ini
dotnet_analyzer_diagnostic.category-<rule category>.severity = <severity value>
```

Чтобы задать серьезность правила по умолчанию для всех правил анализатора, используйте следующий синтаксис.

```ini
dotnet_analyzer_diagnostic.severity = <severity value>
```

> [!IMPORTANT]
> Если вы задаете уровень серьезности одной записью для нескольких правил, то есть для *категории* правил или для *всех* правил, этот уровень серьезности применяется только к тем правилам, которые [включены по умолчанию](https://github.com/dotnet/roslyn-analyzers/blob/main/src/NetAnalyzers/Core/AnalyzerReleases.Shipped.md). Чтобы применить его к правилам, отключенным по умолчанию, нужно выполнить одно из следующих действий:
>
> - Добавьте явную запись конфигурации `dotnet_diagnostic.<rule ID>.severity = <severity>` для каждого правила.
> - Включите *все* правила, задав для [\<AnalysisMode>](../../core/project-sdk/msbuild-props.md#analysismode) значение `AllEnabledByDefault`.

#### <a name="precedence"></a>Приоритет

Если к одному идентификатору правила могут применяться несколько записей конфигурации серьезности, приоритет определяется следующим образом:

- Запись для конкретного идентификатора правила имеет приоритет над записью для категории.
- Запись для категории имеет приоритет над записью для всех правил анализатора.

Рассмотрим следующий пример с правилом [CA1822](/visualstudio/code-quality/ca1822), которое имеет категорию Performance (Производительность):

```ini
[*.cs]
dotnet_diagnostic.CA1822.severity = error
dotnet_analyzer_diagnostic.category-performance.severity = warning
dotnet_analyzer_diagnostic.severity = suggestion
```

В примере выше к правилу CA1822 применимы все три записи серьезности. Но применение указанных правил приоритета приводит к тому, что первая запись с идентификатором правила "опережает" все остальные записи. Следовательно, в этом примере для CA1822 будет применяться уровень серьезности `error`. Все остальные правила в категории Performance (Производительность) будут иметь серьезность `warning`.

Сведения о распределении приоритетов между файлами см. в [разделе "Приоритет" статьи о файлах конфигурации](configuration-files.md#precedence).
