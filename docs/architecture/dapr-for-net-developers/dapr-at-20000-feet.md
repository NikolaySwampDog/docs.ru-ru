---
title: 'Dapr: общее представление'
description: Общий обзор того, что такое ДАПР, что он делает и как он работает.
author: robvet
ms.date: 02/17/2021
ms.openlocfilehash: 9f23e9822fd0d4b5eda648d2fc1359cce14cf59d
ms.sourcegitcommit: d623f686701b94bef905ec5e93d8b55d031c5d6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/17/2021
ms.locfileid: "103624049"
---
# <a name="dapr-at-20000-feet"></a><span data-ttu-id="6c35f-103">Dapr: общее представление</span><span class="sxs-lookup"><span data-stu-id="6c35f-103">Dapr at 20,000 feet</span></span>

<span data-ttu-id="6c35f-104">В главе 1 мы обсуждали привлекательность распределенных приложений микрослужб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-104">In chapter 1, we discussed the appeal of distributed microservice applications.</span></span> <span data-ttu-id="6c35f-105">Но мы также указали, что они радикально увеличивают сложность архитектуры и эксплуатации.</span><span class="sxs-lookup"><span data-stu-id="6c35f-105">But, we also pointed out that they dramatically increase architectural and operational complexity.</span></span> <span data-ttu-id="6c35f-106">С учетом этого вопрос превращается в то, как можно «подать торт» и «EAT»?».</span><span class="sxs-lookup"><span data-stu-id="6c35f-106">With that in mind, the question becomes, how can you "have your cake" and "eat it too?".</span></span> <span data-ttu-id="6c35f-107">То есть, как можно воспользоваться преимуществами гибкой распределенной архитектуры и максимально упростить ее сложность?</span><span class="sxs-lookup"><span data-stu-id="6c35f-107">That is, how can you take advantage of the agility of distributed architecture, and minimize its complexity?</span></span>

<span data-ttu-id="6c35f-108">ДАПР или *Распределенная среда выполнения приложений*— это новый способ создания современных распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="6c35f-108">Dapr, or *Distributed Application Runtime*, is a new way to build modern distributed applications.</span></span>

<span data-ttu-id="6c35f-109">То, что было запущено как прототип, превратилось в высокоудачный проект с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="6c35f-109">What started as a prototype has evolved into a highly successful open-source project.</span></span> <span data-ttu-id="6c35f-110">Его спонсор корпорации Майкрософт тесно взаимодействует с клиентами и сообществом с открытым кодом для проектирования и создания ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-110">Its sponsor, Microsoft, has closely partnered with customers and the open-source community to design and build Dapr.</span></span> <span data-ttu-id="6c35f-111">Проект ДАПР объединяет разработчиков со всех фоновых рисунков, чтобы решить некоторые из самых сложных трудностей, связанных с разработкой распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="6c35f-111">The Dapr project brings together developers from all backgrounds to solve some of the toughest challenges of developing distributed applications.</span></span>

<span data-ttu-id="6c35f-112">В этой книге рассматривается ДАПР от точки зрения разработчика .NET.</span><span class="sxs-lookup"><span data-stu-id="6c35f-112">This book looks at Dapr from the viewpoint of a .NET developer.</span></span> <span data-ttu-id="6c35f-113">В этой главе вы создадите концептуальное представление о ДАПР и принципах его работы.</span><span class="sxs-lookup"><span data-stu-id="6c35f-113">In this chapter, you'll build a conceptual understanding of Dapr and how it works.</span></span> <span data-ttu-id="6c35f-114">Позже мы представим практическую инструкцию по использованию ДАПР в своих приложениях.</span><span class="sxs-lookup"><span data-stu-id="6c35f-114">Later on, we present practical, hands-on instruction on how you can use Dapr in your applications.</span></span>

<span data-ttu-id="6c35f-115">Представьте себе перелета в Jet на 20 000 футов.</span><span class="sxs-lookup"><span data-stu-id="6c35f-115">Imagine flying in a jet at 20,000 feet.</span></span> <span data-ttu-id="6c35f-116">Вы выйдете из окна и увидите альбомную ориентацию с широкой точки зрения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-116">You look out the window and see the landscape below from a wide perspective.</span></span> <span data-ttu-id="6c35f-117">Сделаем то же самое для ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-117">Let's do the same for Dapr.</span></span> <span data-ttu-id="6c35f-118">Визуализируйте себя по Дапру в 20 000 метров.</span><span class="sxs-lookup"><span data-stu-id="6c35f-118">Visualize yourself flying over Dapr at 20,000 feet.</span></span> <span data-ttu-id="6c35f-119">Что вы видите?</span><span class="sxs-lookup"><span data-stu-id="6c35f-119">What would you see?</span></span>

## <a name="dapr-and-the-problem-it-solves"></a><span data-ttu-id="6c35f-120">ДАПР и проблема, с которой она решается</span><span class="sxs-lookup"><span data-stu-id="6c35f-120">Dapr and the problem it solves</span></span>

<span data-ttu-id="6c35f-121">ДАПР решает большую проблему, присущую современным распределенным приложениям: **сложность**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-121">Dapr addresses a large challenge inherent in modern distributed applications: **Complexity**.</span></span>

<span data-ttu-id="6c35f-122">Благодаря архитектуре подключаемых компонентов ДАПР значительно упрощает работу распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="6c35f-122">Through an architecture of pluggable components, Dapr greatly simplifies the plumbing behind distributed applications.</span></span> <span data-ttu-id="6c35f-123">Он обеспечивает **динамическое** связывание, которое связывает приложение с возможностями инфраструктуры из среды выполнения ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-123">It provides a **dynamic glue** that binds your application with infrastructure capabilities from the Dapr runtime.</span></span>

<span data-ttu-id="6c35f-124">Хотите сделать одну из служб с отслеживанием состояния?</span><span class="sxs-lookup"><span data-stu-id="6c35f-124">Consider a requirement to make one of your services stateful?</span></span> <span data-ttu-id="6c35f-125">То, что будет вашим дизайном.</span><span class="sxs-lookup"><span data-stu-id="6c35f-125">What would be your design.</span></span> <span data-ttu-id="6c35f-126">Можно написать пользовательский код, предназначенный для хранилища состояний, такого как кэш Redis.</span><span class="sxs-lookup"><span data-stu-id="6c35f-126">You could write custom code that targets a state store such as Redis Cache.</span></span> <span data-ttu-id="6c35f-127">Однако ДАПР предоставляет встроенные возможности управления состоянием.</span><span class="sxs-lookup"><span data-stu-id="6c35f-127">However, Dapr provides state management capabilities out-of-the-box.</span></span> <span data-ttu-id="6c35f-128">Служба вызывает **стандартный блок** управления состоянием ДАПР, который динамически привязывается к **компоненту** хранилища состояний через файл YAML **конфигурации компонентов** ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-128">Your service invokes the Dapr state management **building block** that dynamically binds to a state store **component** via a Dapr **component configuration** yaml file.</span></span> <span data-ttu-id="6c35f-129">ДАПР поставляется с несколькими предварительно созданными компонентами хранилища состояний, включая Redis.</span><span class="sxs-lookup"><span data-stu-id="6c35f-129">Dapr ships with several pre-built state store components, including Redis.</span></span> <span data-ttu-id="6c35f-130">В этой модели служба делегирует управление состоянием среде выполнения ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-130">With this model, your service delegates state management to the Dapr runtime.</span></span> <span data-ttu-id="6c35f-131">У вашей службы нет пакета SDK, библиотеки или прямой ссылки на базовый компонент.</span><span class="sxs-lookup"><span data-stu-id="6c35f-131">Your service has no SDK, library, or direct reference to the underlying component.</span></span> <span data-ttu-id="6c35f-132">Можно даже изменить хранилища состояний, скажем, с Redis на MySQL или Cassandra без изменения кода.</span><span class="sxs-lookup"><span data-stu-id="6c35f-132">You can even change state stores, say, from Redis to MySQL or Cassandra, with no code changes.</span></span>

<span data-ttu-id="6c35f-133">На рис. 2-1 показан ДАПР с 20 000 футов.</span><span class="sxs-lookup"><span data-stu-id="6c35f-133">Figure 2-1 shows Dapr from 20,000 feet.</span></span>

<span data-ttu-id="6c35f-134">![ДАПР на ](./media/dapr-at-20000-feet/dapr-high-level.png)
 **рис. 2-1** 20 000 футов.</span><span class="sxs-lookup"><span data-stu-id="6c35f-134">![Dapr at 20,000 feet](./media/dapr-at-20000-feet/dapr-high-level.png)
**Figure 2-1**.</span></span> <span data-ttu-id="6c35f-135">ДАПР в 20 000 метров.</span><span class="sxs-lookup"><span data-stu-id="6c35f-135">Dapr at 20,000 feet.</span></span>

<span data-ttu-id="6c35f-136">В верхней строке рисунка Обратите внимание на то, как ДАПР предоставляет пакеты SDK для конкретных языков для популярных платформ разработки.</span><span class="sxs-lookup"><span data-stu-id="6c35f-136">In the top row of the figure, note how Dapr provides language-specific SDKs for popular development platforms.</span></span> <span data-ttu-id="6c35f-137">ДАПР v 1,0 включает поддержку Go, Node.js, Python, .NET, Java и JavaScript.</span><span class="sxs-lookup"><span data-stu-id="6c35f-137">Dapr v 1.0 includes supports Go, Node.js, Python, .NET, Java, and JavaScript.</span></span> <span data-ttu-id="6c35f-138">Эта книга посвящена пакету SDK для ДАПР .NET, который также обеспечивает прямую поддержку интеграции ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="6c35f-138">This book focuses on the Dapr .NET SDK, which also provides direct support for ASP.NET Core integration.</span></span>

<span data-ttu-id="6c35f-139">Хотя пакеты SDK для конкретного языка улучшают работу разработчиков, ДАПР не зависит от платформы.</span><span class="sxs-lookup"><span data-stu-id="6c35f-139">While language-specific SDKs enhance the developer experience, Dapr is platform agnostic.</span></span> <span data-ttu-id="6c35f-140">Внутри ДАПР модель программирования предоставляет возможности через стандартные протоколы связи HTTP/gRPC.</span><span class="sxs-lookup"><span data-stu-id="6c35f-140">Under the hood, Dapr's programming model exposes capabilities through standard HTTP/gRPC communication protocols.</span></span> <span data-ttu-id="6c35f-141">Любая платформа программирования может вызывать ДАПР через собственные API-интерфейсы HTTP и gRPC.</span><span class="sxs-lookup"><span data-stu-id="6c35f-141">Any programming platform can call Dapr via its native HTTP and gRPC APIs.</span></span>  

<span data-ttu-id="6c35f-142">Синие рамки в центре фигуры представляют стандартные блоки ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-142">The blue boxes across the center of the figure represent the Dapr building blocks.</span></span> <span data-ttu-id="6c35f-143">Каждый из них предоставляет возможности распределенного приложения, которые может использовать приложение.</span><span class="sxs-lookup"><span data-stu-id="6c35f-143">Each exposes a distributed application capability that your application can consume.</span></span>

<span data-ttu-id="6c35f-144">В нижней строке выделяется переносимость ДАПР и различные среды, в которых она может работать.</span><span class="sxs-lookup"><span data-stu-id="6c35f-144">The bottom row highlights the portability of Dapr and the diverse environments across which it can run.</span></span>

## <a name="dapr-architecture"></a><span data-ttu-id="6c35f-145">Архитектура ДАПР</span><span class="sxs-lookup"><span data-stu-id="6c35f-145">Dapr architecture</span></span>

<span data-ttu-id="6c35f-146">На этом этапе модуль Jet превращается в ДАПР, по убыванию по высоте, что дает более подробное представление о том, как работает ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-146">At this point, the jet turns around and flies back over Dapr, descending in altitude, giving you a closer look at how Dapr works.</span></span>

### <a name="building-blocks"></a><span data-ttu-id="6c35f-147">Стандартные блоки</span><span class="sxs-lookup"><span data-stu-id="6c35f-147">Building blocks</span></span>

<span data-ttu-id="6c35f-148">С новой перспективы вы увидите более подробное представление **стандартных блоков** ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-148">From the new perspective, you see a more detailed view of the Dapr **building blocks**.</span></span>

<span data-ttu-id="6c35f-149">Стандартный блок инкапсулирует возможности распределенной инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="6c35f-149">A building block encapsulates a distributed infrastructure capability.</span></span> <span data-ttu-id="6c35f-150">Доступ к функциональным возможностям можно получить через API-интерфейсы HTTP или gRPC.</span><span class="sxs-lookup"><span data-stu-id="6c35f-150">You can access the functionality through the HTTP or gRPC APIs.</span></span> <span data-ttu-id="6c35f-151">На рис. 2-2 показаны доступные блоки для ДАПР v 1,0.</span><span class="sxs-lookup"><span data-stu-id="6c35f-151">Figure 2-2 shows the available blocks for Dapr v 1.0.</span></span>

![Стандартные блоки ДАПР](./media/dapr-at-20000-feet/building-blocks.png)

<span data-ttu-id="6c35f-153">**Рис. 2-2**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-153">**Figure 2-2**.</span></span> <span data-ttu-id="6c35f-154">ДАПР стандартные блоки.</span><span class="sxs-lookup"><span data-stu-id="6c35f-154">Dapr building blocks.</span></span>

<span data-ttu-id="6c35f-155">В следующей таблице описаны службы инфраструктуры, предоставляемые каждым блоком.</span><span class="sxs-lookup"><span data-stu-id="6c35f-155">The following table describes the infrastructure services provided by each block.</span></span>

| <span data-ttu-id="6c35f-156">Стандартный блок</span><span class="sxs-lookup"><span data-stu-id="6c35f-156">Building block</span></span> | <span data-ttu-id="6c35f-157">Описание</span><span class="sxs-lookup"><span data-stu-id="6c35f-157">Description</span></span> |
|----------------|-------------|
| [<span data-ttu-id="6c35f-158">Управление состоянием</span><span class="sxs-lookup"><span data-stu-id="6c35f-158">State management</span></span>](state-management.md) | <span data-ttu-id="6c35f-159">Поддержка контекстной информации для долгосрочных служб с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="6c35f-159">Support contextual information for long running stateful services.</span></span> |
| [<span data-ttu-id="6c35f-160">Вызов службы</span><span class="sxs-lookup"><span data-stu-id="6c35f-160">Service invocation</span></span>](service-invocation.md) | <span data-ttu-id="6c35f-161">Вызов прямых и безопасных вызовов между службами с помощью независимых от платформы протоколов и хорошо известных конечных точек.</span><span class="sxs-lookup"><span data-stu-id="6c35f-161">Invoke direct, secure service-to-service calls using platform agnostic protocols and well-known endpoints.</span></span> |
| [<span data-ttu-id="6c35f-162">Публикация и подписка</span><span class="sxs-lookup"><span data-stu-id="6c35f-162">Publish and subscribe</span></span>](publish-subscribe.md) | <span data-ttu-id="6c35f-163">Реализуйте защищенный масштабируемый обмен сообщениями между службами.</span><span class="sxs-lookup"><span data-stu-id="6c35f-163">Implement secure, scalable pub/sub messaging between services.</span></span> |
| [<span data-ttu-id="6c35f-164">Привязки</span><span class="sxs-lookup"><span data-stu-id="6c35f-164">Bindings</span></span>](bindings.md) | <span data-ttu-id="6c35f-165">Активация кода из событий, вызванных внешними ресурсами с двунаправленным обменом данными.</span><span class="sxs-lookup"><span data-stu-id="6c35f-165">Trigger code from events raised by external resources with bi-directional communication.</span></span> |
| [<span data-ttu-id="6c35f-166">Наблюдаемость</span><span class="sxs-lookup"><span data-stu-id="6c35f-166">Observability</span></span>](observability.md) | <span data-ttu-id="6c35f-167">Отслеживание и измерение вызовов сообщений в сетевых службах.</span><span class="sxs-lookup"><span data-stu-id="6c35f-167">Monitor and measure message calls across networked services.</span></span> |
| [<span data-ttu-id="6c35f-168">Секреты</span><span class="sxs-lookup"><span data-stu-id="6c35f-168">Secrets</span></span>](secrets.md) | <span data-ttu-id="6c35f-169">Безопасный доступ к внешним хранилищам секретов.</span><span class="sxs-lookup"><span data-stu-id="6c35f-169">Securely access external secret stores.</span></span> |
| <span data-ttu-id="6c35f-170">Субъекты</span><span class="sxs-lookup"><span data-stu-id="6c35f-170">Actors</span></span> | <span data-ttu-id="6c35f-171">Инкапсулировать логику и данные в повторно используемых объектах субъекта.</span><span class="sxs-lookup"><span data-stu-id="6c35f-171">Encapsulate logic and data in reusable actor objects.</span></span> |

<span data-ttu-id="6c35f-172">Стандартные блоки являются абстрактной реализацией возможностей распределенных приложений из служб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-172">Building blocks abstract the implementation of distributed application capabilities from your services.</span></span> <span data-ttu-id="6c35f-173">Это взаимодействие показано на рисунке 2-3.</span><span class="sxs-lookup"><span data-stu-id="6c35f-173">Figure 2-3 shows this interaction.</span></span>

![Интеграция стандартных блоков ДАПР](./media/dapr-at-20000-feet/building-blocks-integration.png)

<span data-ttu-id="6c35f-175">**Рис. 2-3**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-175">**Figure 2-3**.</span></span> <span data-ttu-id="6c35f-176">Интеграция ДАПР стандартных блоков.</span><span class="sxs-lookup"><span data-stu-id="6c35f-176">Dapr building block integration.</span></span>

<span data-ttu-id="6c35f-177">Стандартные блоки вызывают компоненты ДАПР, которые предоставляют конкретную реализацию для каждого ресурса.</span><span class="sxs-lookup"><span data-stu-id="6c35f-177">Building blocks invoke Dapr components that provide the concrete implementation for each resource.</span></span> <span data-ttu-id="6c35f-178">Код службы учитывает только стандартный блок.</span><span class="sxs-lookup"><span data-stu-id="6c35f-178">The code for your service is only aware of the building block.</span></span> <span data-ttu-id="6c35f-179">Он не зависит от внешних пакетов SDK или библиотек — ДАПР обрабатывает эти коммуникации.</span><span class="sxs-lookup"><span data-stu-id="6c35f-179">It takes no dependencies on external SDKs or libraries - Dapr handles the plumbing for you.</span></span> <span data-ttu-id="6c35f-180">Каждый стандартный блок является независимым.</span><span class="sxs-lookup"><span data-stu-id="6c35f-180">Each building block is independent.</span></span> <span data-ttu-id="6c35f-181">В приложении можно использовать один, несколько или все из них.</span><span class="sxs-lookup"><span data-stu-id="6c35f-181">You can use one, some, or all of them in your application.</span></span> <span data-ttu-id="6c35f-182">Как вариант добавления, ДАПР стандартные блоки внедрить в отраслевых рекомендациях, включая всестороннее наблюдаемое значение.</span><span class="sxs-lookup"><span data-stu-id="6c35f-182">As a value-add, Dapr building blocks bake in industry best practices including comprehensive observability.</span></span>

<span data-ttu-id="6c35f-183">В будущих главах мы предоставляем подробные пояснения и примеры кода для каждого стандартного блока ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-183">We provide detailed explanation and code samples for each Dapr building block in the upcoming chapters.</span></span> <span data-ttu-id="6c35f-184">На этом этапе модуль Jet в большей мере еще больше.</span><span class="sxs-lookup"><span data-stu-id="6c35f-184">At this point, the jet descends even more.</span></span> <span data-ttu-id="6c35f-185">С новой перспективы вы увидите более подробное представление о слое компонентов ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-185">From the new perspective, you now have a closer look at the Dapr components layer.</span></span>

### <a name="components"></a><span data-ttu-id="6c35f-186">Компоненты</span><span class="sxs-lookup"><span data-stu-id="6c35f-186">Components</span></span>

<span data-ttu-id="6c35f-187">Хотя стандартные блоки предоставляют API для вызова возможностей распределенного приложения, компоненты ДАПР обеспечивают конкретную реализацию, чтобы сделать ее возможной.</span><span class="sxs-lookup"><span data-stu-id="6c35f-187">While building blocks expose an API to invoke distributed application capabilities, Dapr components provide the concrete implementation to make it happen.</span></span>

<span data-ttu-id="6c35f-188">Рассмотрим, компонент **хранилища состояний** ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-188">Consider, the Dapr **state store** component.</span></span> <span data-ttu-id="6c35f-189">Он обеспечивает единообразный способ управления состоянием операций CRUD.</span><span class="sxs-lookup"><span data-stu-id="6c35f-189">It provides a uniform way to manage state for CRUD operations.</span></span> <span data-ttu-id="6c35f-190">Без изменения кода службы можно переключаться между любым из следующих компонентов состояния ДАПР:</span><span class="sxs-lookup"><span data-stu-id="6c35f-190">Without any change to your service code, you could switch between any of the following Dapr state components:</span></span>

- <span data-ttu-id="6c35f-191">AWS DynamoDB</span><span class="sxs-lookup"><span data-stu-id="6c35f-191">AWS DynamoDB</span></span>
- <span data-ttu-id="6c35f-192">аероспике</span><span class="sxs-lookup"><span data-stu-id="6c35f-192">Aerospike</span></span>
- <span data-ttu-id="6c35f-193">хранилище BLOB-объектов Azure</span><span class="sxs-lookup"><span data-stu-id="6c35f-193">Azure Blob Storage</span></span>
- <span data-ttu-id="6c35f-194">Azure CosmosDB</span><span class="sxs-lookup"><span data-stu-id="6c35f-194">Azure CosmosDB</span></span>
- <span data-ttu-id="6c35f-195">Хранилище таблиц Azure</span><span class="sxs-lookup"><span data-stu-id="6c35f-195">Azure Table Storage</span></span>
- <span data-ttu-id="6c35f-196">Cassandra</span><span class="sxs-lookup"><span data-stu-id="6c35f-196">Cassandra</span></span>
- <span data-ttu-id="6c35f-197">Cloud Фиресторе (режим хранилища данных)</span><span class="sxs-lookup"><span data-stu-id="6c35f-197">Cloud Firestore (Datastore mode)</span></span>
- <span data-ttu-id="6c35f-198">клаудстате</span><span class="sxs-lookup"><span data-stu-id="6c35f-198">CloudState</span></span>
- <span data-ttu-id="6c35f-199">Couchbase</span><span class="sxs-lookup"><span data-stu-id="6c35f-199">Couchbase</span></span>
- <span data-ttu-id="6c35f-200">Etcd</span><span class="sxs-lookup"><span data-stu-id="6c35f-200">Etcd</span></span>
- <span data-ttu-id="6c35f-201">HashiCorp Consul</span><span class="sxs-lookup"><span data-stu-id="6c35f-201">HashiCorp Consul</span></span>
- <span data-ttu-id="6c35f-202">хазелкаст</span><span class="sxs-lookup"><span data-stu-id="6c35f-202">Hazelcast</span></span>
- <span data-ttu-id="6c35f-203">Memcached</span><span class="sxs-lookup"><span data-stu-id="6c35f-203">Memcached</span></span>
- <span data-ttu-id="6c35f-204">MongoDB</span><span class="sxs-lookup"><span data-stu-id="6c35f-204">MongoDB</span></span>
- <span data-ttu-id="6c35f-205">PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="6c35f-205">PostgreSQL</span></span>
- <span data-ttu-id="6c35f-206">Redis</span><span class="sxs-lookup"><span data-stu-id="6c35f-206">Redis</span></span>
- <span data-ttu-id="6c35f-207">ресинкдб</span><span class="sxs-lookup"><span data-stu-id="6c35f-207">RethinkDB</span></span>
- <span data-ttu-id="6c35f-208">SQL Server</span><span class="sxs-lookup"><span data-stu-id="6c35f-208">SQL Server</span></span>
- <span data-ttu-id="6c35f-209">Zookeeper</span><span class="sxs-lookup"><span data-stu-id="6c35f-209">Zookeeper</span></span>

<span data-ttu-id="6c35f-210">Каждый компонент предоставляет необходимую реализацию через общий интерфейс управления состоянием:</span><span class="sxs-lookup"><span data-stu-id="6c35f-210">Each component provides the necessary implementation through a common state management interface:</span></span>

```go
 type Store interface {
   Init(metadata Metadata) error
   Delete(req *DeleteRequest) error
   BulkDelete(req []DeleteRequest) error
   Get(req *GetRequest) (*GetResponse, error)
   Set(req *SetRequest) error
   BulkSet(req []SetRequest) error
}
```

> [!TIP]
> <span data-ttu-id="6c35f-211">Среда выполнения ДАПР, а также все компоненты ДАПР были написаны на языке Golang или go.</span><span class="sxs-lookup"><span data-stu-id="6c35f-211">The Dapr runtime as well as all of the Dapr components have been written in the Golang, or Go, language.</span></span> <span data-ttu-id="6c35f-212">Go — популярный язык в сообществе с открытым исходным кодом и аттестации для межплатформенных обязательств по ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-212">Go is a popular language across the open source community and attests to cross-platform commitment of Dapr.</span></span>

<span data-ttu-id="6c35f-213">Возможно, вы начинаете с кэша Redis для Azure в качестве хранилища состояний.</span><span class="sxs-lookup"><span data-stu-id="6c35f-213">Perhaps you start with Azure Redis Cache as your state store.</span></span> <span data-ttu-id="6c35f-214">Укажите его в следующей конфигурации:</span><span class="sxs-lookup"><span data-stu-id="6c35f-214">You specify it with the following configuration:</span></span>

 ```yaml
 apiVersion: dapr.io/v1alpha1
 kind: Component
 metadata:
   name: statestore
   namespace: default
 spec:
   type: state.redis
   version: v1
   metadata:
   - name: redisHost
     value: <HOST>
   - name: redisPassword
     value: <PASSWORD>
   - name: enableTLS
     value: <bool> # Optional. Allowed: true, false.
   - name: failover
     value: <bool> # Optional. Allowed: true, false.
 ```

<span data-ttu-id="6c35f-215">В разделе **спецификаций** вы настраиваете ДАПР для использования кэша Redis для управления состоянием.</span><span class="sxs-lookup"><span data-stu-id="6c35f-215">In the **spec** section, you configure Dapr to use the Redis Cache for state management.</span></span> <span data-ttu-id="6c35f-216">Раздел также содержит метаданные для конкретного компонента.</span><span class="sxs-lookup"><span data-stu-id="6c35f-216">The section also contains component-specific metadata.</span></span> <span data-ttu-id="6c35f-217">В этом случае можно использовать его для настройки дополнительных параметров Redis.</span><span class="sxs-lookup"><span data-stu-id="6c35f-217">In this case, you can use it to configure additional Redis settings.</span></span>

<span data-ttu-id="6c35f-218">В дальнейшем приложение будет готово к работе в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="6c35f-218">At a later time, the application is ready to go to production.</span></span> <span data-ttu-id="6c35f-219">Для рабочей среды может потребоваться изменить управление состоянием в хранилище таблиц Azure.</span><span class="sxs-lookup"><span data-stu-id="6c35f-219">For the production environment, you may want to change your state management to Azure Table Storage.</span></span> <span data-ttu-id="6c35f-220">Хранилище таблиц Azure предоставляет возможности управления состоянием, которые являются доступными и надежными.</span><span class="sxs-lookup"><span data-stu-id="6c35f-220">Azure Table Storage provides state management capabilities that are affordable and highly durable.</span></span>

<span data-ttu-id="6c35f-221">На момент написания этой статьи в ДАПР предоставляются следующие типы компонентов:</span><span class="sxs-lookup"><span data-stu-id="6c35f-221">At the time of this writing, the following component types are provided by Dapr:</span></span>

| <span data-ttu-id="6c35f-222">Компонент</span><span class="sxs-lookup"><span data-stu-id="6c35f-222">Component</span></span> | <span data-ttu-id="6c35f-223">Описание</span><span class="sxs-lookup"><span data-stu-id="6c35f-223">Description</span></span> |
|-----------|-------------|
| [<span data-ttu-id="6c35f-224">обнаружение служб;</span><span class="sxs-lookup"><span data-stu-id="6c35f-224">Service discovery</span></span>](https://github.com/dapr/components-contrib/tree/master/nameresolution) | <span data-ttu-id="6c35f-225">Используется стандартным блоком вызова службы для интеграции со средой размещения для обеспечения обнаружения между службами.</span><span class="sxs-lookup"><span data-stu-id="6c35f-225">Used by the service invocation building block to integrate with the hosting environment to provide service-to-service discovery.</span></span> |
| [<span data-ttu-id="6c35f-226">Состояние</span><span class="sxs-lookup"><span data-stu-id="6c35f-226">State</span></span>](https://github.com/dapr/components-contrib/tree/master/state) | <span data-ttu-id="6c35f-227">Предоставляет унифицированный интерфейс для взаимодействия с широким спектром реализаций хранилища состояний.</span><span class="sxs-lookup"><span data-stu-id="6c35f-227">Provides a uniform interface to interact with a wide variety of state store implementations.</span></span> |
| [<span data-ttu-id="6c35f-228">Pub/подпапка</span><span class="sxs-lookup"><span data-stu-id="6c35f-228">Pub/sub</span></span>](https://github.com/dapr/components-contrib/tree/master/pubsub) | <span data-ttu-id="6c35f-229">Предоставляет унифицированный интерфейс для взаимодействия с широким спектром реализаций шины сообщений.</span><span class="sxs-lookup"><span data-stu-id="6c35f-229">Provides a uniform interface to interact with a wide variety of message bus implementations.</span></span> |
| [<span data-ttu-id="6c35f-230">Привязки</span><span class="sxs-lookup"><span data-stu-id="6c35f-230">Bindings</span></span>](https://github.com/dapr/components-contrib/tree/master/bindings) | <span data-ttu-id="6c35f-231">Предоставляет универсальный интерфейс для активации событий приложения из внешних систем и вызова внешних систем с дополнительными полезными данными.</span><span class="sxs-lookup"><span data-stu-id="6c35f-231">Provides a uniform interface to trigger application events from external systems and invoke external systems with optional data payloads.</span></span> |
| [<span data-ttu-id="6c35f-232">ПО промежуточного слоя</span><span class="sxs-lookup"><span data-stu-id="6c35f-232">Middleware</span></span>](https://github.com/dapr/components-contrib/tree/master/middleware) | <span data-ttu-id="6c35f-233">Позволяет пользовательскому по промежуточного слоя подключаться к конвейеру обработки запросов и вызывать дополнительные действия с запросом или ответом.</span><span class="sxs-lookup"><span data-stu-id="6c35f-233">Allows custom middleware to plug into the request processing pipeline and invoke additional actions on a request or response.</span></span> |
| [<span data-ttu-id="6c35f-234">Секретные хранилища</span><span class="sxs-lookup"><span data-stu-id="6c35f-234">Secret stores</span></span>](https://github.com/dapr/components-contrib/tree/master/secretstores) | <span data-ttu-id="6c35f-235">Предоставляет единый интерфейс для взаимодействия с внешними хранилищами секретов, включая облачные, граничные и коммерческие службы с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="6c35f-235">Provides a uniform interface to interact with external secret stores, including cloud, edge, commercial, open-source services.</span></span> |

<span data-ttu-id="6c35f-236">По мере того, как модуль Jet завершает свое переключение на ДАПР, вы сможете взглянуть еще раз и увидеть, как он соединяется вместе.</span><span class="sxs-lookup"><span data-stu-id="6c35f-236">As the jet completes its fly over of Dapr, you look back once more and can see how it connects together.</span></span>

### <a name="sidecar-architecture"></a><span data-ttu-id="6c35f-237">Архитектура расширения</span><span class="sxs-lookup"><span data-stu-id="6c35f-237">Sidecar architecture</span></span>

<span data-ttu-id="6c35f-238">ДАПР предоставляет свои стандартные блоки и компоненты через [архитектуру расширения](/azure/architecture/patterns/sidecar).</span><span class="sxs-lookup"><span data-stu-id="6c35f-238">Dapr exposes its building blocks and components through a [sidecar architecture](/azure/architecture/patterns/sidecar).</span></span> <span data-ttu-id="6c35f-239">Расширения позволяет выполнять ДАПР в отдельном процессе памяти или отдельном контейнере вместе со службой.</span><span class="sxs-lookup"><span data-stu-id="6c35f-239">A sidecar enables Dapr to run in a separate memory process or separate container alongside your service.</span></span> <span data-ttu-id="6c35f-240">Сидекарс обеспечивают изоляцию и инкапсуляцию, так как они не являются частью службы, но подключены к ней.</span><span class="sxs-lookup"><span data-stu-id="6c35f-240">Sidecars provide isolation and encapsulation as they aren't part of the service, but connected to it.</span></span> <span data-ttu-id="6c35f-241">Это разделение позволяет каждому из них иметь собственную среду выполнения и создаваться на разных платформах программирования.</span><span class="sxs-lookup"><span data-stu-id="6c35f-241">This separation enables each to have its own runtime environment and be built upon different programming platforms.</span></span> <span data-ttu-id="6c35f-242">На рис. 2-4 показан шаблон расширения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-242">Figure 2-4 shows a sidecar pattern.</span></span>

![Архитектура расширения](./media/dapr-at-20000-feet/sidecar-generic.png)

<span data-ttu-id="6c35f-244">**Рис. 2-4**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-244">**Figure 2-4**.</span></span> <span data-ttu-id="6c35f-245">Архитектура расширения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-245">Sidecar architecture.</span></span>

<span data-ttu-id="6c35f-246">Он называется расширением, так как напоминает коляску, присоединенную к мотоциклу.</span><span class="sxs-lookup"><span data-stu-id="6c35f-246">This pattern is named Sidecar because it resembles a sidecar attached to a motorcycle.</span></span> <span data-ttu-id="6c35f-247">На предыдущем рисунке обратите внимание на то, как ДАПР расширения присоединяется к службе для предоставления возможностей распределенного приложения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-247">In the previous figure, note how the Dapr sidecar is attached to your service to provide distributed application capabilities.</span></span>

### <a name="hosting-environments"></a><span data-ttu-id="6c35f-248">Среды размещения</span><span class="sxs-lookup"><span data-stu-id="6c35f-248">Hosting environments</span></span>

<span data-ttu-id="6c35f-249">ДАПР поддерживает кросс-платформенную поддержку и может выполняться во многих разных средах.</span><span class="sxs-lookup"><span data-stu-id="6c35f-249">Dapr has cross-platform support and can run in many different environments.</span></span> <span data-ttu-id="6c35f-250">К таким средам относятся Kubernetes, группа виртуальных машин или граничные среды, такие как Azure IoT Edge.</span><span class="sxs-lookup"><span data-stu-id="6c35f-250">These environments include Kubernetes, a group of VMs, or edge environments such as Azure IoT Edge.</span></span>

<span data-ttu-id="6c35f-251">Для локальной разработки проще всего начать работу с [автономным режимом](https://docs.dapr.io/concepts/overview/#self-hosted).</span><span class="sxs-lookup"><span data-stu-id="6c35f-251">For local development, the easiest way to get started is with [self-hosted mode](https://docs.dapr.io/concepts/overview/#self-hosted).</span></span> <span data-ttu-id="6c35f-252">В автономном режиме микрослужбы и ДАПР сидекарс выполняются в отдельных локальных процессах без контейнера Orchestrator, такого как Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="6c35f-252">In self-hosted mode, the microservices and Dapr sidecars run in separate local processes without a container orchestrator such as Kubernetes.</span></span> <span data-ttu-id="6c35f-253">Дополнительные сведения см. [в статье Загрузка и установка интерфейса командной строки ДАПР](https://docs.dapr.io/getting-started/install-dapr/).</span><span class="sxs-lookup"><span data-stu-id="6c35f-253">For more information, see [download and install the Dapr CLI](https://docs.dapr.io/getting-started/install-dapr/).</span></span>

<span data-ttu-id="6c35f-254">На рис. 2-5 показано приложение и ДАПР, размещенные в двух отдельных процессах памяти, взаимодействующих через HTTP или gRPC.</span><span class="sxs-lookup"><span data-stu-id="6c35f-254">Figure 2-5 shows an application and Dapr hosted in two separate memory processes communicating via HTTP or gRPC.</span></span>

![Локально размещенная Архитектура расширения](./media/dapr-at-20000-feet/self-hosted-dapr-sidecar.png)

<span data-ttu-id="6c35f-256">**Рис. 2-5**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-256">**Figure 2-5**.</span></span> <span data-ttu-id="6c35f-257">Локально размещенное расширения ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-257">Self-hosted Dapr sidecar.</span></span>

<span data-ttu-id="6c35f-258">По умолчанию ДАПР устанавливает контейнеры DOCKER для Redis и Зипкин, чтобы обеспечить управление состоянием по умолчанию и наблюдаемость.</span><span class="sxs-lookup"><span data-stu-id="6c35f-258">By default, Dapr installs Docker containers for Redis and Zipkin to provide default state management and observability.</span></span> <span data-ttu-id="6c35f-259">Если вы не хотите устанавливать DOCKER на локальном компьютере, можно даже [запустить ДАПР в режиме с автономным размещением без контейнеров DOCKER](https://docs.dapr.io/operations/hosting/self-hosted/self-hosted-no-docker/).</span><span class="sxs-lookup"><span data-stu-id="6c35f-259">If you don't want to install Docker on your local machine, you can even [run Dapr in self-hosted mode without any Docker containers](https://docs.dapr.io/operations/hosting/self-hosted/self-hosted-no-docker/).</span></span> <span data-ttu-id="6c35f-260">Однако необходимо установить компоненты по умолчанию, такие как Redis для управления состоянием и Pub/подпапка, вручную.</span><span class="sxs-lookup"><span data-stu-id="6c35f-260">However, you must install default components such as Redis for state management and pub/sub manually.</span></span>

<span data-ttu-id="6c35f-261">ДАПР также работает в [контейнерных средах](https://docs.dapr.io/concepts/overview/#kubernetes-hosted), таких как Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="6c35f-261">Dapr also runs in [containerized environments](https://docs.dapr.io/concepts/overview/#kubernetes-hosted), such as Kubernetes.</span></span> <span data-ttu-id="6c35f-262">На рис. 2-6 показан ДАПР, работающий в отдельном контейнере, а также контейнер приложения в том же Kubernetes Pod.</span><span class="sxs-lookup"><span data-stu-id="6c35f-262">Figure 2-6 shows Dapr running in a separate side-car container along with the application container in the same Kubernetes pod.</span></span>

![Kubernetes-размещенная Архитектура расширения](./media/dapr-at-20000-feet/kubernetes-hosted-dapr-sidecar.png)

<span data-ttu-id="6c35f-264">**Рис. 2-6**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-264">**Figure 2-6**.</span></span> <span data-ttu-id="6c35f-265">Kubernetes-Hosted ДАПР расширения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-265">Kubernetes-hosted Dapr sidecar.</span></span>

## <a name="dapr-performance-considerations"></a><span data-ttu-id="6c35f-266">Вопросы производительности ДАПР</span><span class="sxs-lookup"><span data-stu-id="6c35f-266">Dapr performance considerations</span></span>

<span data-ttu-id="6c35f-267">Как вы видели, ДАПР предоставляет архитектуру расширения для отделения приложения от возможностей распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="6c35f-267">As you've seen, Dapr exposes a sidecar architecture to decouple your application from distributed application capabilities.</span></span> <span data-ttu-id="6c35f-268">Для вызова операции ДАПР требуется по крайней мере один необработанный сетевой вызов.</span><span class="sxs-lookup"><span data-stu-id="6c35f-268">Invoking a Dapr operation requires at least one out-of-process network call.</span></span> <span data-ttu-id="6c35f-269">На рис. 2-7 представлен пример шаблона трафика ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-269">Figure 2-7 presents an example of a Dapr traffic pattern.</span></span>

![Шаблоны трафика ДАПР](./media/dapr-at-20000-feet/dapr-traffic-patterns.png)

<span data-ttu-id="6c35f-271">**Рис. 2-7**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-271">**Figure 2-7**.</span></span> <span data-ttu-id="6c35f-272">Шаблоны трафика ДАПР.</span><span class="sxs-lookup"><span data-stu-id="6c35f-272">Dapr traffic patterns.</span></span>

<span data-ttu-id="6c35f-273">Взглянув на предыдущий рисунок, один из них может дать вопрос о задержке и дополнительной нагрузке для каждого вызова.</span><span class="sxs-lookup"><span data-stu-id="6c35f-273">Looking at the previous figure, one might question the latency and overhead incurred for each call.</span></span>  

<span data-ttu-id="6c35f-274">Группа Дапра сильно затратила производительность.</span><span class="sxs-lookup"><span data-stu-id="6c35f-274">The Dapr team has invested heavily in performance.</span></span> <span data-ttu-id="6c35f-275">Огромный объем работ по проектированию ДАПР эффективно.</span><span class="sxs-lookup"><span data-stu-id="6c35f-275">A tremendous amount of engineering effort has gone into making Dapr efficient.</span></span> <span data-ttu-id="6c35f-276">Вызовы между ДАПР сидекарс всегда устанавливаются с помощью gRPC, что обеспечивает высокую производительность и небольшие двоичные данные.</span><span class="sxs-lookup"><span data-stu-id="6c35f-276">Calls between Dapr sidecars are always made with gRPC, which delivers high performance and small binary payloads.</span></span> <span data-ttu-id="6c35f-277">В большинстве случаев дополнительные издержки должны быть в миллисекундах.</span><span class="sxs-lookup"><span data-stu-id="6c35f-277">In most cases, the additional overhead should be sub-millisecond.</span></span>

<span data-ttu-id="6c35f-278">Для повышения производительности разработчики могут вызывать стандартные блоки ДАПР с помощью gRPC.</span><span class="sxs-lookup"><span data-stu-id="6c35f-278">To increase performance, developers can call the Dapr building blocks with gRPC.</span></span>

<span data-ttu-id="6c35f-279">gRPC — это современная высокопроизводительная платформа, которая используется для развития устаревшего протокола [удаленного вызова процедур (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) .</span><span class="sxs-lookup"><span data-stu-id="6c35f-279">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="6c35f-280">gRPC использует HTTP/2 для транспортного протокола, что обеспечивает значительное повышение производительности по сравнению со службой HTTP RESTFUL, в том числе:</span><span class="sxs-lookup"><span data-stu-id="6c35f-280">gRPC uses HTTP/2 for its transport protocol, which provides significant performance enhancements over HTTP RESTFul service, including:</span></span>

- <span data-ttu-id="6c35f-281">Поддержка мультиплексирования для отправки нескольких параллельных запросов через одно подключение — HTTP 1,1 ограничивает обработку одного сообщения "запрос-ответ" за раз.</span><span class="sxs-lookup"><span data-stu-id="6c35f-281">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="6c35f-282">Двунаправленный дуплексный обмен данными для одновременной отправки клиентских запросов и ответов сервера.</span><span class="sxs-lookup"><span data-stu-id="6c35f-282">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="6c35f-283">Встроенная потоковая передача, позволяющая запросам и ответам асинхронного потока больших наборов данных.</span><span class="sxs-lookup"><span data-stu-id="6c35f-283">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>

<span data-ttu-id="6c35f-284">Дополнительные сведения см. в [обзоре gRPC](https://docs.microsoft.com/dotnet/architecture/cloud-native/grpc#what-is-grpc) в разделе [проектирование архитектуры Cloud-Native приложений .NET для электронной документации по Azure](https://docs.microsoft.com/dotnet/architecture/cloud-native/) .</span><span class="sxs-lookup"><span data-stu-id="6c35f-284">To learn more, check out the [gRPC overview](https://docs.microsoft.com/dotnet/architecture/cloud-native/grpc#what-is-grpc) from the [Architecting Cloud-Native .NET Apps for Azure](https://docs.microsoft.com/dotnet/architecture/cloud-native/) eBook.</span></span>  

## <a name="dapr-and-service-meshes"></a><span data-ttu-id="6c35f-285">ДАПР и сети служб</span><span class="sxs-lookup"><span data-stu-id="6c35f-285">Dapr and service meshes</span></span>

<span data-ttu-id="6c35f-286">Сеть службы — это еще одна быстро развивающаяся технология для распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="6c35f-286">Service mesh is another rapidly evolving technology for distributed applications.</span></span>

<span data-ttu-id="6c35f-287">Сетка служб — это настраиваемый уровень инфраструктуры со встроенными возможностями для обработки связи между службами, устойчивости, балансировки нагрузки и сбора данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="6c35f-287">A service mesh is a configurable infrastructure layer with built-in capabilities to handle service-to-service communication, resiliency, load balancing, and telemetry capture.</span></span> <span data-ttu-id="6c35f-288">Он перенесет ответственность за эти проблемы из служб и на уровне сетки служб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-288">It moves the responsibility for these concerns out of the services and into the service mesh layer.</span></span> <span data-ttu-id="6c35f-289">Как и ДАПР, сеть службы также соответствует архитектуре расширения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-289">Like Dapr, a service mesh also follows a sidecar architecture.</span></span>

<span data-ttu-id="6c35f-290">На рис. 2-8 показано приложение, реализующее технологию сетки служб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-290">Figure 2-8 shows an application that implements service mesh technology.</span></span>

![Сеть службы](./media/dapr-at-20000-feet/service-mesh-with-side-car.png)

<span data-ttu-id="6c35f-292">**Рис. 2-8**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-292">**Figure 2-8**.</span></span> <span data-ttu-id="6c35f-293">Сеть службы с побочным автомобилем.</span><span class="sxs-lookup"><span data-stu-id="6c35f-293">Service mesh with a side car.</span></span>

<span data-ttu-id="6c35f-294">На предыдущем рисунке показано, как сообщения перехватываются прокси-сервером расширения, который работает параллельно с каждой службой.</span><span class="sxs-lookup"><span data-stu-id="6c35f-294">The previous figure shows how messages are intercepted by a sidecar proxy that runs alongside each service.</span></span> <span data-ttu-id="6c35f-295">Каждый прокси-сервер можно настроить с помощью правил трафика, относящихся к службе.</span><span class="sxs-lookup"><span data-stu-id="6c35f-295">Each proxy can be configured with traffic rules specific to the service.</span></span> <span data-ttu-id="6c35f-296">Он распознает сообщения и может маршрутизировать их во всех службах и во внешнем мире.</span><span class="sxs-lookup"><span data-stu-id="6c35f-296">It understands messages and can route them across your services and the outside world.</span></span>

<span data-ttu-id="6c35f-297">Итак, вопрос выглядит так: «ДАПР в сеть службы?».</span><span class="sxs-lookup"><span data-stu-id="6c35f-297">So the question becomes, "Is Dapr a service mesh?".</span></span>

<span data-ttu-id="6c35f-298">Хотя используется архитектура расширения, каждая технология имеет разные цели.</span><span class="sxs-lookup"><span data-stu-id="6c35f-298">While both use a sidecar architecture, each technology has a different purpose.</span></span> <span data-ttu-id="6c35f-299">ДАПР предоставляет функции распределенного приложения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-299">Dapr provides distributed application features.</span></span> <span data-ttu-id="6c35f-300">Сетка служб предоставляет выделенный уровень сетевой инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="6c35f-300">A service mesh provides a dedicated network infrastructure layer.</span></span>

<span data-ttu-id="6c35f-301">Все они работают на разных уровнях и могут совместно работать в одном приложении.</span><span class="sxs-lookup"><span data-stu-id="6c35f-301">As each works at a different level, both can work together in the same application.</span></span> <span data-ttu-id="6c35f-302">Например, сеть службы может обеспечить сетевую связь между службами.</span><span class="sxs-lookup"><span data-stu-id="6c35f-302">For example, a service mesh could provide networking communication between services.</span></span> <span data-ttu-id="6c35f-303">ДАПР может предоставлять службы приложений, такие как управление состоянием или службы субъектов.</span><span class="sxs-lookup"><span data-stu-id="6c35f-303">Dapr could provide application services such as state management or actor services.</span></span>

<span data-ttu-id="6c35f-304">На рис. 2-9 показано приложение, которое реализует технологию ДАПР и технологии сетки служб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-304">Figure 2-9 shows an application that implements both Dapr and service mesh technology.</span></span>

![ДАПР и совместная работа между службами](./media/dapr-at-20000-feet/dapr-and-service-mesh.png)

<span data-ttu-id="6c35f-306">**Рис. 2-9**.</span><span class="sxs-lookup"><span data-stu-id="6c35f-306">**Figure 2-9**.</span></span> <span data-ttu-id="6c35f-307">ДАПР и совместная работа между службами.</span><span class="sxs-lookup"><span data-stu-id="6c35f-307">Dapr and service mesh together.</span></span>

<span data-ttu-id="6c35f-308">[Интерактивная документация ДАПР](https://docs.dapr.io/concepts/faq/#networking-and-service-meshes) охватывает ДАПР и интеграцию с сеткой служб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-308">The [Dapr online documentation](https://docs.dapr.io/concepts/faq/#networking-and-service-meshes) cover Dapr and service mesh integration.</span></span>

## <a name="summary"></a><span data-ttu-id="6c35f-309">Итоги</span><span class="sxs-lookup"><span data-stu-id="6c35f-309">Summary</span></span>

<span data-ttu-id="6c35f-310">В этой главе мы предоставили вам ДАПР среду выполнения распределенного приложения.</span><span class="sxs-lookup"><span data-stu-id="6c35f-310">This chapter introduced you to Dapr, a Distributed Application Runtime.</span></span>

<span data-ttu-id="6c35f-311">ДАПР — это проект с открытым исходным кодом, который спонсор Майкрософт закрывает сотрудничество с клиентами и сообществом с открытым кодом.</span><span class="sxs-lookup"><span data-stu-id="6c35f-311">Dapr is an open-source project sponsored by Microsoft with close collaboration from customers and the open-source community.</span></span>

<span data-ttu-id="6c35f-312">По сути, ДАПР помогает снизить сложность распределенных приложений микрослужб.</span><span class="sxs-lookup"><span data-stu-id="6c35f-312">At its core, Dapr helps reduce the inherent complexity of distributed microservice applications.</span></span> <span data-ttu-id="6c35f-313">Он построен на основе концепции стандартных блоков API.</span><span class="sxs-lookup"><span data-stu-id="6c35f-313">It's built upon a concept of building block APIs.</span></span> <span data-ttu-id="6c35f-314">Стандартные блоки ДАПР предоставляют распространенные возможности распределенного приложения, такие как управление состоянием, вызов между службами и обмен сообщениями в формате публикации и подсистемы.</span><span class="sxs-lookup"><span data-stu-id="6c35f-314">Dapr building blocks expose common distributed application capabilities, such as state management, service-to-service invocation, and pub/sub messaging.</span></span> <span data-ttu-id="6c35f-315">Компоненты ДАПР находятся под стандартными блоками и предоставляют конкретную реализацию для каждой возможности.</span><span class="sxs-lookup"><span data-stu-id="6c35f-315">Dapr components lie beneath the building blocks and provide the concrete implementation for each capability.</span></span> <span data-ttu-id="6c35f-316">Приложения связываются с различными компонентами через файлы конфигурации.</span><span class="sxs-lookup"><span data-stu-id="6c35f-316">Applications bind to various components through configuration files.</span></span>

<span data-ttu-id="6c35f-317">В следующих главах мы представим практическое практическое руководство по использованию ДАПР в приложениях.</span><span class="sxs-lookup"><span data-stu-id="6c35f-317">In the next chapters, we present practical, hands-on instruction on how to use Dapr in your applications.</span></span>

### <a name="references"></a><span data-ttu-id="6c35f-318">Ссылки</span><span class="sxs-lookup"><span data-stu-id="6c35f-318">References</span></span>

- [<span data-ttu-id="6c35f-319">Документация по ДАПР</span><span class="sxs-lookup"><span data-stu-id="6c35f-319">Dapr documentation</span></span>](https://dapr.io/)
- [<span data-ttu-id="6c35f-320">Learning ДАПР</span><span class="sxs-lookup"><span data-stu-id="6c35f-320">Learning Dapr</span></span>](https://www.amazon.com/Learning-Dapr-Building-Distributed-Applications/dp/1492072427/ref=sr_1_1?dchild=1&keywords=dapr&qid=1604794794&sr=8-1)
- [<span data-ttu-id="6c35f-321">Микрослужбы .NET: архитектура контейнерных приложений .NET</span><span class="sxs-lookup"><span data-stu-id="6c35f-321">.NET Microservices: Architecture for Containerized .NET applications</span></span>](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook)
- [<span data-ttu-id="6c35f-322">Разработка архитектуры приложений Cloud-Native .NET для Azure</span><span class="sxs-lookup"><span data-stu-id="6c35f-322">Architecting Cloud-Native .NET Apps for Azure</span></span>](https://dotnet.microsoft.com/download/e-book/cloud-native-azure/pdf)

> [!div class="step-by-step"]
> <span data-ttu-id="6c35f-323">[Назад](the-world-is-distributed.md)
> [Вперед](getting-started.md)</span><span class="sxs-lookup"><span data-stu-id="6c35f-323">[Previous](the-world-is-distributed.md)
[Next](getting-started.md)</span></span>
