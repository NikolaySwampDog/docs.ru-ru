---
title: Мир распределенных систем
description: Преимущества и сложности распределенных приложений с использованием монолитных и SOA-подходов.
author: robvet
ms.date: 02/17/2021
ms.openlocfilehash: df182e81bcf95a84fc283dbb945d20f2218b0d0b
ms.sourcegitcommit: d623f686701b94bef905ec5e93d8b55d031c5d6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/17/2021
ms.locfileid: "103623945"
---
# <a name="the-world-is-distributed"></a><span data-ttu-id="a9df8-103">Мир распределенных систем</span><span class="sxs-lookup"><span data-stu-id="a9df8-103">The world is distributed</span></span>

<span data-ttu-id="a9df8-104">Просто спросите любой "замечательный ребенок": *современные, распределенные системы в, а монолитные приложения истекает!*</span><span class="sxs-lookup"><span data-stu-id="a9df8-104">Just ask any 'cool kid': *Modern, distributed systems are in, and monolithic apps are out!*</span></span>

<span data-ttu-id="a9df8-105">Но это не просто «замечательные дети».</span><span class="sxs-lookup"><span data-stu-id="a9df8-105">But, it's not just "cool kids."</span></span> <span data-ttu-id="a9df8-106">Прогрессивные ИТ-руководители, корпоративные архитекторы и разработчики внимательныйи выводят на экран те же идеи, что и исследование и оценка современных распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="a9df8-106">Progressive IT Leaders, corporate architects, and astute developers are echoing these same thoughts as they explore and evaluate modern distributed applications.</span></span> <span data-ttu-id="a9df8-107">Многие были приобретены в.</span><span class="sxs-lookup"><span data-stu-id="a9df8-107">Many have bought in.</span></span> <span data-ttu-id="a9df8-108">Они разрабатывает новые и Реконструирование существующих корпоративных приложений, следуя принципам, шаблонам и методикам распределенных приложений микрослужб.</span><span class="sxs-lookup"><span data-stu-id="a9df8-108">They're designing new and replatforming existing enterprise applications following the principles, patterns, and practices of distributed microservice applications.</span></span>

<span data-ttu-id="a9df8-109">Но эта эволюция создает множество вопросов...</span><span class="sxs-lookup"><span data-stu-id="a9df8-109">But, this evolution raises many questions...</span></span>

- <span data-ttu-id="a9df8-110">Что такое распределенное приложение?</span><span class="sxs-lookup"><span data-stu-id="a9df8-110">What exactly is a distributed application?</span></span>
- <span data-ttu-id="a9df8-111">Почему они получают популярность?</span><span class="sxs-lookup"><span data-stu-id="a9df8-111">Why are they gaining popularity?</span></span>
- <span data-ttu-id="a9df8-112">Каковы затраты?</span><span class="sxs-lookup"><span data-stu-id="a9df8-112">What are the costs?</span></span>
- <span data-ttu-id="a9df8-113">И, что важно, каковы компромиссы?</span><span class="sxs-lookup"><span data-stu-id="a9df8-113">And, importantly, what are the tradeoffs?</span></span>

<span data-ttu-id="a9df8-114">Для начала давайте перейдем назад и взглянем за последние 15 лет.</span><span class="sxs-lookup"><span data-stu-id="a9df8-114">To start, let's rewind and look at the past 15 years.</span></span> <span data-ttu-id="a9df8-115">В течение этого периода мы обычно создавали приложения в виде единой монолитной единицы.</span><span class="sxs-lookup"><span data-stu-id="a9df8-115">During this period, we typically constructed applications as a single, monolithic unit.</span></span> <span data-ttu-id="a9df8-116">На рис. 1-1 показана архитектура.</span><span class="sxs-lookup"><span data-stu-id="a9df8-116">Figure 1-1 shows the architecture.</span></span>

![Монолитная архитектура.](./media/the-world-is-distributed/monolithic-design.png)

<span data-ttu-id="a9df8-118">**Рис. 1-1**.</span><span class="sxs-lookup"><span data-stu-id="a9df8-118">**Figure 1-1**.</span></span> <span data-ttu-id="a9df8-119">Монолитная архитектура.</span><span class="sxs-lookup"><span data-stu-id="a9df8-119">Monolithic architecture.</span></span>

<span data-ttu-id="a9df8-120">Обратите внимание, как модули для упорядочивания, идентификации и маркетинга выполняются в односерверном процессе.</span><span class="sxs-lookup"><span data-stu-id="a9df8-120">Note how the modules for Ordering, Identity, and Marketing execute in a single-server process.</span></span> <span data-ttu-id="a9df8-121">Данные приложения хранятся в общей базе данных.</span><span class="sxs-lookup"><span data-stu-id="a9df8-121">Application data is stored in a shared database.</span></span> <span data-ttu-id="a9df8-122">Бизнес-функции предоставляются через интерфейсы HTML и RESTFUL.</span><span class="sxs-lookup"><span data-stu-id="a9df8-122">Business functionality is exposed via HTML and RESTful interfaces.</span></span>

<span data-ttu-id="a9df8-123">Во многих отношениях монолитные приложения являются `straightforward` .</span><span class="sxs-lookup"><span data-stu-id="a9df8-123">In many ways, monolithic apps are `straightforward`.</span></span> <span data-ttu-id="a9df8-124">Они просты в выполнении:</span><span class="sxs-lookup"><span data-stu-id="a9df8-124">They're straightforward to:</span></span>

- <span data-ttu-id="a9df8-125">Сборка</span><span class="sxs-lookup"><span data-stu-id="a9df8-125">Build</span></span>
- <span data-ttu-id="a9df8-126">Тестирование</span><span class="sxs-lookup"><span data-stu-id="a9df8-126">Test</span></span>
- <span data-ttu-id="a9df8-127">Развернуть</span><span class="sxs-lookup"><span data-stu-id="a9df8-127">Deploy</span></span>
- <span data-ttu-id="a9df8-128">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="a9df8-128">Troubleshoot</span></span>
- <span data-ttu-id="a9df8-129">Вертикальное масштабирование (увеличение масштаба)</span><span class="sxs-lookup"><span data-stu-id="a9df8-129">Scale vertically (scale up)</span></span>

<span data-ttu-id="a9df8-130">Однако монолитные архитектуры могут представлять значительные трудности.</span><span class="sxs-lookup"><span data-stu-id="a9df8-130">However, monolithic architectures can present significant challenges.</span></span>

<span data-ttu-id="a9df8-131">Со временем вы можете достичь точки, в которой начинается потеря контроля...</span><span class="sxs-lookup"><span data-stu-id="a9df8-131">Over time, you may reach a point where you begin to lose control...</span></span>

- <span data-ttu-id="a9df8-132">Монолитный поток стал настолько запутанным, что никто не понимает его.</span><span class="sxs-lookup"><span data-stu-id="a9df8-132">The monolith has become so overwhelmingly complicated that no single person understands it.</span></span>
- <span data-ttu-id="a9df8-133">Вы не вносите изменения, так как каждый из них приводит к непредвиденным и дорогостоящим побочным эффектам.</span><span class="sxs-lookup"><span data-stu-id="a9df8-133">You fear making changes as each brings unintended and costly side effects.</span></span>
- <span data-ttu-id="a9df8-134">Новые функции и исправления становятся трудоемкими и затратными для реализации.</span><span class="sxs-lookup"><span data-stu-id="a9df8-134">New features/fixes become time-consuming and expensive to implement.</span></span>
- <span data-ttu-id="a9df8-135">Даже наименьшее изменение требует полного развертывания всего приложения и его рискованного использования.</span><span class="sxs-lookup"><span data-stu-id="a9df8-135">Even the smallest change requires full deployment of the entire application - expensive and risky.</span></span>
- <span data-ttu-id="a9df8-136">Один нестабильный компонент может вызвать сбой всей системы.</span><span class="sxs-lookup"><span data-stu-id="a9df8-136">One unstable component can crash the entire system.</span></span>
- <span data-ttu-id="a9df8-137">Добавление новых технологий и платформ не является допустимым вариантом.</span><span class="sxs-lookup"><span data-stu-id="a9df8-137">Adding new technologies and frameworks aren't an option.</span></span>
- <span data-ttu-id="a9df8-138">Реализация методологий гибкой доставки не сложнее.</span><span class="sxs-lookup"><span data-stu-id="a9df8-138">Implementing agile delivery methodologies are difficult.</span></span>
- <span data-ttu-id="a9df8-139">Архитектура еросион в качестве базы кода приводит к невозможности «незавершенных» особых случаев.</span><span class="sxs-lookup"><span data-stu-id="a9df8-139">Architectural erosion sets in as the code base deteriorates with never-ending "special cases."</span></span>
- <span data-ttu-id="a9df8-140">В конечном итоге консультанты приходят и сообщат вам переписать их.</span><span class="sxs-lookup"><span data-stu-id="a9df8-140">Eventually the consultants come in and tell you to rewrite it.</span></span>

<span data-ttu-id="a9df8-141">Специалисты по ИТ вызывают это условие `the Fear Cycle` .</span><span class="sxs-lookup"><span data-stu-id="a9df8-141">IT practitioners call this condition `the Fear Cycle`.</span></span> <span data-ttu-id="a9df8-142">Если вы уже работали со специалистами по технологиям в течение какого-то периода времени, вы можете познакомиться с этим.</span><span class="sxs-lookup"><span data-stu-id="a9df8-142">If you've been in the technology business for any length of time, good chance you've experienced it.</span></span> <span data-ttu-id="a9df8-143">Это нагружает и выходит за пределы ИТ.</span><span class="sxs-lookup"><span data-stu-id="a9df8-143">It's stressful and exhausts your IT budget.</span></span> <span data-ttu-id="a9df8-144">Вместо создания новых и инновационных решений большая часть вашего бюджета тратится на поддержку устаревших приложений.</span><span class="sxs-lookup"><span data-stu-id="a9df8-144">Instead of building new and innovative solutions, most of your budget is spent maintaining legacy apps.</span></span>

<span data-ttu-id="a9df8-145">Вместо того, чтобы вынуждать в бизнесе, требуется `speed and agility` .</span><span class="sxs-lookup"><span data-stu-id="a9df8-145">Instead of fear, businesses require `speed and agility`.</span></span> <span data-ttu-id="a9df8-146">Они ищут архитектурный стиль, с помощью которого они могут быстро реагировать на условия рынка.</span><span class="sxs-lookup"><span data-stu-id="a9df8-146">They seek an architectural style with which they can rapidly respond to market conditions.</span></span> <span data-ttu-id="a9df8-147">Они должны мгновенно обновлять и индивидуально масштабировать небольшие области интерактивного приложения.</span><span class="sxs-lookup"><span data-stu-id="a9df8-147">They need to instantaneously update and individually scale small areas of a live application.</span></span>

<span data-ttu-id="a9df8-148">Более ранняя попытка получить скорость и гибкость появилась в виде архитектуры, [ориентированной на службы](https://en.wikipedia.org/wiki/Service-oriented_architecture), или `SOA` .</span><span class="sxs-lookup"><span data-stu-id="a9df8-148">An early attempt to gain speed and agility came in the form of [Service Oriented Architecture](https://en.wikipedia.org/wiki/Service-oriented_architecture), or `SOA`.</span></span> <span data-ttu-id="a9df8-149">В этой модели потребители служб и поставщики служб совместно используют компоненты для обмена сообщениями по промежуточного слоя, часто называемые [корпоративной шиной обслуживания](https://en.wikipedia.org/wiki/Enterprise_service_bus)или `ESB` .</span><span class="sxs-lookup"><span data-stu-id="a9df8-149">In this model, service consumers and service providers collaborated via middleware messaging components, often referred to as an [Enterprise Service Bus](https://en.wikipedia.org/wiki/Enterprise_service_bus), or `ESB`.</span></span> <span data-ttu-id="a9df8-150">На рис. 1-2 показана архитектура.</span><span class="sxs-lookup"><span data-stu-id="a9df8-150">Figure 1-2 shows the architecture.</span></span>

![Архитектура.](./media/the-world-is-distributed/soa-basic.png)

<span data-ttu-id="a9df8-152">**Рис. 1-2**.</span><span class="sxs-lookup"><span data-stu-id="a9df8-152">**Figure 1-2**.</span></span> <span data-ttu-id="a9df8-153">Архитектура SOA.</span><span class="sxs-lookup"><span data-stu-id="a9df8-153">SOA architecture.</span></span>

<span data-ttu-id="a9df8-154">С помощью SOA централизованные поставщики услуг, зарегистрированные в ESB.</span><span class="sxs-lookup"><span data-stu-id="a9df8-154">With SOA, centralized service providers registered with the ESB.</span></span> <span data-ttu-id="a9df8-155">Бизнес-логика будет встроена в ESB для интеграции поставщиков и потребителей.</span><span class="sxs-lookup"><span data-stu-id="a9df8-155">Business logic would be built into the ESB to integrate providers and consumers.</span></span> <span data-ttu-id="a9df8-156">Потребители служб могут затем находить эти поставщики и взаимодействовать с ними с помощью ESB.</span><span class="sxs-lookup"><span data-stu-id="a9df8-156">Service consumers could then find and communicate with these providers using the ESB.</span></span>

<span data-ttu-id="a9df8-157">Несмотря на обещание SOA, реализация такого подхода часто повышает сложность и предлагает узкие места.</span><span class="sxs-lookup"><span data-stu-id="a9df8-157">Despite the promises of SOA, implementing this approach often increased complexity and introduced bottlenecks.</span></span> <span data-ttu-id="a9df8-158">Затраты на обслуживание стали высокими, и по промежуточному плану ESB дорого.</span><span class="sxs-lookup"><span data-stu-id="a9df8-158">Maintenance costs became high and ESB middleware expensive.</span></span> <span data-ttu-id="a9df8-159">Службы, как правило, имеют большой размер.</span><span class="sxs-lookup"><span data-stu-id="a9df8-159">Services tended to be large.</span></span> <span data-ttu-id="a9df8-160">Они часто являются общими зависимостями и хранилищем данных.</span><span class="sxs-lookup"><span data-stu-id="a9df8-160">They often shared dependencies and data storage.</span></span> <span data-ttu-id="a9df8-161">В итоге SOA часто приводит к созданию распределенной структуры с централизованными службами, которые были защищены от изменения.</span><span class="sxs-lookup"><span data-stu-id="a9df8-161">In the end, SOAs often resulted in a 'distributed monolithic' structure with centralized services that were resistant to change.</span></span>

<span data-ttu-id="a9df8-162">Настоящее время, многие организации применяют скорость и гибкость, применяя архитектурный подход к созданию систем на основе архитектуры распределенных микрослужб.</span><span class="sxs-lookup"><span data-stu-id="a9df8-162">Nowadays, many organizations have realized speed and agility by adopting a distributed microservice architectural approach to building systems.</span></span> <span data-ttu-id="a9df8-163">На рис. 1-3 показана система, созданная с использованием распределенных методик и методик.</span><span class="sxs-lookup"><span data-stu-id="a9df8-163">Figure 1-3 shows the same system built using distributed techniques and practices.</span></span>

![Распределенная архитектура.](./media/the-world-is-distributed/distributed-design.png)

<span data-ttu-id="a9df8-165">**Рис. 1-3**.</span><span class="sxs-lookup"><span data-stu-id="a9df8-165">**Figure 1-3**.</span></span> <span data-ttu-id="a9df8-166">Распределенная архитектура.</span><span class="sxs-lookup"><span data-stu-id="a9df8-166">Distributed architecture.</span></span>

<span data-ttu-id="a9df8-167">Обратите внимание, что одно и то же приложение разбивается по набору распределенных служб.</span><span class="sxs-lookup"><span data-stu-id="a9df8-167">Note how the same application is decomposed across a set of distributed services.</span></span> <span data-ttu-id="a9df8-168">Каждый из них самодостаточен и инкапсулирует собственный код, данные и зависимости.</span><span class="sxs-lookup"><span data-stu-id="a9df8-168">Each is self-contained and encapsulates its own code, data, and dependencies.</span></span> <span data-ttu-id="a9df8-169">Каждый из них развертывается в контейнере программного обеспечения и управляется контейнером Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="a9df8-169">Each is deployed in a software container and managed by a container orchestrator.</span></span> <span data-ttu-id="a9df8-170">Вместо единственной базы данных, совместно используемой несколькими службами, каждая служба владеет частной базой данных.</span><span class="sxs-lookup"><span data-stu-id="a9df8-170">Instead of a single database shared by multiple services, each service owns a private database.</span></span> <span data-ttu-id="a9df8-171">Другие службы не имеют прямой доступ к этой базе данных и могут получить только данные, предоставляемые через общедоступный API службы, которой она принадлежит.</span><span class="sxs-lookup"><span data-stu-id="a9df8-171">Other services can't access this database directly and can only get to data that is exposed through the public API of the service that owns it.</span></span> <span data-ttu-id="a9df8-172">Обратите внимание, что некоторым службам требуется полная реляционная база данных, а другие — хранилище данных NoSQL.</span><span class="sxs-lookup"><span data-stu-id="a9df8-172">Note how some services require a full relational database, but others, a NoSQL datastore.</span></span> <span data-ttu-id="a9df8-173">Служба корзины хранит свое состояние в распределенном кэше ключей и значений.</span><span class="sxs-lookup"><span data-stu-id="a9df8-173">The basket service stores its state in a distributed key/value cache.</span></span> <span data-ttu-id="a9df8-174">Обратите внимание, как входящий трафик перенаправляется через службу шлюза API.</span><span class="sxs-lookup"><span data-stu-id="a9df8-174">Note how inbound traffic routes through an API Gateway service.</span></span> <span data-ttu-id="a9df8-175">Он отвечает за направление вызовов к службам и применение перекрестной задачи.</span><span class="sxs-lookup"><span data-stu-id="a9df8-175">It's responsible for directing calls to  services and enforcing cross-cutting concerns.</span></span> <span data-ttu-id="a9df8-176">Что важнее всего, приложение использует все преимущества функций масштабируемости, доступности и устойчивости, имеющихся в современных облачных платформах.</span><span class="sxs-lookup"><span data-stu-id="a9df8-176">Most importantly, the application takes full advantage of the scalability, availability, and resiliency features found in modern cloud platforms.</span></span>

<span data-ttu-id="a9df8-177">Однако, в то время как распределенные службы обеспечивают гибкость и скорость, они представляют собой разные наборы проблем.</span><span class="sxs-lookup"><span data-stu-id="a9df8-177">But, while distributed services can provide agility and speed, they present a different set of challenges.</span></span> <span data-ttu-id="a9df8-178">Рассмотрим следующее...</span><span class="sxs-lookup"><span data-stu-id="a9df8-178">Consider the following...</span></span>

- <span data-ttu-id="a9df8-179">Как распределенные службы могут обнаруживать друг друга и обмениваться данными синхронно?</span><span class="sxs-lookup"><span data-stu-id="a9df8-179">How can distributed services discover each other and communicate synchronously?</span></span>
- <span data-ttu-id="a9df8-180">Как они могут реализовать асинхронный обмен сообщениями?</span><span class="sxs-lookup"><span data-stu-id="a9df8-180">How can they implement asynchronous messaging?</span></span>
- <span data-ttu-id="a9df8-181">Как они могут поддерживать контекстную информацию в рамках транзакции?</span><span class="sxs-lookup"><span data-stu-id="a9df8-181">How can they maintain contextual information across a transaction?</span></span>
- <span data-ttu-id="a9df8-182">Как они могут быть устойчивыми к сбоям?</span><span class="sxs-lookup"><span data-stu-id="a9df8-182">How can they become resilient to failure?</span></span>
- <span data-ttu-id="a9df8-183">Как они могут масштабироваться в соответствии с колебаниями спроса?</span><span class="sxs-lookup"><span data-stu-id="a9df8-183">How can they scale to meet fluctuating demand?</span></span>
- <span data-ttu-id="a9df8-184">Как они отслеживаются и наблюдаются?</span><span class="sxs-lookup"><span data-stu-id="a9df8-184">How are they monitored and observed?</span></span>

<span data-ttu-id="a9df8-185">Для каждой из этих задач часто доступны несколько продуктов.</span><span class="sxs-lookup"><span data-stu-id="a9df8-185">For each of these challenges, multiple products are often available.</span></span> <span data-ttu-id="a9df8-186">Однако экранирование приложения от различий к продуктам и обеспечение поддержки и переносимости кода становится проблемой.</span><span class="sxs-lookup"><span data-stu-id="a9df8-186">But, shielding your application from product differences and keeping code maintainable and portable become a challenge.</span></span>

<span data-ttu-id="a9df8-187">В этой книге представлены ДАПР.</span><span class="sxs-lookup"><span data-stu-id="a9df8-187">This book introduces Dapr.</span></span> <span data-ttu-id="a9df8-188">ДАПР — это распределенная среда выполнения приложения.</span><span class="sxs-lookup"><span data-stu-id="a9df8-188">Dapr is a distributed application runtime.</span></span> <span data-ttu-id="a9df8-189">Он напрямую решает многие из обнаруженных проблем вместе с распределенными приложениями.</span><span class="sxs-lookup"><span data-stu-id="a9df8-189">It directly addresses many of the challenges found that come along with distributed applications.</span></span> <span data-ttu-id="a9df8-190">Глядя на то, что ДАПР может иметь более глубокое воздействие на разработку распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="a9df8-190">Looking ahead, Dapr has the potential to have a profound impact on distributed application development.</span></span>

## <a name="summary"></a><span data-ttu-id="a9df8-191">Итоги</span><span class="sxs-lookup"><span data-stu-id="a9df8-191">Summary</span></span>

<span data-ttu-id="a9df8-192">В этой главе мы обсуждали внедрение распределенных приложений.</span><span class="sxs-lookup"><span data-stu-id="a9df8-192">In this chapter, we discussed the adoption of distributed applications.</span></span> <span data-ttu-id="a9df8-193">Мы отменяем монолитный подход к работе с распределенными службами.</span><span class="sxs-lookup"><span data-stu-id="a9df8-193">We contrasted a monolithic system approach with that of distributed services.</span></span> <span data-ttu-id="a9df8-194">Мы указали многие распространенные проблемы при рассмотрении распределенного подхода.</span><span class="sxs-lookup"><span data-stu-id="a9df8-194">We pointed out many of the common challenges when considering a distributed approach.</span></span>

<span data-ttu-id="a9df8-195">Теперь вы можете переключить свою работу и подать нам новый мир ДАПР.</span><span class="sxs-lookup"><span data-stu-id="a9df8-195">Now, sit back, relax, and let us introduce you the new world of Dapr.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a9df8-196">[Назад](foreword.md)
>[Вперед](dapr-at-20000-feet.md)</span><span class="sxs-lookup"><span data-stu-id="a9df8-196">[Previous](foreword.md)
[Next](dapr-at-20000-feet.md)</span></span>
