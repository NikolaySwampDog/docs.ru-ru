---
title: Сравнение контроллеров в ASP.NET MVC и ASP.NET Core
description: ASP.NET Core контроллеры MVC похожи на контроллеры ASP.NET MVC 5 и Web API 2, но существуют важные различия. В этом разделе рассматриваются различия и действия, необходимые для переноса приложений из ASP.NET MVC и Web API 2 в ASP.NET Core.
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 2c2b7b848162a6ab9901ac9f7779787e2cc994ce
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401781"
---
# <a name="compare-controllers-in-aspnet-mvc-and-web-api-with-controllers-in-aspnet-core"></a><span data-ttu-id="07061-104">Сравнение контроллеров в ASP.NET MVC и веб-API с контроллерами в ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="07061-104">Compare controllers in ASP.NET MVC and Web API with controllers in ASP.NET Core</span></span>

<span data-ttu-id="07061-105">В ASP.NET MVC 5 и Web API 2 существовали два разных `Controller` базовых типа.</span><span class="sxs-lookup"><span data-stu-id="07061-105">In ASP.NET MVC 5 and Web API 2, there were two different `Controller` base types.</span></span> <span data-ttu-id="07061-106">Контроллеры MVC, наследуемые от `Controller` ; Контроллеры веб-API, наследуемые от `ApiController` .</span><span class="sxs-lookup"><span data-stu-id="07061-106">MVC controllers inherited from `Controller`; Web API controllers inherited from `ApiController`.</span></span> <span data-ttu-id="07061-107">В ASP.NET Core Эта иерархия объектов была объединена.</span><span class="sxs-lookup"><span data-stu-id="07061-107">In ASP.NET Core, this object hierarchy has been merged.</span></span> <span data-ttu-id="07061-108">Рекомендуется, чтобы контроллеры API в ASP.NET Core наследовались от `ControllerBase` и добавили `[ApiController]` атрибут.</span><span class="sxs-lookup"><span data-stu-id="07061-108">It's recommended that API controllers in ASP.NET Core inherit from `ControllerBase` and add the `[ApiController]` attribute.</span></span> <span data-ttu-id="07061-109">Стандартные контроллеры MVC, основанные на представлении, должны наследоваться от `Controller` .</span><span class="sxs-lookup"><span data-stu-id="07061-109">Standard view-based MVC controllers should inherit from `Controller`.</span></span>

<span data-ttu-id="07061-110">В обеих платформах контроллеры используются для организации наборов методов действий.</span><span class="sxs-lookup"><span data-stu-id="07061-110">In both frameworks, controllers are used to organize sets of action methods.</span></span> <span data-ttu-id="07061-111">Фильтры и маршруты можно применять к уровню контроллера в дополнение к уровню действий.</span><span class="sxs-lookup"><span data-stu-id="07061-111">Filters and routes can be applied on a controller level in addition to at the action level.</span></span> <span data-ttu-id="07061-112">Эти соглашения можно дополнительно расширить, используя пользовательские базовые `Controller` типы с поведением по умолчанию и применяемыми к ним атрибутами.</span><span class="sxs-lookup"><span data-stu-id="07061-112">These conventions can be extended further by using custom base `Controller` types with default behavior and attributes applied to them.</span></span>

<span data-ttu-id="07061-113">В ASP.NET MVC согласование содержимого не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="07061-113">In ASP.NET MVC, content negotiation isn't supported.</span></span> <span data-ttu-id="07061-114">Веб-API ASP.NET 2 поддерживает согласование содержимого, как это делает ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="07061-114">ASP.NET Web API 2 does support content negotiation, as does ASP.NET Core.</span></span> <span data-ttu-id="07061-115">При использовании [согласования содержимого](/aspnet/core/web-api/advanced/formatting)формат содержимого, возвращаемого в запрос, может определяться заголовками, которые клиент предоставляет, указывая предпочтительный способ получения содержимого.</span><span class="sxs-lookup"><span data-stu-id="07061-115">Using [content negotiation](/aspnet/core/web-api/advanced/formatting), the format of the content returned to a request can be determined by headers the client provides indicating its preferred manner of receiving the content.</span></span>

<span data-ttu-id="07061-116">При переносе контроллеров веб-API ASP.NET в ASP.NET Core необходимо изменить несколько компонентов, если они существуют.</span><span class="sxs-lookup"><span data-stu-id="07061-116">When migrating ASP.NET Web API controllers to ASP.NET Core, a few components need to be changed if they exist.</span></span> <span data-ttu-id="07061-117">К ним относятся ссылки на `ApiController` базовый класс, `System.Web.Http` пространство имен и `IHttpActionResult` интерфейс.</span><span class="sxs-lookup"><span data-stu-id="07061-117">These include references to the `ApiController` base class, the `System.Web.Http` namespace, and the `IHttpActionResult` interface.</span></span> <span data-ttu-id="07061-118">[Рекомендации по переносу указанных различий](/aspnet/core/migration/webapi)см. в документации.</span><span class="sxs-lookup"><span data-stu-id="07061-118">Refer to the [documentation for recommendations on how to migrate these specific differences](/aspnet/core/migration/webapi).</span></span> <span data-ttu-id="07061-119">Обратите внимание, что предпочтительным типом возвращаемого значения для действий API в ASP.NET Core является `ActionResult<T>` .</span><span class="sxs-lookup"><span data-stu-id="07061-119">Note that the preferred return type for API actions in ASP.NET Core is `ActionResult<T>`.</span></span>

<span data-ttu-id="07061-120">Кроме того, `[ChildActionOnly]` атрибут не поддерживается в ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="07061-120">In addition, the `[ChildActionOnly]` attribute isn't supported in ASP.NET Core.</span></span> <span data-ttu-id="07061-121">В ASP.NET Core аналогичные функциональные возможности реализуются с помощью [компонентов представления](/aspnet/core/mvc/views/view-components).</span><span class="sxs-lookup"><span data-stu-id="07061-121">In ASP.NET Core, similar functionality is achieved using [View Components](/aspnet/core/mvc/views/view-components).</span></span>

<span data-ttu-id="07061-122">ASP.NET Core включает два новых атрибута: [консумесаттрибуте](/dotnet/api/microsoft.aspnetcore.mvc.consumesattribute) и [продуцесаттрибуте](/dotnet/api/microsoft.aspnetcore.mvc.producesattribute).</span><span class="sxs-lookup"><span data-stu-id="07061-122">ASP.NET Core includes two new attributes: [ConsumesAttribute](/dotnet/api/microsoft.aspnetcore.mvc.consumesattribute) and [ProducesAttribute](/dotnet/api/microsoft.aspnetcore.mvc.producesattribute).</span></span> <span data-ttu-id="07061-123">Они используются для указания типа, который потребляет или создает действие, что может быть полезно для маршрутизации и документирования API с помощью таких средств, как [Swagger и OpenAPI](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span><span class="sxs-lookup"><span data-stu-id="07061-123">These are used to specify the type an action consumes or produces, which can be helpful for routing and documenting the API using tools like [Swagger/OpenAPI](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span></span>

## <a name="references"></a><span data-ttu-id="07061-124">Ссылки</span><span class="sxs-lookup"><span data-stu-id="07061-124">References</span></span>

- [<span data-ttu-id="07061-125">Форматирование данных отклика в веб-API ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="07061-125">Format response data in ASP.NET Core Web API</span></span>](/aspnet/core/web-api/advanced/formatting)
- [<span data-ttu-id="07061-126">Переход с веб-API ASP.NET на ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="07061-126">Migrate from ASP.NET Web API to ASP.NET Core</span></span>](/aspnet/core/migration/webapi)

>[!div class="step-by-step"]
><span data-ttu-id="07061-127">[Назад](identity-differences.md)
>[Вперед](razor-differences.md)</span><span class="sxs-lookup"><span data-stu-id="07061-127">[Previous](identity-differences.md)
[Next](razor-differences.md)</span></span>
