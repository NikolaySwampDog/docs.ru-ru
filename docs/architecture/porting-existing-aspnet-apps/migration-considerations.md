---
title: Вопросы миграции
description: Что нужно знать команде, чтобы принять правильное решение о том, следует ли выполнить миграцию из ASP.NET MVC в .NET Core?
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: c669dc477469c92dfa3acda8209ba7a1fdea5ed5
ms.sourcegitcommit: b5d2290673e1c91260c9205202dd8b95fbab1a0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "106122863"
---
# <a name="migration-considerations"></a><span data-ttu-id="77795-103">Вопросы миграции</span><span class="sxs-lookup"><span data-stu-id="77795-103">Migration considerations</span></span>

<span data-ttu-id="77795-104">Самые фундаментальные группы вопросов должны отвечать, когда речь заходит о переносе своих приложений в .NET Core?</span><span class="sxs-lookup"><span data-stu-id="77795-104">The most fundamental question teams must answer when it comes to porting their apps to .NET Core is, should they port at all?</span></span> <span data-ttu-id="77795-105">В некоторых случаях лучшим путем вперед является платформа .NET Framework с помощью ASP.NET MVC и (или) веб-API.</span><span class="sxs-lookup"><span data-stu-id="77795-105">In some cases, the best path forward is to remain on .NET Framework using ASP.NET MVC and/or Web API.</span></span> <span data-ttu-id="77795-106">В этой главе рассматриваются причины, по которым имеет смысл переход на .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-106">This chapter considers reasons why moving to .NET Core makes sense.</span></span> <span data-ttu-id="77795-107">В главе также рассматриваются сценарии и каунтерпоинтс для платформа .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="77795-107">The chapter also considers scenarios and counterpoints for staying on .NET Framework.</span></span>

## <a name="is-migration-to-net-core-appropriate"></a><span data-ttu-id="77795-108">Подходит ли миграция на .NET Core?</span><span class="sxs-lookup"><span data-stu-id="77795-108">Is migration to .NET Core appropriate?</span></span>

<span data-ttu-id="77795-109">Начнем с некоторых причин, по которым может потребоваться перейти на .NET Core (или .NET 5).</span><span class="sxs-lookup"><span data-stu-id="77795-109">Let's start with some of the reasons why you might want to move to .NET Core (or .NET 5).</span></span> <span data-ttu-id="77795-110">Существует довольно много, так что не следует думать о данном списке.</span><span class="sxs-lookup"><span data-stu-id="77795-110">There are quite a few, so don't consider this list exhaustive.</span></span>

### <a name="cross-platform-support"></a><span data-ttu-id="77795-111">Кроссплатформенная поддержка</span><span class="sxs-lookup"><span data-stu-id="77795-111">Cross-platform support</span></span>

<span data-ttu-id="77795-112">Приложения, созданные на платформе .NET Core, действительно являются кросс-платформенными и могут работать в Windows, Linux и macOS.</span><span class="sxs-lookup"><span data-stu-id="77795-112">Apps built on .NET Core are truly cross-platform and can run on Windows, Linux, and macOS.</span></span> <span data-ttu-id="77795-113">Разработчики могут использовать любое необходимое Вам оборудование, но вы также можете разместить свое приложение в любом месте.</span><span class="sxs-lookup"><span data-stu-id="77795-113">Not only can your developers use whatever hardware they want, but you can also host your app anywhere.</span></span> <span data-ttu-id="77795-114">Примеры: от локальных служб IIS до Azure в облаке или из контейнеров DOCKER для Linux на устройствах IoT.</span><span class="sxs-lookup"><span data-stu-id="77795-114">Examples range from local IIS to Azure in the cloud or from Linux Docker containers to IoT devices.</span></span>

### <a name="performance-and-scalability"></a><span data-ttu-id="77795-115">Производительность и масштабирование</span><span class="sxs-lookup"><span data-stu-id="77795-115">Performance and scalability</span></span>

<span data-ttu-id="77795-116">Приложения, созданные с помощью .NET Core, работают в [одном из самых быстрых технических стеков, доступных в любой точке мира](https://www.techempower.com/benchmarks/#hw=ph&test=plaintext).</span><span class="sxs-lookup"><span data-stu-id="77795-116">Apps built with .NET Core are running on [one of the fastest tech stacks available anywhere](https://www.techempower.com/benchmarks/#hw=ph&test=plaintext).</span></span> <span data-ttu-id="77795-117">ASP.NET приложения MVC часто проводят улучшения производительности на ASP.NET Core, особенно если они обновлены, чтобы воспользоваться преимуществами некоторых новых функций, доступных в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-117">ASP.NET MVC apps often see performance improvements on ASP.NET Core, especially if they're updated to take advantage of some new features available in .NET Core.</span></span>

### <a name="cloud-native"></a><span data-ttu-id="77795-118">Облачная среда</span><span class="sxs-lookup"><span data-stu-id="77795-118">Cloud-native</span></span>

<span data-ttu-id="77795-119">По тем или иным причинам, приложения .NET Core хорошо подходят для работы в облачных средах размещения.</span><span class="sxs-lookup"><span data-stu-id="77795-119">For the above reasons and others, .NET Core apps are well-suited to running in cloud hosting environments.</span></span> <span data-ttu-id="77795-120">Приложения .NET Core можно развертывать в службах или контейнерах Azure, а также масштабировать по горизонтали в соответствии с немедленным требованием к системе.</span><span class="sxs-lookup"><span data-stu-id="77795-120">Lightweight and fast, .NET Core apps can be deployed to Azure App Services or containers and scaled horizontally as needed to meet immediate system demand.</span></span>

### <a name="maintainable"></a><span data-ttu-id="77795-121">Сопровождении</span><span class="sxs-lookup"><span data-stu-id="77795-121">Maintainable</span></span>

<span data-ttu-id="77795-122">Для многих приложений, в то время как они продолжают удовлетворять потребности клиентов и бизнеса, служба технической задолженности накопления и обслуживания приложения увеличила дорогостоящие.</span><span class="sxs-lookup"><span data-stu-id="77795-122">For many apps, while they've continued to meet customer and business needs, technical debt has accumulated and maintaining the app has grown expensive.</span></span> <span data-ttu-id="77795-123">ASP.NET Core приложения проще тестировать, чем ASP.NET приложения MVC, упрощая их оптимизацию и расширение.</span><span class="sxs-lookup"><span data-stu-id="77795-123">ASP.NET Core apps are more easily tested than ASP.NET MVC apps, making them easier to refactor and extend with confidence.</span></span>

### <a name="modular"></a><span data-ttu-id="77795-124">Модульность</span><span class="sxs-lookup"><span data-stu-id="77795-124">Modular</span></span>

<span data-ttu-id="77795-125">ASP.NET Core является модульной, использование пакетов NuGet является частью платформы в качестве первого класса.</span><span class="sxs-lookup"><span data-stu-id="77795-125">ASP.NET Core is modular, using NuGet packages as a first-class part of the framework.</span></span> <span data-ttu-id="77795-126">Приложения, созданные для .NET Core, поддерживают внедрение зависимостей, что упрощает составление решений из любых реализаций, необходимых для конкретной среды.</span><span class="sxs-lookup"><span data-stu-id="77795-126">Apps built for .NET Core all support dependency injection, making it easy to compose solutions from whatever implementations are needed for a given environment.</span></span> <span data-ttu-id="77795-127">Создание микрослужб с помощью .NET Core проще, чем с помощью ASP.NET MVC с зависимостью от IIS, что открывает дополнительные возможности для разбиения больших приложений на небольшие модули.</span><span class="sxs-lookup"><span data-stu-id="77795-127">Building microservices with .NET Core is easier than with ASP.NET MVC with its dependency on IIS, which opens up additional options to break up large apps into smaller modules.</span></span>

### <a name="modern"></a><span data-ttu-id="77795-128">Современная</span><span class="sxs-lookup"><span data-stu-id="77795-128">Modern</span></span>

<span data-ttu-id="77795-129">Поддержка современного, активно разработанного технологического стека имеет свои преимущества.</span><span class="sxs-lookup"><span data-stu-id="77795-129">Staying on a modern, actively developed technology stack has a host of advantages.</span></span> <span data-ttu-id="77795-130">Новые функции и возможности языка C# будут добавлены только в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-130">New features and C# language features will only be added to .NET Core.</span></span> <span data-ttu-id="77795-131">В платформа .NET Framework был последний выпуск с версией 4,8, а версии C#, кроме 8, не предназначены для платформа .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="77795-131">The .NET Framework has had its last release with version 4.8, and versions of C# beyond 8 won't target .NET Framework.</span></span> <span data-ttu-id="77795-132">Хотя ASP.NET MVC будет поддерживаться корпорацией Майкрософт в течение многих лет, лучшим и ярким разработчикам программного обеспечения .NET, скорее всего, потребуется использовать более современные версии .NET Core Framework со всеми преимуществами, предоставляемыми ИТ-отделом (только некоторые из которых описаны выше).</span><span class="sxs-lookup"><span data-stu-id="77795-132">While ASP.NET MVC will remain supported by Microsoft for many years, the best and brightest .NET software developers are likely looking to use the more modern .NET Core framework, with all of the advantages it offers (only some of which are summarized above).</span></span> <span data-ttu-id="77795-133">Поиск разработчиков с навыками для поддержки ASP.NET приложения MVC начнет стать проблемой в некоторый момент, так как найдет интерактивное обучение и помощь в устранении неполадок.</span><span class="sxs-lookup"><span data-stu-id="77795-133">Finding developers with the skills to maintain an ASP.NET MVC app will start to become a challenge at some point, as will finding online training and troubleshooting assistance.</span></span> <span data-ttu-id="77795-134">Вероятно, не существует много новых записей в блоге о ASP.NET MVC 5, в то время как есть множество написанных для .NET 5,0, например.</span><span class="sxs-lookup"><span data-stu-id="77795-134">There probably aren't that many new blog posts being written about ASP.NET MVC 5, while there are plenty being written for .NET 5.0, for example.</span></span>

<span data-ttu-id="77795-135">Существует множество причин, по которым следует рассмотреть возможность перехода на .NET Core, что, по сути, объясняет, почему вы читаете эту книгу!</span><span class="sxs-lookup"><span data-stu-id="77795-135">There are many compelling reasons to consider migrating to .NET Core, which presumably is why you're reading this book!</span></span> <span data-ttu-id="77795-136">Но давайте расскажем о некоторых недостатках и причинах, по которым он может быть лучше оставаться на платформа .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="77795-136">But let's consider some disadvantages and reasons why it may make more sense to remain on the .NET Framework.</span></span>

## <a name="when-is-net-framework-appropriate"></a><span data-ttu-id="77795-137">Когда платформа .NET Framework подходит?</span><span class="sxs-lookup"><span data-stu-id="77795-137">When is .NET Framework appropriate?</span></span>

<span data-ttu-id="77795-138">Самая большая причина, по которой следует оставаться на платформа .NET Framework, — когда приложение не находится в активном разработе и не слишком выгодно для преимуществ, перечисленных выше.</span><span class="sxs-lookup"><span data-stu-id="77795-138">The biggest reason to stay on .NET Framework is when an app isn't under active development and wouldn't benefit substantially from the advantages listed above.</span></span> <span data-ttu-id="77795-139">В этом случае, вероятно, нет хорошего бизнес-ситуации, которая повлечет за собой стоимость переноса приложения.</span><span class="sxs-lookup"><span data-stu-id="77795-139">In that case, there probably isn't a good business case to incur the cost of porting the app.</span></span> <span data-ttu-id="77795-140">Если ваше приложение может воспользоваться преимуществами предложений .NET Core, вам по-прежнему нужно оставаться платформа .NET Framework, если вам нужны некоторые технологии, недоступные в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-140">If your app might benefit from the advantages .NET Core offers, you may still need to stay on .NET Framework if you need certain technologies that are unavailable on .NET Core.</span></span> <span data-ttu-id="77795-141">Некоторые [технологии .NET недоступны в .NET Core](../../core/porting/net-framework-tech-unavailable.md), включая домены AppDomain, удаленное взаимодействие, разграничение доступа кода (CAS), прозрачность безопасности и `System.EnterpriseServices` .</span><span class="sxs-lookup"><span data-stu-id="77795-141">There are some [.NET technologies that are unavailable on .NET Core](../../core/porting/net-framework-tech-unavailable.md), including AppDomains, Remoting, Code Access Security (CAS), Security Transparency, and `System.EnterpriseServices`.</span></span> <span data-ttu-id="77795-142">Здесь приведены краткие сведения об этих технологиях и их альтернативах.</span><span class="sxs-lookup"><span data-stu-id="77795-142">A brief summary of these technologies and their alternatives is included here.</span></span> <span data-ttu-id="77795-143">Более подробные инструкции см. в документации.</span><span class="sxs-lookup"><span data-stu-id="77795-143">For more detailed guidance, see the documentation.</span></span>

### <a name="application-domains"></a><span data-ttu-id="77795-144">Домены приложений</span><span class="sxs-lookup"><span data-stu-id="77795-144">Application domains</span></span>

<span data-ttu-id="77795-145">Домены приложений позволяют изолировать приложения друг от друга.</span><span class="sxs-lookup"><span data-stu-id="77795-145">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="77795-146">AppDomains требуется поддержка среды выполнения и может быть дорогостоящей.</span><span class="sxs-lookup"><span data-stu-id="77795-146">AppDomains require runtime support and can be expensive.</span></span> <span data-ttu-id="77795-147">Создание дополнительных доменов приложений не поддерживается, и в будущем не планируется добавлять эту возможность в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-147">Creating additional app domains isn't supported, and there are no plans to add this capability to .NET Core in the future.</span></span> <span data-ttu-id="77795-148">Для изоляции кода используйте в качестве альтернативы отдельные процессы или контейнеры.</span><span class="sxs-lookup"><span data-stu-id="77795-148">For code isolation, use separate processes or containers as an alternative.</span></span> <span data-ttu-id="77795-149">Некоторые клиенты используют домены AppDomain как способ выгрузки сборок.</span><span class="sxs-lookup"><span data-stu-id="77795-149">Some customers use AppDomains as a way of unloading assemblies.</span></span> <span data-ttu-id="77795-150">В .NET Core [ассемблилоадконтекст](https://docs.microsoft.com/dotnet/standard/assembly/unloadability) предоставляет альтернативный способ выгрузки сборок.</span><span class="sxs-lookup"><span data-stu-id="77795-150">In .NET Core [AssemblyLoadContext](https://docs.microsoft.com/dotnet/standard/assembly/unloadability) provides an alternative way to unload assemblies.</span></span>

### <a name="wcf"></a><span data-ttu-id="77795-151">WCF</span><span class="sxs-lookup"><span data-stu-id="77795-151">WCF</span></span>

<span data-ttu-id="77795-152">Серверная часть WCF не поддерживается в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-152">Server-side WCF isn't supported in .NET Core.</span></span> <span data-ttu-id="77795-153">.NET Core поддерживает клиенты WCF, но не узлы WCF.</span><span class="sxs-lookup"><span data-stu-id="77795-153">.NET Core supports WCF clients but not WCF hosts.</span></span> <span data-ttu-id="77795-154">Приложения, которым требуются эти функции, потребуется обновить до различных технологий связи (например, gRPC или RESTFUL) в процессе миграции.</span><span class="sxs-lookup"><span data-stu-id="77795-154">Apps that require this functionality will need to upgrade to a different communication technology (such as gRPC or REST) as part of a migration.</span></span>

<span data-ttu-id="77795-155">В [.NET Foundation доступен клиентский порт WCF](../../core/dotnet-five.md#windows-communication-foundation).</span><span class="sxs-lookup"><span data-stu-id="77795-155">There is a [WCF client port available from the .NET Foundation](../../core/dotnet-five.md#windows-communication-foundation).</span></span> <span data-ttu-id="77795-156">Это полностью открытый исходный код, кросс-платформенный и поддерживаемый корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="77795-156">It is entirely open source, cross platform, and supported by Microsoft.</span></span> <span data-ttu-id="77795-157">Также существует поддерживаемый сообществом [проект коревкф](https://github.com/CoreWCF/CoreWCF) , который официально *не* поддерживается корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="77795-157">There is also a community-supported [CoreWCF project](https://github.com/CoreWCF/CoreWCF) that is *not* officially supported by Microsoft.</span></span>

<span data-ttu-id="77795-158">Дополнительные сведения о переходе с WCF на gRPC см. в книге [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/) .</span><span class="sxs-lookup"><span data-stu-id="77795-158">To learn more about migrating from WCF to gRPC, consult the [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/) ebook.</span></span>

### <a name="remoting"></a><span data-ttu-id="77795-159">Удаленное взаимодействие</span><span class="sxs-lookup"><span data-stu-id="77795-159">Remoting</span></span>

<span data-ttu-id="77795-160">Архитектура удаленного взаимодействия .NET считается проблемной.</span><span class="sxs-lookup"><span data-stu-id="77795-160">.NET Remoting was identified as a problematic architecture.</span></span> <span data-ttu-id="77795-161">Она используется для взаимодействия доменов приложений, которое больше не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="77795-161">It's used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="77795-162">Кроме того, для удаленного взаимодействия требуется поддержка среды выполнения, обслуживание которой дорого обходится.</span><span class="sxs-lookup"><span data-stu-id="77795-162">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="77795-163">По этим причинам удаленное взаимодействие .NET не поддерживается в .NET Core, и группа разработки продукта не планирует добавить поддержку для него в будущем.</span><span class="sxs-lookup"><span data-stu-id="77795-163">For these reasons, .NET Remoting isn't supported on .NET Core, and the product team doesn't plan on adding support for it in the future.</span></span> <span data-ttu-id="77795-164">Существует несколько альтернативных стратегий и реализаций обмена сообщениями, которые можно использовать для замены удаленного взаимодействия в приложениях .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-164">There are several alternative messaging strategies and implementations you can use to replace remoting in your .NET Core apps.</span></span>

### <a name="code-access-security-cas-and-security-transparency"></a><span data-ttu-id="77795-165">Разграничение доступа кода (CAS) и безопасность прозрачности</span><span class="sxs-lookup"><span data-stu-id="77795-165">Code Access Security (CAS) and Security Transparency</span></span>

<span data-ttu-id="77795-166">Ни одна из этих технологий не поддерживается в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="77795-166">Neither of these technologies are supported by .NET Core.</span></span> <span data-ttu-id="77795-167">Вместо этого рекомендуется использовать границы безопасности, предоставляемые операционной системой.</span><span class="sxs-lookup"><span data-stu-id="77795-167">Instead, the recommendation is to use security boundaries provided by the operating system.</span></span> <span data-ttu-id="77795-168">Например, виртуализация, контейнеры или учетные записи пользователей.</span><span class="sxs-lookup"><span data-stu-id="77795-168">For example, virtualization, containers, or user accounts.</span></span> <span data-ttu-id="77795-169">Запускайте процессы с минимальным набором необходимых привилегий.</span><span class="sxs-lookup"><span data-stu-id="77795-169">Run processes with the minimal set of privileges necessary.</span></span>

## <a name="references"></a><span data-ttu-id="77795-170">Ссылки</span><span class="sxs-lookup"><span data-stu-id="77795-170">References</span></span>

[<span data-ttu-id="77795-171">Платформа .NET Framework технологии, недоступные в .NET Core</span><span class="sxs-lookup"><span data-stu-id="77795-171">.NET Framework Technologies Unavailable on .NET Core</span></span>](../../core/porting/net-framework-tech-unavailable.md)

>[!div class="step-by-step"]
><span data-ttu-id="77795-172">[Назад](introduction.md)
>[Вперед](migrate-aspnet-core-2-1.md)</span><span class="sxs-lookup"><span data-stu-id="77795-172">[Previous](introduction.md)
[Next](migrate-aspnet-core-2-1.md)</span></span>
