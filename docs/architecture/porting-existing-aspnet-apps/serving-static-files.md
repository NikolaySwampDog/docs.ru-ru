---
title: Обслуживание статических файлов в ASP.NET MVC и ASP.NET Core
description: В чем заключается Настройка поддержки для обслуживания статических файлов в ASP.NET Core, по сравнению с ASP.NET MVC в службах IIS?
author: ardalis
ms.date: 11/13/2020
ms.openlocfilehash: 02f84a6985835502c24db8cc68db24c8de086b18
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102401702"
---
# <a name="serve-static-files-in-aspnet-mvc-and-aspnet-core"></a><span data-ttu-id="e0786-103">Обслуживание статических файлов в ASP.NET MVC и ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e0786-103">Serve static files in ASP.NET MVC and ASP.NET Core</span></span>

<span data-ttu-id="e0786-104">Большинство веб-приложений используют сочетание логики на стороне сервера и статических файлов, которые должны отправляться клиенту как есть.</span><span class="sxs-lookup"><span data-stu-id="e0786-104">Most web apps involve a combination of server-side logic and static files that must be sent to the client as-is.</span></span> <span data-ttu-id="e0786-105">Как будет осуществляться миграция с ASP.NET MVC на ASP.NET Core обрабатывать статические файлы?</span><span class="sxs-lookup"><span data-stu-id="e0786-105">How should your migration from ASP.NET MVC to ASP.NET Core handle serving static files?</span></span>

## <a name="host-static-files-in-aspnet-mvc"></a><span data-ttu-id="e0786-106">Размещение статических файлов в ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="e0786-106">Host static files in ASP.NET MVC</span></span>

<span data-ttu-id="e0786-107">ASP.NET приложения MVC, размещенные в IIS, обычно размещают статические файлы непосредственно из приложения.</span><span class="sxs-lookup"><span data-stu-id="e0786-107">ASP.NET MVC apps, hosted by IIS, typically host static files directly from the app.</span></span> <span data-ttu-id="e0786-108">ASP.NET MVC поддерживает параллельное размещение статических файлов с файлами, которые должны храниться на сервере в частном порядке.</span><span class="sxs-lookup"><span data-stu-id="e0786-108">ASP.NET MVC supports placing static files side by side with files that should be kept private on the server.</span></span> <span data-ttu-id="e0786-109">Службы IIS и ASP.NET должны явно ограничиваться обработкой определенных файлов или расширений файлов из папки, в которой размещено приложение ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e0786-109">IIS and ASP.NET require explicitly restricting certain files or file extensions from being served from the folder in which an ASP.NET app is hosted.</span></span>

<span data-ttu-id="e0786-110">Для многих статических файлов рекомендуется использовать сеть доставки содержимого (CDN).</span><span class="sxs-lookup"><span data-stu-id="e0786-110">For many static files, using a content delivery network (CDN) is a good practice.</span></span> <span data-ttu-id="e0786-111">[Размещение статического содержимого](/azure/architecture/patterns/static-content-hosting) обеспечивает лучшую производительность при снижении нагрузки и пропускной способности серверов приложений.</span><span class="sxs-lookup"><span data-stu-id="e0786-111">[Static content hosting](/azure/architecture/patterns/static-content-hosting) allows better performance while reducing load and bandwidth from app servers.</span></span>

## <a name="host-static-files-in-aspnet-core"></a><span data-ttu-id="e0786-112">Размещение статических файлов в ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e0786-112">Host static files in ASP.NET Core</span></span>

<span data-ttu-id="e0786-113">Это может быть удивительно, но ASP.NET Core не имеет встроенной поддержки статических файлов.</span><span class="sxs-lookup"><span data-stu-id="e0786-113">It may be surprising, but ASP.NET Core doesn't have built-in support for static files.</span></span> <span data-ttu-id="e0786-114">Эта функция, которая всегда существовала как часть ASP.NET, включенная службами IIS, не является встроенной для ASP.NET Core или его веб-сервера Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e0786-114">This feature that has always existed as just a part of ASP.NET, enabled by IIS, isn't intrinsic to ASP.NET Core or its Kestrel web server.</span></span> <span data-ttu-id="e0786-115">Для обслуживания статических файлов из ASP.NET Core приложения необходимо настроить по [промежуточного слоя статических файлов](/aspnet/core/fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="e0786-115">To serve static files from an ASP.NET Core app, you must configure [static files middleware](/aspnet/core/fundamentals/static-files).</span></span>

<span data-ttu-id="e0786-116">Если настроено по промежуточного слоя статических файлов, ASP.NET Core приложение будет обслуживать все файлы, расположенные в определенной папке (обычно */ввврут*).</span><span class="sxs-lookup"><span data-stu-id="e0786-116">With static files middleware configured, an ASP.NET Core app will serve all files located in a certain folder (typically */wwwroot*).</span></span> <span data-ttu-id="e0786-117">Другие файлы в папке приложения или проекта не подвержены случайному открытию сервером.</span><span class="sxs-lookup"><span data-stu-id="e0786-117">No other files in the app or project folder are at risk of being accidentally exposed by the server.</span></span> <span data-ttu-id="e0786-118">Специальные ограничения, основанные на именах файлов или расширениях, не требуют настройки, как и в случае с IIS.</span><span class="sxs-lookup"><span data-stu-id="e0786-118">No special restrictions based on file names or extensions need to be configured, as is the case with IIS.</span></span> <span data-ttu-id="e0786-119">Вместо этого разработчики явно решили предоставлять файлы в открытом виде, когда они помещаются в папку *wwwroot* .</span><span class="sxs-lookup"><span data-stu-id="e0786-119">Instead, developers explicitly choose to expose files publicly when they place them in the *wwwroot* folder.</span></span> <span data-ttu-id="e0786-120">По умолчанию файлы за пределами этой папки не являются общими.</span><span class="sxs-lookup"><span data-stu-id="e0786-120">By default, files outside of this folder aren't shared.</span></span>

<span data-ttu-id="e0786-121">Поскольку поддержка статических файлов использует по промежуточного слоя, любое другое по промежуточного слоя можно применить как часть одного конвейера запросов.</span><span class="sxs-lookup"><span data-stu-id="e0786-121">Because support for static files uses middleware, any other middleware can be applied as part of the same request pipeline.</span></span> <span data-ttu-id="e0786-122">Примеры по промежуточного слоя включают проверку подлинности, кэширование и сжатие.</span><span class="sxs-lookup"><span data-stu-id="e0786-122">Examples of middleware include authentication, caching, and compression.</span></span>

<span data-ttu-id="e0786-123">Конечно, CDN по-прежнему подходит для ASP.NET Core приложений по тем же причинам, которые используются в приложениях ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="e0786-123">Of course, CDNs remain a good choice for ASP.NET Core apps for all the same reasons they're used in ASP.NET MVC apps.</span></span> <span data-ttu-id="e0786-124">В рамках подготовки к переходу на .NET Core, если есть преимущества, которые приложение может реализовать с помощью CDN, было бы неплохо переместить статические файлы в CDN перед миграцией в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e0786-124">As part of preparing to migrate to .NET Core, if there are benefits your app could realize from using a CDN, it would be good to move static files to a CDN before migrating to .NET Core.</span></span> <span data-ttu-id="e0786-125">Это сокращает общую область работ по миграции для статических ресурсов.</span><span class="sxs-lookup"><span data-stu-id="e0786-125">Doing so reduces the migration effort's overall scope for static assets.</span></span>

## <a name="references"></a><span data-ttu-id="e0786-126">Ссылки</span><span class="sxs-lookup"><span data-stu-id="e0786-126">References</span></span>

- [<span data-ttu-id="e0786-127">Размещение статического содержимого</span><span class="sxs-lookup"><span data-stu-id="e0786-127">Static content hosting</span></span>](/azure/architecture/patterns/static-content-hosting)
- [<span data-ttu-id="e0786-128">Статические файлы в ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e0786-128">Static files in ASP.NET Core</span></span>](/aspnet/core/fundamentals/static-files)

>[!div class="step-by-step"]
><span data-ttu-id="e0786-129">[Назад](hosting-differences.md)
>[Вперед](dependency-injection-differences.md)</span><span class="sxs-lookup"><span data-stu-id="e0786-129">[Previous](hosting-differences.md)
[Next](dependency-injection-differences.md)</span></span>
