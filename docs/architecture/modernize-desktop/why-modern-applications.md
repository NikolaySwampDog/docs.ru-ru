---
title: Причины использования современных классических приложений
description: Узнайте о таких технологиях для настольных ПК, как Windows Forms, WPF и UWP в современном мире.
ms.date: 12/29/2020
ms.openlocfilehash: 8489e41c973bb472a23bca38e9374c36e4cdd366
ms.sourcegitcommit: 05d0087dfca85aac9ca2960f86c5efd218bf833f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "98615897"
---
# <a name="why-modern-desktop-applications"></a>Причины использования современных классических приложений

## <a name="introduction"></a>Введение

### <a name="a-story-of-one-company"></a>История одной компании

В начале 2000-х годов одна интернациональная компания начала разрабатывать распределенное решение для настольных компьютеров, предназначенное для обмена информацией между различными филиалами компании и выполнения оптимизированных операций в централизованных подразделениях. Для разработки приложений была выбрана новая платформа, именуемая Windows Forms (также называемая WinForms). За годы проект превратился в зрелое, хорошо протестированное и проверенное временем приложение с сотнями тысяч строк кода. Прошло время, и платформа .NET Framework 2.0 уже не является передовой технологией. Разработчики, работающие над этим приложением, столкнулись с дилеммой. Они хотят использовать последний стек технологий в своих разработках и придать своему приложению современный вид. В то же время они не хотят отказываться от отличного продукта, который они создавали на протяжении более 15 лет, и переписывать все приложение с нуля.

### <a name="your-story"></a>Ваша история

Вы можете найти себя в похожей ситуации, где у вас есть готовые приложения Windows Forms или Windows Presentation Foundation (WPF), которые доказали свою надежность с течением времени. Вы, вероятно, хотите использовать эти приложения еще много лет. В то же время, поскольку эти приложения были написаны некоторое время назад, у них могут отсутствовать такие возможности, как современный внешний вид, производительность, интеграция с новыми устройствами и функциями платформы и т. д., так что они производят впечатление "старых". Есть и другая проблема, которая может касаться вас как разработчика. Работая с более старыми версиями платформы .NET Framework и обслуживая приложения, написанные достаточно давно, вы, возможно, не изучаете новые технологии, так что ваши технические навыки устаревают. Если это сказано о вас, — то и эта книга предназначена для вас!

## <a name="desktop-applications-nowadays"></a>Классические приложения в наше время

До эпохи Интернета классические приложения для настольных ПК были основным подходом к созданию программных систем. Разработчики могли выбрать любой язык программирования, например COBOL, Fortran, VB6 или C++. Но разрабатывали ли они небольшие средства или сложные распределенные архитектуры, — все это были приложения для настольных ПК.

Затем технологии Интернета начали перекраивать весь мир разработки и притягивать все больше разработчиков за счет таких преимуществ, как простое развертывание и упрощенные процессы распространения. Тот факт, что после развертывания веб-приложения в рабочей среде все пользователи получали автоматические обновления, оказал огромное влияние на гибкость программного обеспечения.

Однако инфраструктура Интернета, базовые протоколы и стандарты, такие как HTTP и HTML, не предназначены для создания сложных приложений. В реальности усилия разработчиков были тогда направлены на одну цель: предоставить веб-приложениям те же возможности, что и классическим приложениям, включая быстрый ввод данных и управление состоянием.

Несмотря на невероятные темпы роста веб-приложений и мобильных приложений, для некоторых задач классические приложения по-прежнему остаются на первом месте с точки зрения эффективности и производительности. Это объясняет, почему существуют миллионы разработчиков, создающих проекты с помощью WPF и WinForms, и объем создаваемых ими приложений постоянно растет.

Ниже приведены некоторые причины для выбора разработки классических приложений для настольных ПК:

- Классические приложения лучше взаимодействуют с ПК пользователя.
- Производительность таких приложений при сложных вычислениях значительно выше, чем производительность веб-приложений.
- Выполнение пользовательской логики на стороне клиента возможно, но намного сложнее при использовании веб-приложений.
- Использование многопоточности проще и эффективнее в классическом приложении.
- Обучение разработке пользовательских интерфейсов можно выполнить быстро. И в случае WinForms оно интуитивно, с тем же интерфейсом на основе перетаскивания, что и в конструкторе Windows Forms.
- Вы можете легко начать программировать и тестировать алгоритмы без необходимости настраивать серверную инфраструктуру и не заботясь о проблемах подключения, брандмауэрах и совместимости с браузерами.
- Отладка является мощным средством по сравнению с веб-отладкой.
- Доступ к аппаратным устройствам, таким как камера, Bluetooth или устройства чтения карт, очень прост.
- Так как технология уже не нова, существует множество экспертов по ней и база знаний, доступная для разработки настольных приложений.

Как видите, разработка для настольных систем — отличное решение по многим причинам. Технология проверена временем, а цикл разработки быстр. Отладка эффективна, и, возможно, настольные приложения проще, так что работу с ними легче начать.

С течением времени корпорация Майкрософт предложила многие технологии пользовательского интерфейса для настольных систем, от Win32, представленной в 1995 г., до универсальной платформы Windows (UWP), выпущенной в 2016 г.

![Технологии для настольных систем Майкрософт](./media/why-modern-applications/microsoft-desktop-technologies.png)

В соответствии с опросом, опубликованным Telerik в апреле 2016 г., наиболее популярными технологиями для создания классических приложений Windows являются Windows Forms, WPF и UWP.

![Опрос Telerik, демонстрирующий Windows Forms, WPF и UWP в качестве наиболее популярных технологий для настольных систем](./media/why-modern-applications/telerik-survey.png)

Вы можете вести разработку и там, и там, используя C# и Visual Basic, но давайте рассмотрим это поближе.

### <a name="windows-forms"></a>Windows Forms

Впервые выпущенная в 2002 году, Windows Forms является управляемой платформой и самой старой, наиболее часто используемой технологией для настольных программ, основанной на подсистеме интерфейса графических устройств Windows (GDI). Она предлагает гладкое перетаскивание для разработки пользовательских интерфейсов в Visual Studio.  В то же время Windows Forms полагается на конструктор Visual Studio в качестве основного способа разработки пользовательского интерфейса, поэтому создание визуальных компонентов из кода в ней нетривиально.

В следующем списке перечислены основные характеристики Windows Forms:

- Развитая технология с множеством примеров кода и документации.
- Мощный и продуктивный конструктор. Не так удобно проектировать пользовательский интерфейс "из кода".
- Простота и интуитивная понятность благодаря возможности перетаскивания в конструкторе.
- Поддерживается в любой версии Windows.
- Поддерживается в .NET Core 3.0 и более поздних версиях.

### <a name="wpf"></a>WPF

Основываясь на спецификации языка XAML, WPF отдает предпочтение четкому разделению между пользовательским интерфейсом и кодом. XAML предлагает такие возможности, как создание шаблонов, стилей и привязок, которые подходят для создания больших приложений. Как и Windows Forms, это управляемая платформа, но проекты здесь модульные и пригодные для многократного использования.

Вот основные особенности WPF.

- Устоявшаяся технология
- Конструктор доступен, но разработчики обычно предпочитают создавать проекты на основе кода с помощью декларативного XAML.
- Обучение сложнее, чем в Windows Forms.
- Поддерживается в любой версии Windows.
- Поддерживается в .NET Core 3.0 и более поздних версиях.

### <a name="uwp"></a>UWP

UWP — это не только платформа представления, такая как WPF и Windows Forms, но и сама платформа. Эта платформа содержит:

- Собственный набор API (API среды выполнения Windows).
- Новую систему развертывания (MSIX).
- Современную модель жизненного цикла приложений (с низким энергопотреблением).
- Новую систему управления ресурсами (на основе PRI-файлов).

Эта платформа была создана для поддержки всех типов систем ввода (например, рукописного ввода, сенсорного экрана, джойстика, мыши, клавиатуры, взгляда и т. д.) во всех форм-факторах с учетом производительности и низкого энергопотребления. По этим причинам оболочка ОС Windows 10 использует части платформы UWP.

![Структура UWP](./media/why-modern-applications/uwp-structure.png)

UWP содержит платформу представления, основанную на XAML, похожую на WPF, но имеющую некоторые важные отличия, такие как:

- Приложения выполняются в контейнерах приложений. Контейнеры приложений управляют ресурсами, к которым может получить доступ приложение UWP.
- Поддерживается только в Windows 10.
- Приложения можно развертывать с помощью Microsoft Store для упрощения развертывания.
- Разработана как часть API среды выполнения Windows API.
- Содержит обширный набор полнофункциональных встроенных элементов управления и дополнительные элементы управления, доступные через пакеты NuGet библиотеки Microsoft UI (библиотека WinUI), обновляемые каждые несколько месяцев.

## <a name="a-tale-of-two-platforms"></a>История двух платформ

В течение последних 20 лет, в то время как технологии пользовательского интерфейса для настольных систем совершенствовались на их пути от Windows Forms к UWP, оборудование также развивалось от тяжелых системных блоков с небольшими ЭЛТ-мониторами до мониторов с высоким разрешением и легких планшетов и телефонов с различными методами ввода данных, такими как сенсорный экран и рукописный ввод. Эти изменения привели к созданию двух различных концепций: классического приложения и современного приложения. Современное приложение — это программа, которая учитывает различные форм-факторы устройств, разнообразные методы ввода-вывода и использует современные функции настольных систем при работе в изолированной модели выполнения. Классическое приложение (оно же приложение для настольных систем), с другой стороны, является приложением, которому необходим надежный интерфейс пользователя с высокой плотностью элементов управления, который лучше использовать с мышью и клавиатурой.

В следующей таблице показаны различия между этими двумя концепциями:

|   | Современное приложение | Классическое приложение |
| --- | --- | --- |
| Безопасность | Вложенное исполнение &amp; отличные основы. Разработано с нуля, чтобы учитывать конфиденциальность пользователя, управлять временем работы батареи и уделять все внимание обеспечению безопасности устройства.  | Пользователь &amp; уровень безопасности администратора. У вас есть собственный доступ к папкам реестра и жесткому диску. |
| Развертывание | Установка и обновления управляются платформой.   | MSI, пользовательские установщики &amp; обновления. Традиционный источник головной боли для разработчиков и ИТ-управленцев.  |
| Distribution | Доверенное распространение &amp; подписанные пакеты. Распространение выполняется из надежного источника, а не из Интернета.  | Сеть, SCCM &amp; пользовательское распространение. Отсутствие контроля над тем, что, как установлено, влияет на весь компьютер.   |
| Пользовательский интерфейс | Современный пользовательский интерфейс. Различные механизмы ввода, рукописный ввод, касание, джойстик, клавиатура, мышь и т. д.  | Windows Forms, WPF, MFC. Предназначен для работы с мышью и клавиатурой для обеспечения плотного пользовательского интерфейса и получения максимальной производительности от рабочего стола.  |
| Данные | Первые облачные данные с аналитическими сведениями. Источник истины в облаке. Аналитические сведения о том, что происходит с вашим приложением и как оно работает.  | Локальные данные. Для классических приложений обычно требуются какие-то локальные данные.  |
| Конструирование | Для использования различными способами. Предусмотрено использование на различных платформах, внешних интерфейсах и серверных системах, с задействованием ресурсов в как можно большем числе мест.  | Предназначено только для настольных ПК Windows.  |

В рамках стремления предоставлять разработчикам лучшие средства для создания приложений корпорация Майкрософт прилагает большие усилия по сближению эти концепций, или, можно даже сказать, платформ, чтобы предоставить разработчикам лучшие элементы обеих. Для этого корпорация Майкрософт ведет двустороннюю деятельность между двумя платформами.

![Двусторонняя работа между современными приложениями и классическими приложениями](./media/why-modern-applications/bidirectional-effort.png)

1. Перенос сценариев для классических приложений на платформу современных приложений. Разработка классических приложений по-прежнему популярна, так как они эффективны в некоторых сценариях. Имеет смысл брать эти распространенные сценарии рабочего стола и переводить их на современную платформу для настольных систем, чтобы расширить возможности платформы.

    ![Перенос сценариев для классических приложений на платформу современных приложений](./media/why-modern-applications/desktop-to-modern.png)

1. Перенос функций современных приложений в классические приложения. В случае классических приложений, которым требуется способ использования современных возможностей без создания приложения с нуля, функции современных приложений помещаются в классическое приложение.

    ![Перенос функций современных приложений в классические приложения](./media/why-modern-applications/modern-to-desktop.png)

В этой книге мы сосредоточимся на втором и покажем, как можно модернизировать существующие классические приложения.

## <a name="paths-to-modernization"></a>Пути к модернизации

Структура этого руководства содержит три различные оси для выполнения модернизации: современные функции, развертывание и установка.

### <a name="modern-features"></a>Современные функции

Предположим, у вас есть рабочее приложение Windows Forms, используемое торговыми представителями компании для заполнения заказа клиента. Новое требование состоит в том, чтобы позволить клиенту подписывать заказ с помощью пера планшета. Рукописный ввод встроен в современные операционные системы и технологии, но он был недоступен при разработке приложения.

Этот путь покажет вам, как можно использовать современные функции для настольных систем в существующих разработках для настольных систем.

### <a name="deployment"></a>Развертывание

Современные циклы разработки нацелены на обеспечение гибкости при развертывании новых версий приложений для каждого отдельного пользователя. Поскольку Windows Forms и приложения WPF основаны на определенной версии платформы .NET Framework, которая должна присутствовать на компьютере, они не могут воспользоваться преимуществами новых функций платформы .NET Framework версии без вмешательства ИТ-специалистов и с риском наличия побочных эффектов для других приложений, работающих на том же компьютере. Это ограничило темп инноваций для разработчиков, заставляя их придерживаться устаревших версий платформы .NET Framework.

С момента запуска .NET Core 3.0 можно использовать новый подход, с развертыванием нескольких версий .NET параллельно и указанием, на какую из версий .NET должно быть ориентировано каждое приложение. Таким образом, вы можете использовать новейшие функции в одном приложении, не опасаясь нарушить работу других приложений.

### <a name="installation"></a>Установка

Настольные приложения всегда полагаются на процесс установки, прежде чем пользователь сможет приступить к их использованию. Этот факт позволяет использовать набор технологий, от MSI и ClickOnce до пользовательских установщиков или даже развертывания с помощью XCOPY. Все эти методы сталкиваются с проблемами, требующими аккуратности, так как приложениям требуется способ доступа к общим ресурсам на компьютере. Иногда установке требуется доступ к реестру для вставки или обновления новых значений ключей, иногда для обновления общих библиотек DLL, на которые ссылается основное приложение. Такое поведение создает непрерывную головную боль для пользователей и порождает впечатление, что после установки какого-либо приложения компьютер уже не вернется в исходное состояние, даже если потом его удалить.

В этой книге мы представим новый способ установки приложений с помощью MSIX, который решает проблему, описанную выше. Вы узнаете, как можно без труда настроить упаковку, установку и обновления для приложения.

>[!div class="step-by-step"]
>[Назад](index.md)
>[Вперед](whats-new-dotnet.md)
