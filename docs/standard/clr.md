---
title: Обзор среды CLR — .NET
titleSuffix: ''
description: Приступая к работе со средой CLR, средой выполнения .NET. Среда CLR выполняет код и предоставляет службы для упрощения процесса разработки.
ms.date: 10/22/2020
helpviewer_keywords:
- compiling source code, runtime functionality
- code, execution
- managed data
- runtime
- common language runtime
- metadata, runtime functionality
- .NET, common language runtime
- language compilers
- managed code
- source code execution
- code, runtime functionality
ms.assetid: 059a624e-f7db-4134-ba9f-08b676050482
ms.custom: updateeachrelease
ms.openlocfilehash: 89aa77f7704a1d8caba12369cb82fff131a8aab0
ms.sourcegitcommit: 42d436ebc2a7ee02fc1848c7742bc7d80e13fc2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102103651"
---
# <a name="common-language-runtime-clr-overview"></a><span data-ttu-id="c2265-104">Обзор среды CLR</span><span class="sxs-lookup"><span data-stu-id="c2265-104">Common Language Runtime (CLR) overview</span></span>

<span data-ttu-id="c2265-105">.NET предоставляет среду выполнения (среду CLR), которая выполняет код и предлагает службы, облегчающие процесс разработки.</span><span class="sxs-lookup"><span data-stu-id="c2265-105">.NET provides a run-time environment, called the common language runtime, that runs the code and provides services that make the development process easier.</span></span>

<span data-ttu-id="c2265-106">Компиляторы и иные средства позволяют использовать функции среды CLR и дают разработчикам возможность писать код, использующий преимущества этой среды управляемого выполнения.</span><span class="sxs-lookup"><span data-stu-id="c2265-106">Compilers and tools expose the common language runtime's functionality and enable you to write code that benefits from this managed execution environment.</span></span> <span data-ttu-id="c2265-107">Код, разработанный с использованием языкового компилятора для среды выполнения, называют управляемым.</span><span class="sxs-lookup"><span data-stu-id="c2265-107">Code that you develop with a language compiler that targets the runtime is called managed code.</span></span> <span data-ttu-id="c2265-108">В нем используются преимущества таких средств, как объединение языков программирования, объединенная обработка исключений, усиленная безопасность, поддержка отслеживания версий и развертывания, упрощенная модель взаимодействия компонентов, а также службы отладки и профилирования.</span><span class="sxs-lookup"><span data-stu-id="c2265-108">Managed code benefits from features such as cross-language integration, cross-language exception handling, enhanced security, versioning and deployment support, a simplified model for component interaction, and debugging and profiling services.</span></span>

> [!NOTE]
> <span data-ttu-id="c2265-109">Компиляторы и средства могут создавать выходные данные для общеязыковой среды выполнения (CLR), поскольку система типов, формат метаданных и среда выполнения (виртуальная система выполнения) определяются открытым стандартом — спецификацией общеязыковой инфраструктуры ECMA.</span><span class="sxs-lookup"><span data-stu-id="c2265-109">Compilers and tools are able to produce output that the common language runtime can consume because the type system, the format of metadata, and the run-time environment (the virtual execution system) are all defined by a public standard, the ECMA Common Language Infrastructure specification.</span></span> <span data-ttu-id="c2265-110">Дополнительные сведения см. в разделе [Спецификации ECMA для C# и инфраструктуры Common Language Infrastructure (CLI)](https://visualstudio.microsoft.com/license-terms/ecma-c-common-language-infrastructure-standards/).</span><span class="sxs-lookup"><span data-stu-id="c2265-110">For more information, see [ECMA C# and Common Language Infrastructure Specifications](https://visualstudio.microsoft.com/license-terms/ecma-c-common-language-infrastructure-standards/).</span></span>

<span data-ttu-id="c2265-111">Чтобы включить в среде выполнения предоставление служб управляемому коду, языковые компиляторы должны предоставлять метаданные с описанием типов, членов и ссылок в коде.</span><span class="sxs-lookup"><span data-stu-id="c2265-111">To enable the runtime to provide services to managed code, language compilers must emit metadata that describes the types, members, and references in your code.</span></span> <span data-ttu-id="c2265-112">Метаданные хранятся вместе с кодом. Они содержатся в каждом загружаемом переносимом исполняемом (PE) файле среды CLR.</span><span class="sxs-lookup"><span data-stu-id="c2265-112">Metadata is stored with the code; every loadable common language runtime portable executable (PE) file contains metadata.</span></span> <span data-ttu-id="c2265-113">Метаданные в среде выполнения используются для поиска и загрузки классов, размещения экземпляров в памяти, разрешения имен при вызове методов, создания машинного кода, обеспечения безопасности и установки границ контекста времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="c2265-113">The runtime uses metadata to locate and load classes, lay out instances in memory, resolve method invocations, generate native code, enforce security, and set run-time context boundaries.</span></span>

<span data-ttu-id="c2265-114">Среда выполнения обеспечивает автоматическое размещение объектов и управление ссылками на них, а также освобождение объектов, когда они больше не используются.</span><span class="sxs-lookup"><span data-stu-id="c2265-114">The runtime automatically handles object layout and manages references to objects, releasing them when they are no longer being used.</span></span> <span data-ttu-id="c2265-115">Объекты, время жизни которых управляется подобным образом, называются управляемыми данными.</span><span class="sxs-lookup"><span data-stu-id="c2265-115">Objects whose lifetimes are managed in this way are called managed data.</span></span> <span data-ttu-id="c2265-116">Сборка мусора исключает утечку памяти и некоторые другие часто возникающие ошибки программирования.</span><span class="sxs-lookup"><span data-stu-id="c2265-116">Garbage collection eliminates memory leaks as well as some other common programming errors.</span></span> <span data-ttu-id="c2265-117">Если код является управляемым, в приложении .NET можно использовать управляемые данные, неуправляемые данные или управляемые и неуправляемые данные одновременно.</span><span class="sxs-lookup"><span data-stu-id="c2265-117">If your code is managed, you can use managed data, unmanaged data, or both managed and unmanaged data in your .NET application.</span></span> <span data-ttu-id="c2265-118">Поскольку языковые компиляторы поставляют собственные типы, например, простые типы, пользователь может не знать (и не иметь такой необходимости), являются ли данные управляемыми.</span><span class="sxs-lookup"><span data-stu-id="c2265-118">Because language compilers supply their own types, such as primitive types, you might not always know (or need to know) whether your data is being managed.</span></span>

<span data-ttu-id="c2265-119">Среда CLR упрощает разработку компонентов и приложений, объекты которых могут работать в разных языках.</span><span class="sxs-lookup"><span data-stu-id="c2265-119">The common language runtime makes it easy to design components and applications whose objects interact across languages.</span></span> <span data-ttu-id="c2265-120">Объекты, написанные на разных языках, могут взаимодействовать друг с другом, а их поведение может быть тесно интегрировано.</span><span class="sxs-lookup"><span data-stu-id="c2265-120">Objects written in different languages can communicate with each other, and their behaviors can be tightly integrated.</span></span> <span data-ttu-id="c2265-121">Например, разработчик может определить класс, а затем на другом языке создать производный от него класс или вызвать метод из исходного класса.</span><span class="sxs-lookup"><span data-stu-id="c2265-121">For example, you can define a class and then use a different language to derive a class from your original class or call a method on the original class.</span></span> <span data-ttu-id="c2265-122">Можно также передать экземпляр класса в метод класса, написанного на другом языке.</span><span class="sxs-lookup"><span data-stu-id="c2265-122">You can also pass an instance of a class to a method of a class written in a different language.</span></span> <span data-ttu-id="c2265-123">Такая интеграция языков программирования возможна в силу того, что языковые компиляторы и программы, которые обращаются к среде выполнения, используют систему общих типов, определенную средой выполнения, и следуют правилам среды выполнения при определении новых типов, а также при создании, использовании, сохранении и привязки к типам.</span><span class="sxs-lookup"><span data-stu-id="c2265-123">This cross-language integration is possible because language compilers and tools that target the runtime use a common type system defined by the runtime, and they follow the runtime's rules for defining new types, as well as for creating, using, persisting, and binding to types.</span></span>

<span data-ttu-id="c2265-124">В составе своих метаданных все управляемые компоненты содержат сведения о компонентах и ресурсах, на базе которых они построены.</span><span class="sxs-lookup"><span data-stu-id="c2265-124">As part of their metadata, all managed components carry information about the components and resources they were built against.</span></span> <span data-ttu-id="c2265-125">Среда выполнения использует эти сведения, чтобы обеспечить наличие всех необходимых ресурсов для компонента или приложения. Это снижает вероятность сбоев кода из-за каких-либо неудовлетворенных зависимостей.</span><span class="sxs-lookup"><span data-stu-id="c2265-125">The runtime uses this information to ensure that your component or application has the specified versions of everything it needs, which makes your code less likely to break because of some unmet dependency.</span></span> <span data-ttu-id="c2265-126">Сведения о регистрации и данные о состоянии больше не сохраняются в реестре, где их трудно задавать и поддерживать.</span><span class="sxs-lookup"><span data-stu-id="c2265-126">Registration information and state data are no longer stored in the registry where they can be difficult to establish and maintain.</span></span> <span data-ttu-id="c2265-127">Вместо этого сведения об определяемых разработчиком типах (и их зависимостях) сохраняются вместе с кодом в виде метаданных, что существенно упрощает репликацию и удаление компонентов.</span><span class="sxs-lookup"><span data-stu-id="c2265-127">Instead, information about the types you define (and their dependencies) is stored with the code as metadata, making the tasks of component replication and removal much less complicated.</span></span>

<span data-ttu-id="c2265-128">Языковые компиляторы и программы предоставляют функции среды выполнения так, чтобы они были полезны и интуитивно понятны для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="c2265-128">Language compilers and tools expose the runtime's functionality in ways that are intended to be useful and intuitive to developers.</span></span> <span data-ttu-id="c2265-129">Это означает, что некоторые средства среды выполнения могут быть заметными в одной среде больше, чем в другой.</span><span class="sxs-lookup"><span data-stu-id="c2265-129">This means that some features of the runtime might be more noticeable in one environment than in another.</span></span> <span data-ttu-id="c2265-130">Характеристики среды выполнения зависят от используемых языковых компиляторов и программ.</span><span class="sxs-lookup"><span data-stu-id="c2265-130">How you experience the runtime depends on which language compilers or tools you use.</span></span> <span data-ttu-id="c2265-131">Например, разработчик Visual Basic при работе со средой CLR может заметить, что язык Visual Basic имеет больше средств объектно-ориентированного программирования, чем раньше.</span><span class="sxs-lookup"><span data-stu-id="c2265-131">For example, if you are a Visual Basic developer, you might notice that with the common language runtime, the Visual Basic language has more object-oriented features than before.</span></span> <span data-ttu-id="c2265-132">Среда выполнения предоставляет следующие преимущества:</span><span class="sxs-lookup"><span data-stu-id="c2265-132">The runtime provides the following benefits:</span></span>

- <span data-ttu-id="c2265-133">повышение производительности;</span><span class="sxs-lookup"><span data-stu-id="c2265-133">Performance improvements.</span></span>

- <span data-ttu-id="c2265-134">возможность легко использовать компоненты, разработанные на других языках;</span><span class="sxs-lookup"><span data-stu-id="c2265-134">The ability to easily use components developed in other languages.</span></span>

- <span data-ttu-id="c2265-135">расширяемые типы, предоставляемые библиотекой классов;</span><span class="sxs-lookup"><span data-stu-id="c2265-135">Extensible types provided by a class library.</span></span>

- <span data-ttu-id="c2265-136">языковые возможности (например, наследование, интерфейсы и перегрузку) для объектно-ориентированного программирования;</span><span class="sxs-lookup"><span data-stu-id="c2265-136">Language features such as inheritance, interfaces, and overloading for object-oriented programming.</span></span>

- <span data-ttu-id="c2265-137">поддержку явной свободной потоковой обработки, позволяющую создавать масштабируемые многопотоковые приложения;</span><span class="sxs-lookup"><span data-stu-id="c2265-137">Support for explicit free threading that allows creation of multithreaded, scalable applications.</span></span>

- <span data-ttu-id="c2265-138">поддержку структурированной обработки исключений;</span><span class="sxs-lookup"><span data-stu-id="c2265-138">Support for structured exception handling.</span></span>

- <span data-ttu-id="c2265-139">поддержку настраиваемых атрибутов;</span><span class="sxs-lookup"><span data-stu-id="c2265-139">Support for custom attributes.</span></span>

- <span data-ttu-id="c2265-140">сборка мусора;</span><span class="sxs-lookup"><span data-stu-id="c2265-140">Garbage collection.</span></span>

- <span data-ttu-id="c2265-141">использование делегатов вместо указателей на функции для повышения типобезопасности и уровня защиты.</span><span class="sxs-lookup"><span data-stu-id="c2265-141">Use of delegates instead of function pointers for increased type safety and security.</span></span> <span data-ttu-id="c2265-142">Подробнее о делегатах см. в разделе [Система общих типов CTS](base-types/common-type-system.md).</span><span class="sxs-lookup"><span data-stu-id="c2265-142">For more information about delegates, see [Common Type System](base-types/common-type-system.md).</span></span>

## <a name="clr-versions"></a><span data-ttu-id="c2265-143">Версии CLR</span><span class="sxs-lookup"><span data-stu-id="c2265-143">CLR versions</span></span>

<span data-ttu-id="c2265-144">Выпуски .NET Core и .NET 5 или более поздней версии имеют одну версию продукта, т. е. не существует отдельной версии среды CLR.</span><span class="sxs-lookup"><span data-stu-id="c2265-144">.NET Core and .NET 5+ releases have a single product version, that is, there is no separate CLR version.</span></span> <span data-ttu-id="c2265-145">Список версий .NET Core см. в разделе [Загрузка .NET Core](https://dotnet.microsoft.com/download/dotnet).</span><span class="sxs-lookup"><span data-stu-id="c2265-145">For a list of .NET Core versions, see [Download .NET Core](https://dotnet.microsoft.com/download/dotnet).</span></span>

<span data-ttu-id="c2265-146">Однако номер версии платформы .NET Framework не всегда соответствует номеру версии среды CLR, которую он содержит.</span><span class="sxs-lookup"><span data-stu-id="c2265-146">However, the .NET Framework version number doesn't necessarily correspond to the version number of the CLR it includes.</span></span> <span data-ttu-id="c2265-147">Список версий .NET Framework и соответствующих версий среды CLR см. в разделе [Версии и зависимости платформы .NET Framework](../framework/migration-guide/versions-and-dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="c2265-147">For a list of .NET Framework versions and their corresponding CLR versions, see [.NET Framework versions and dependencies](../framework/migration-guide/versions-and-dependencies.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="c2265-148">См. также</span><span class="sxs-lookup"><span data-stu-id="c2265-148">Related topics</span></span>

|<span data-ttu-id="c2265-149">Заголовок</span><span class="sxs-lookup"><span data-stu-id="c2265-149">Title</span></span>|<span data-ttu-id="c2265-150">Описание</span><span class="sxs-lookup"><span data-stu-id="c2265-150">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="c2265-151">Процесс управляемого выполнения</span><span class="sxs-lookup"><span data-stu-id="c2265-151">Managed Execution Process</span></span>](managed-execution-process.md)|<span data-ttu-id="c2265-152">Описание шагов, необходимых для использования преимуществ общеязыковой среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="c2265-152">Describes the steps required to take advantage of the common language runtime.</span></span>|
|[<span data-ttu-id="c2265-153">Автоматическое управление памятью</span><span class="sxs-lookup"><span data-stu-id="c2265-153">Automatic Memory Management</span></span>](automatic-memory-management.md)|<span data-ttu-id="c2265-154">Описание выделения и освобождения памяти сборщиком мусора.</span><span class="sxs-lookup"><span data-stu-id="c2265-154">Describes how the garbage collector allocates and releases memory.</span></span>|
|[<span data-ttu-id="c2265-155">Общие сведения о платформе .NET</span><span class="sxs-lookup"><span data-stu-id="c2265-155">Overview of .NET Framework</span></span>](../framework/get-started/overview.md)|<span data-ttu-id="c2265-156">Описание ключевых понятий платформы .NET Framework: системы общих типов CTS, межъязыкового взаимодействия, управляемого выполнения, доменов приложений и сборок.</span><span class="sxs-lookup"><span data-stu-id="c2265-156">Describes key .NET Framework concepts, such as the common type system, cross-language interoperability, managed execution, application domains, and assemblies.</span></span>|
|[<span data-ttu-id="c2265-157">Система общих типов CTS</span><span class="sxs-lookup"><span data-stu-id="c2265-157">Common Type System</span></span>](./base-types/common-type-system.md)|<span data-ttu-id="c2265-158">Описание того, как типы объявляются, используются и контролируются в среде выполнения в рамках поддержки межъязыковой интеграции.</span><span class="sxs-lookup"><span data-stu-id="c2265-158">Describes how types are declared, used, and managed in the runtime in support of cross-language integration.</span></span>|
