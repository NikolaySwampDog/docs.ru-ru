---
title: Символы в .NET
description: Общие сведения о символах и переносимых файлах PDB в .NET
ms.date: 02/08/2021
ms.openlocfilehash: 8f217bf8b62ff12a6ea1dc6a5b14b34d8037dd2d
ms.sourcegitcommit: 20b4565974d185c7716656a6c63e3cfdbdf4bf41
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "104759902"
---
# <a name="symbols"></a><span data-ttu-id="1d79c-103">Символы</span><span class="sxs-lookup"><span data-stu-id="1d79c-103">Symbols</span></span>

<span data-ttu-id="1d79c-104">Символы полезны при отладке и в других диагностических средствах.</span><span class="sxs-lookup"><span data-stu-id="1d79c-104">Symbols are useful for debugging and other diagnostic tools.</span></span> <span data-ttu-id="1d79c-105">Файлы символов будут иметь разное содержимое в зависимости от языка, компилятора и платформы.</span><span class="sxs-lookup"><span data-stu-id="1d79c-105">The contents of symbol files vary between languages, compilers, and platforms.</span></span> <span data-ttu-id="1d79c-106">Если рассматривать их на высоком уровне, символы представляют собой сопоставление между исходным кодом и двоичным кодом, который создается компилятором.</span><span class="sxs-lookup"><span data-stu-id="1d79c-106">At a very high level symbols are a mapping between the source code and the binary produced by the compiler.</span></span> <span data-ttu-id="1d79c-107">Эти сопоставления используются такими инструментами, как [Visual Studio](/visualstudio/debugger/what-is-debugging), и [Visual Studio Code](https://code.visualstudio.com/Docs/editor/debugging) для разрешения номеров строк исходного кода или имен локальных переменных.</span><span class="sxs-lookup"><span data-stu-id="1d79c-107">These mappings are used by tools like [Visual Studio](/visualstudio/debugger/what-is-debugging) and [Visual Studio Code](https://code.visualstudio.com/Docs/editor/debugging) to resolve source line number information or local variable names.</span></span>

<span data-ttu-id="1d79c-108">[Документация по Windows по символам](/windows/win32/dxtecharts/debugging-with-symbols) содержит более подробную информацию о символах для Windows, хотя многие из концепций также применимы и к другим платформам.</span><span class="sxs-lookup"><span data-stu-id="1d79c-108">The [Windows documentation on symbols](/windows/win32/dxtecharts/debugging-with-symbols) contain more detailed information on symbols for Windows, although many of the concepts apply to other platforms as well.</span></span>

## <a name="learn-about-nets-portable-pdb-format"></a><span data-ttu-id="1d79c-109">Формат переносимого PDB-файла в .NET</span><span class="sxs-lookup"><span data-stu-id="1d79c-109">Learn about .NET's Portable PDB format</span></span>

<span data-ttu-id="1d79c-110">В .NET Core появился новый формат файлов символов (PDB) — переносимый PDB-файл.</span><span class="sxs-lookup"><span data-stu-id="1d79c-110">.NET Core introduces a new symbol file (PDB) format - the portable PDB.</span></span> <span data-ttu-id="1d79c-111">В отличие от традиционных PDB, которые предназначены только для Windows, переносимые PDB-файлы можно создавать и читать на всех платформах.</span><span class="sxs-lookup"><span data-stu-id="1d79c-111">Unlike traditional PDBs which are Windows-only, portable PDBs can be created and read on all platforms.</span></span>

### <a name="what-is-a-pdb"></a><span data-ttu-id="1d79c-112">Что такое PDB-файл?</span><span class="sxs-lookup"><span data-stu-id="1d79c-112">What is a PDB?</span></span>

<span data-ttu-id="1d79c-113">PDB-файл — это вспомогательный файл, создаваемый компилятором для предоставления другим средствам, особенно отладчикам, сведений о том, что находится в основном исполняемом файле и как он был создан.</span><span class="sxs-lookup"><span data-stu-id="1d79c-113">A PDB file is an auxiliary file produced by a compiler to provide other tools, especially debuggers, information about what is in the main executable file and how it was produced.</span></span> <span data-ttu-id="1d79c-114">Например, отладчик считывает PDB-файл для сопоставления строки 12 в файле foo.cs правильному расположению в исполняемом файле, чтобы можно было установить точку останова.</span><span class="sxs-lookup"><span data-stu-id="1d79c-114">For example, a debugger reads a PDB to map foo.cs line 12 to the right executable location so that it can set a breakpoint.</span></span> <span data-ttu-id="1d79c-115">Формат файлов PDB для Windows существует уже давно, и он развился из других собственных форматов символов отладки, которые появились еще раньше.</span><span class="sxs-lookup"><span data-stu-id="1d79c-115">The Windows PDB format has been around a long time, and it evolved from other native debugging symbol formats which were even older.</span></span> <span data-ttu-id="1d79c-116">Он появился в виде формата для собственных программ (C/C++).</span><span class="sxs-lookup"><span data-stu-id="1d79c-116">It started out its life as a format for native (C/C++) programs.</span></span> <span data-ttu-id="1d79c-117">После первого выпуска платформы .NET Framework формат Windows PDB был расширен для поддержки .NET.</span><span class="sxs-lookup"><span data-stu-id="1d79c-117">For the first release of the .NET Framework, the Windows PDB format was extended to support .NET.</span></span>

## <a name="use-the-correct-pdb-format-for-your-scenario"></a><span data-ttu-id="1d79c-118">Использование правильного формата PDB в конкретном сценарии</span><span class="sxs-lookup"><span data-stu-id="1d79c-118">Use the correct PDB format for your scenario</span></span>

<span data-ttu-id="1d79c-119">Ни переносимые PDB-файлы, ни PDB-файлы для Windows не поддерживаются всюду, поэтому необходимо подумать о том, где предполагается использовать и выполнять отладку проекта, чтобы решить, какой формат использовать.</span><span class="sxs-lookup"><span data-stu-id="1d79c-119">Neither portable PDBs nor Windows PDBs are supported everywhere, so you need to consider where your project will want to be used and debugged to decide which format to use.</span></span> <span data-ttu-id="1d79c-120">Если у вас есть проект, который вы хотите использовать и выполнять его отладку в обоих форматах, можно использовать разные конфигурации сборки и дважды собрать проект для поддержки обоих типов потребителей.</span><span class="sxs-lookup"><span data-stu-id="1d79c-120">If you have a project that you want to be able to use and debug in both formats, you can use different build configurations and build the project twice to support both types of consumer.</span></span>

### <a name="support-for-portable-pdbs"></a><span data-ttu-id="1d79c-121">Поддержка переносимых PDB-файлов</span><span class="sxs-lookup"><span data-stu-id="1d79c-121">Support for Portable PDBs</span></span>

<span data-ttu-id="1d79c-122">Переносимые PDB-файлы могут быть прочитаны в любой операционной системе. Этот формат символов является рекомендуемым для управляемого кода, но существует ряд устаревших средств и приложений, которые не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="1d79c-122">Portable PDBs can be read on any operating systems and is the recommended symbol format for managed code, but there are a number of legacy tools and applications where they aren't supported:</span></span>

* <span data-ttu-id="1d79c-123">Приложения, предназначенные для платформы .NET Framework 4.7.1 или более ранней версии: печать трассировок стека с обратным сопоставлением с номерами строк (например, на странице ошибки ASP.NET).</span><span class="sxs-lookup"><span data-stu-id="1d79c-123">Applications targeting .NET Framework 4.7.1 or earlier: printing stack traces with mappings back to line numbers (such as in an ASP.NET error page).</span></span> <span data-ttu-id="1d79c-124">Это не касается имен методов, не поддерживаются только имена исходных файлов и номера строк.</span><span class="sxs-lookup"><span data-stu-id="1d79c-124">The name of methods is unaffected, only the source file names and line numbers are unsupported.</span></span>

* <span data-ttu-id="1d79c-125">Использование декомпиляторов .NET, таких как ildasm или .NET reflector и ожидающих отображения сопоставлений строк исходного кода или имен локальных параметров.</span><span class="sxs-lookup"><span data-stu-id="1d79c-125">Using .NET decompilers such as ildasm or .NET reflector and expecting to see source line mappings or local parameter names.</span></span>

* <span data-ttu-id="1d79c-126">Последние версии [DIA](/visualstudio/debugger/debug-interface-access/debug-interface-access-sdk) и средств, которые используют его для чтения символов, например WinDBG, поддерживают переносимые PDB-файлы, но более старые версии — нет.</span><span class="sxs-lookup"><span data-stu-id="1d79c-126">The latest versions of [DIA](/visualstudio/debugger/debug-interface-access/debug-interface-access-sdk) and tools using it for reading symbols, such as WinDBG support Portable PDBs, but older version do not.</span></span>

* <span data-ttu-id="1d79c-127">Могут существовать более старые версии профилировщиков, которые не поддерживают переносимые PDB-файлы.</span><span class="sxs-lookup"><span data-stu-id="1d79c-127">There may be older versions of profilers that do not support portable PDBs.</span></span>

<span data-ttu-id="1d79c-128">Для использования переносимых PDB-файлов в тех средствах, которые не поддерживают их, можно попробовать использовать средство [Pdb2Pdb](https://github.com/dotnet/symreader-converter#pdb2pdb), которое преобразует файлы между форматами "переносимый PDB" и "PDB Windows".</span><span class="sxs-lookup"><span data-stu-id="1d79c-128">To use portable PDBs on tools that do not support them, you can try using [Pdb2Pdb](https://github.com/dotnet/symreader-converter#pdb2pdb) which converts between Portable PDBs and Windows PDBs.</span></span>

### <a name="support-for-windows-pdbs"></a><span data-ttu-id="1d79c-129">Поддержка файлов PDB Windows</span><span class="sxs-lookup"><span data-stu-id="1d79c-129">Support for Windows PDBs</span></span>

<span data-ttu-id="1d79c-130">Файлы PDB Windows можно записывать и читать только в Windows.</span><span class="sxs-lookup"><span data-stu-id="1d79c-130">Windows PDBs can only be written or read on Windows.</span></span> <span data-ttu-id="1d79c-131">Использование PDB-файлов Windows для управляемого кода является устаревшим и используется только для устаревших средств.</span><span class="sxs-lookup"><span data-stu-id="1d79c-131">Using Windows PDBs for managed code is obsolete and is only needed for legacy tools.</span></span> <span data-ttu-id="1d79c-132">Рекомендуется использовать переносимые PDB вместо PDB-файлов Windows, так как некоторые новые функции компилятора реализованы только для переносимых PDB-файлов.</span><span class="sxs-lookup"><span data-stu-id="1d79c-132">It is recommended that you use portable PDBs instead of Windows PDBs as some newer compiler features that are implemented for only portable PDBs.</span></span>

## <a name="see-also"></a><span data-ttu-id="1d79c-133">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="1d79c-133">See also</span></span>

* <span data-ttu-id="1d79c-134">Для скачивания файлов символов для двоичных модулей платформы можно использовать средство [dotnet-symbol](./dotnet-symbol.md)</span><span class="sxs-lookup"><span data-stu-id="1d79c-134">[dotnet-symbol](./dotnet-symbol.md) can be used to download symbol files for framework binaries</span></span>

* [<span data-ttu-id="1d79c-135">Документация Windows по символам</span><span class="sxs-lookup"><span data-stu-id="1d79c-135">Windows documentation on symbols</span></span>](/windows/win32/dxtecharts/debugging-with-symbols)
