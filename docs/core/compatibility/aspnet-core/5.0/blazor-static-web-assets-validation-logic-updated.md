---
title: 'Критическое изменение. Blazor: Обновленная логика проверки для статических веб-ресурсов'
description: Сведения о критическом изменении в ASP.NET Core 5.0 — Blazor. Обновленная логика проверки для статических веб-ресурсов
ms.author: scaddie
ms.date: 10/01/2020
ms.openlocfilehash: b6fb8e9a10157a97119fa07a95fb3dbb8b207214
ms.sourcegitcommit: 089068389671f6f9e15fd67dcbfb0145bf72f1fb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2021
ms.locfileid: "106498156"
---
# <a name="blazor-updated-validation-logic-for-static-web-assets"></a>Blazor: Обновленная логика проверки для статических веб-ресурсов

При проверке конфликтов для статических веб-ресурсов в ASP.NET Core 3.1 и Blazor WebAssembly 3.2 возникала ошибка. Эта ошибка:

* Не позволяла правильно обнаружить конфликты между ресурсами узла и ресурсами из библиотеки классов Razor (RCL) и приложениями Blazor WebAssembly.
* В основном влияет на приложения Blazor WebAssembly, поскольку статические веб-ресурсы в RCL обрабатываются по префиксу `_content/$(PackageId)`.

## <a name="version-introduced"></a>Представленная версия

5.0

## <a name="old-behavior"></a>Старое поведение

Во время разработки статические веб-ресурсы RCL могут быть автоматически переопределены с помощью ресурсов основного проекта по одному и тому же пути к узлу. Рассмотрим RCL, который определил статический веб-ресурс для обслуживания по адресу */folder/file.txt*. Если узел поместил файл в папку *wwwroot/Folder/File. txt*, то файл на сервере автоматически был переопределен в RCL или приложении Blazor WebAssembly.

## <a name="new-behavior"></a>Новое поведение

ASP.NET Core правильно определяет, когда возникает эта проблема. Он информирует пользователя о конфликте, чтобы вы могли предпринять соответствующие действия.

## <a name="reason-for-change"></a>Причина изменения

Статические веб-ресурсы не предназначены для переопределения файлами на узле *wwwroot* проекта. Если разрешить переопределение этих файлов, могут возникать ошибки, которые трудно диагностировать. В результате могут возникнуть неопределенные изменения поведения в опубликованных приложениях.

## <a name="recommended-action"></a>Рекомендованное действие

По умолчанию причины для возникновения конфликтов файла RCL с файлом на узле отсутствуют. Файлы RCL имеют префикс `_content/${PackageId}`. Файлы Blazor WebAssembly размещаются в корне пространства URL-адресов узла, что исключает конфликты. Например, приложения Blazor WebAssembly содержат файл *favicon.ico*, который узел может также включить в папку *wwwroot*.

Если источником конфликта является файл RCL, это часто означает, что код копирует ресурсы из библиотеки в папку *wwwroot* проекта. Написание кода для копирования файлов позволяет достичь основной цели статических веб-ресурсов. Эта цель заключается в получении обновлений в браузере при обновлении содержимого без активации новой компиляции.

Вы можете сохранить это поведение и хранить файл на узле. Для этого удалите файл из списка статических веб-ресурсов с настраиваемым целевым объектом MSBuild.

Чтобы использовать файл RCL или файл Blazor WebAssembly вместо файла основного проекта, удалите файл из основного проекта.

## <a name="affected-apis"></a>Затронутые API

Отсутствуют

<!--

### Category

ASP.NET Core

### Affected APIs

Not detectable via API analysis

-->
