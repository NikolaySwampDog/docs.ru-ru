---
title: Средства .NET
description: Установка, использование, обновление и удаление средств .NET. Содержит сведения о глобальных средствах, средствах пути к средству и локальных средствах.
author: KathleenDollard
ms.topic: how-to
ms.date: 02/12/2020
ms.openlocfilehash: d4fca6b52b1444cf73efc49a6c50294cc5f6015b
ms.sourcegitcommit: c7f0beaa2bd66ebca86362ca17d673f7e8256ca6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104874827"
---
# <a name="how-to-manage-net-tools"></a>Управление средствами .NET

**Эта статья относится к следующему.** ✔️ SDK для .NET Core 2.1 и более поздних версий

Средство .NET — это специальный пакет NuGet, который содержит консольное приложение. Средство можно установить на компьютере следующими способами.

* Как глобальное средство.

  Двоичные файлы инструментов устанавливаются в каталог по умолчанию, который добавляется в переменную среды PATH. Это средство можно вызвать из любого каталога на компьютере, не указывая его расположение. Для всех каталогов на компьютере используется одна версия средства.

* В качестве глобального средства в пользовательском расположении (также известном как средство пути к средству).

  Двоичные файлы средств устанавливаются в указанном расположении. Вы можете вызвать средство из каталога установки, предоставив каталог с именем команды или добавив каталог в переменную среды PATH. Для всех каталогов на компьютере используется одна версия средства.

* В качестве локального средства (применяется к пакету SDK для .NET Core 3.0 и более поздних версий).

  Двоичные файлы средств устанавливаются в каталог по умолчанию. Средство вызывается из каталога установки или любого из его подкаталогов. Разные каталоги могут использовать разные версии одного и того же средства.
  
  В .NET CLI для наблюдения за тем, какие средства устанавливаются для каталога в качестве локальных, используются файлы манифеста. Когда файл манифеста сохраняется в корневом каталоге репозитория исходного кода, участник может клонировать репозиторий и вызвать одну команду CLI .NET, которая устанавливает все средства, перечисленные в файлах манифеста.

> [!IMPORTANT]
> Средства .NET выполняются с полным доверием. Не устанавливайте средства .NET, если вы не доверяете автору.

## <a name="find-a-tool"></a>Поиск средства

Ниже приведены некоторые способы поиска средств.

* Чтобы найти средство, опубликованное в NuGet.org, используйте команду [dotnet tool search](dotnet-tool-search.md).
* Выполните поиск на веб-сайте [NuGet](https://www.nuget.org), используя фильтр .NET tool (Инструмент .NET) из категории Package type (Тип пакета). Дополнительные сведения см. в разделе [Поиск и выбор пакетов](/nuget/consume-packages/finding-and-choosing-packages).
* См. исходный код для средств, созданных командой разработчиков ASP.NET Core в [каталоге средств репозитория GitHub dotnet/aspnetcore](https://github.com/dotnet/aspnetcore/tree/main/src/Tools).
* Дополнительные сведения о средствах диагностики см. в разделе [Средства диагностики .NET](../diagnostics/index.md#net-core-diagnostic-global-tools).

## <a name="check-the-author-and-statistics"></a>Проверка автора и статистики

Поскольку средства .NET работают в режиме полного доверия, а глобальные средства добавляются в переменную среды PATH, они могут быть очень мощными. Не скачивайте средства авторов, которым вы не доверяете.

Если средство размещается в NuGet, вы можете проверить автора и статистику, выполнив поиск средства.

## <a name="install-a-global-tool"></a>Установка глобального средства

Чтобы установить средство в качестве глобального средства, используйте `-g` или опцию `--global` [установки средства dotnet](dotnet-tool-install.md), как показано в следующем примере.

```dotnetcli
dotnet tool install -g dotnetsay
```

В выходных данных отображается команда, используемая для вызова средства и установленной версии, как в следующем примере.

```output
You can invoke the tool using the following command: dotnetsay
Tool 'dotnetsay' (version '2.1.4') was successfully installed.
```

Расположение двоичных файлов средства по умолчанию зависит от операционной системы.

| Операционная система          | Path                          |
|-------------|-------------------------------|
| Linux/macOS | `$HOME/.dotnet/tools`         |
| Windows     | `%USERPROFILE%\.dotnet\tools` |

Это расположение добавляется к пути пользователя при первом запуске пакета SDK, поэтому глобальные средства можно вызывать из любого каталога, не указывая расположение средства.

Доступ к средству зависит от конкретного пользователя, а не от глобального компьютера. Глобальное средство доступно только для пользователя, установившего средство.

### <a name="install-a-global-tool-in-a-custom-location"></a>Установка глобального средства в пользовательском расположении

Чтобы установить средство в качестве глобального средства в пользовательском расположении, используйте опцию `--tool-path` [установки средства dotnet](dotnet-tool-install.md), как показано в следующем примере.

Windows:

```dotnetcli
dotnet tool install dotnetsay --tool-path c:\dotnet-tools
```

В Linux или macOS.

```dotnetcli
dotnet tool install dotnetsay --tool-path ~/bin
```

Пакет SDK для .NET не добавляет это расположение автоматически в переменную среды PATH. Чтобы [вызвать средство пути к средству](#invoke-a-tool-path-tool), необходимо убедиться, что команда доступна с помощью одного из следующих методов.

* Добавьте каталог установки в переменную среды PATH.
* При вызове средства следует указать полный путь к нему.
* Вызовите средство из каталога установки.

## <a name="install-a-local-tool"></a>Установка локального средства

**Применимо к пакету SDK для .NET Core 3.0 и более поздних версий.**

Чтобы установить средство только для локального доступа (для текущего каталога и подкаталогов), его необходимо добавить в файл манифеста средства. Чтобы создать файл манифеста средства, выполните команду `dotnet new tool-manifest`:

```dotnetcli
dotnet new tool-manifest
```

Эта команда создает файл манифеста с именем *dotnet-tools.json* в каталоге *.config*. Для добавления локального средства в файл манифеста используйте команду [dotnet tool install](dotnet-tool-install.md) и **omit** опции `--global` и `--tool-path`, как показано в следующем примере.

```dotnetcli
dotnet tool install dotnetsay
```

Вывод команды показывает, в каком файле манифеста находится только что установленное средство, как показано в следующем примере.

```console
You can invoke the tool from this directory using the following command:
dotnet tool run dotnetsay
Tool 'dotnetsay' (version '2.1.4') was successfully installed.
Entry is added to the manifest file /home/name/botsay/.config/dotnet-tools.json.
```

В следующем примере показан файл манифеста с двумя установленными локальными средствами.

```json
{
  "version": 1,
  "isRoot": true,
  "tools": {
    "botsay": {
      "version": "1.0.0",
      "commands": [
        "botsay"
      ]
    },
    "dotnetsay": {
      "version": "2.1.3",
      "commands": [
        "dotnetsay"
      ]
    }
  }
}
```

Обычно вы добавляете локальное средство в корневой каталог репозитория. После записи файла манифеста в репозиторий после изменения, разработчики, извлекающие код из репозитория, получают последний файл манифеста. Чтобы установить все средства, перечисленные в файле манифеста, они запускают команду `dotnet tool restore`:

```dotnetcli
dotnet tool restore
```

Вывод показывает, какие инструменты восстановлены:

```console
Tool 'botsay' (version '1.0.0') was restored. Available commands: botsay
Tool 'dotnetsay' (version '2.1.3') was restored. Available commands: dotnetsay
Restore was successful.
```

## <a name="install-a-specific-tool-version"></a>Установка конкретной версии средства

Чтобы установить предварительную или конкретную версию средства, укажите номер версии, используя параметр `--version`, как показано в следующем примере:

```dotnetcli
dotnet tool install dotnetsay --version 2.1.3
```

## <a name="use-a-tool"></a>Использование средства

Команда, которую вы используете для вызова средства, может отличаться от названия пакета, который вы устанавливаете. Чтобы отобразить все средства, установленные на компьютере для текущего пользователя, используйте команду [dotnet tool list](dotnet-tool-list.md):

```dotnetcli
dotnet tool list
```

На выходе показаны версия и команда каждого средства, аналогично следующему примеру.

```console
Package Id      Version      Commands       Manifest
-------------------------------------------------------------------------------------------
botsay          1.0.0        botsay         /home/name/repository/.config/dotnet-tools.json
dotnetsay       2.1.3        dotnetsay      /home/name/repository/.config/dotnet-tools.json
```

Как показано в этом примере, список показывает локальные средства. Для просмотра глобальных средств используйте параметр `--global`, а для просмотра средства пути к средствам — `--tool-path`.

### <a name="invoke-a-global-tool"></a>Вызов глобального инструмента

Для глобальных средств используйте команду средства самостоятельно. Например, если команда `dotnetsay` или `dotnet-doc`, это то, что вы используете для вызова команды.

```console
dotnetsay
dotnet-doc
```

Если команда начинается с префикса `dotnet-`, альтернативный способ вызова средства — использование команды `dotnet` и опускание префикса команды средства. Например, если команда `dotnet-doc`, то средство вызывает следующая команда.

```dotnetcli
dotnet doc
```

Однако в следующем сценарии для вызова глобального средства нельзя использовать команду `dotnet`:

* Глобальное и локальное средство имеют одну и ту же команду с префиксом `dotnet-`.
* Вы хотите вызвать глобальное средство из каталога, находящегося в области действия локального средства.

В этом сценарии локальное средство вызывают `dotnet doc` и `dotnet dotnet-doc`. Чтобы вызвать глобальное средство, используйте команду самостоятельно.

```dotnetcli
dotnet-doc
```

### <a name="invoke-a-tool-path-tool"></a>Вызов средства пути к средству

Для вызова глобального средства, которое устанавливается с помощью опции `tool-path`, убедитесь, что команда доступна, как объяснялось [ранее в этой статье](#install-a-global-tool-in-a-custom-location).

### <a name="invoke-a-local-tool"></a>Вызов локального средства

Для вызова локального средства необходимо использовать команду `dotnet` из каталога установки. Вы можете использовать длинную (`dotnet tool run <COMMAND_NAME>`) или короткую (`dotnet <COMMAND_NAME>`) форму, как показано в следующих примерах.

```dotnetcli
dotnet tool run dotnetsay
dotnet dotnetsay
```

Если команда имеет префикс `dotnet-`, вы можете включить или исключить префикс при вызове средства. Например, если команда `dotnet-doc`, то локальное средство вызовет любой из следующих примеров.

```dotnetcli
dotnet tool run dotnet-doc
dotnet dotnet-doc
dotnet doc
```

## <a name="update-a-tool"></a>Обновление средства

Обновление средства подразумевает его удаление и установку последней стабильной версии. Для обновления средства используйте команду [dotnet tool update](dotnet-tool-update.md) с той же опцией, что и при установке средства.

```dotnetcli
dotnet tool update --global <packagename>
dotnet tool update --tool-path <packagename>
dotnet tool update <packagename>
```

Для локального средства пакет SDK находит первый файл манифеста, который содержит идентификатор пакета, выполнив поиск в текущем и родительском каталоге. Если такой идентификатор пакета отсутствует в любом файле манифеста, пакет SDK добавляет новую запись в ближайший файл манифеста.

## <a name="uninstall-a-tool"></a>Удаление средства

Удалите инструмент с помощью команды [dotnet tool uninstall](dotnet-tool-uninstall.md) с той же опцией, которую вы использовали для установки средства.

```dotnetcli
dotnet tool uninstall --global <packagename>
dotnet tool uninstall --tool-path <packagename>
dotnet tool uninstall <packagename>
```

Для локального средства пакет SDK находит первый файл манифеста, который содержит идентификатор пакета, выполнив поиск в текущем и родительском каталоге.

## <a name="get-help-and-troubleshoot"></a>Получение справки и устранение неполадок

Чтобы получить список доступных команд `dotnet tool`, введите следующую команду.

```dotnetcli
dotnet tool --help
```

Чтобы получить инструкции по использованию средства, введите одну из следующих команд или посетите веб-сайт средства.

```dotnetcli
<command> --help
dotnet <command> --help
```

Если средство не удается установить или запустить, см. статью [Устранение неполадок при использовании средства .NET](troubleshoot-usage-issues.md).

## <a name="see-also"></a>См. также

- [Учебник. Создание средства .NET с помощью интерфейса командной строки .NET](global-tools-how-to-create.md)
- [Учебник. Установка и использование глобального средства .NET с помощью интерфейса командной строки .NET](global-tools-how-to-use.md)
- [Учебник. Установка и использование локального средства .NET с помощью интерфейса командной строки .NET](local-tools-how-to-use.md)
