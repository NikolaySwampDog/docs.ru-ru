---
title: Публикация приложений с помощью .NET CLI
description: Узнайте, как публиковать приложения .NET с помощью команд .NET CLI.
author: adegeo
ms.author: adegeo
ms.date: 02/05/2021
dev_langs:
- csharp
- vb
ms.openlocfilehash: 65c9c4929d9ed8ab4005677fbcb0a3745ed14190
ms.sourcegitcommit: c7f0beaa2bd66ebca86362ca17d673f7e8256ca6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104874307"
---
# <a name="publish-net-apps-with-the-net-cli"></a><span data-ttu-id="a929b-103">Публикация приложений .NET с помощью интерфейса командной строки</span><span class="sxs-lookup"><span data-stu-id="a929b-103">Publish .NET apps with the .NET CLI</span></span>

<span data-ttu-id="a929b-104">В этой статье показано, как опубликовать приложение .NET из командной строки.</span><span class="sxs-lookup"><span data-stu-id="a929b-104">This article demonstrates how you can publish your .NET application from the command line.</span></span> <span data-ttu-id="a929b-105">.NET предоставляет три способа публикации приложений.</span><span class="sxs-lookup"><span data-stu-id="a929b-105">.NET provides three ways to publish your applications.</span></span> <span data-ttu-id="a929b-106">Зависимое от платформы развертывание создает кроссплатформенный DLL-файл, который использует локально установленную среду выполнения .NET.</span><span class="sxs-lookup"><span data-stu-id="a929b-106">Framework-dependent deployment produces a cross-platform .dll file that uses the locally installed .NET runtime.</span></span> <span data-ttu-id="a929b-107">Зависимый от платформы исполняемый файл использует локально установленную среду выполнения .NET.</span><span class="sxs-lookup"><span data-stu-id="a929b-107">Framework-dependent executable produces a platform-specific executable that uses the locally installed .NET runtime.</span></span> <span data-ttu-id="a929b-108">Автономный исполняемый файл создает зависимый от платформы исполняемый файл и включает локальную копию среды выполнения .NET.</span><span class="sxs-lookup"><span data-stu-id="a929b-108">Self-contained executable produces a platform-specific executable and includes a local copy of the .NET runtime.</span></span>

<span data-ttu-id="a929b-109">Общие сведения о режимах развертывания см. в статье [Общие сведения о публикации приложений .NET](index.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-109">For an overview of these publishing modes, see [.NET Application Deployment](index.md).</span></span>

<span data-ttu-id="a929b-110">Ищете справку по работе с командной строкой?</span><span class="sxs-lookup"><span data-stu-id="a929b-110">Looking for some quick help on using the CLI?</span></span> <span data-ttu-id="a929b-111">В следующей таблице показаны некоторые примеры публикации приложений.</span><span class="sxs-lookup"><span data-stu-id="a929b-111">The following table shows some examples of how to publish your app.</span></span> <span data-ttu-id="a929b-112">Вы можете указать целевую платформу с помощью параметра `-f <TFM>` или путем редактирования файла проекта.</span><span class="sxs-lookup"><span data-stu-id="a929b-112">You can specify the target framework with the `-f <TFM>` parameter or by editing the project file.</span></span> <span data-ttu-id="a929b-113">Дополнительные сведения см. в статье [Основы публикации](#publishing-basics).</span><span class="sxs-lookup"><span data-stu-id="a929b-113">For more information, see [Publishing basics](#publishing-basics).</span></span>

| <span data-ttu-id="a929b-114">Режим публикации</span><span class="sxs-lookup"><span data-stu-id="a929b-114">Publish Mode</span></span>                   | <span data-ttu-id="a929b-115">Версия пакета SDK</span><span class="sxs-lookup"><span data-stu-id="a929b-115">SDK Version</span></span> | <span data-ttu-id="a929b-116">Get-Help</span><span class="sxs-lookup"><span data-stu-id="a929b-116">Command</span></span>                                                     |
|--------------------------------|-------------|-------------------------------------------------------------|
| [<span data-ttu-id="a929b-117">развертывание, зависящее от платформы;</span><span class="sxs-lookup"><span data-stu-id="a929b-117">Framework-dependent deployment</span></span>](#framework-dependent-deployment) | <span data-ttu-id="a929b-118">2.1</span><span class="sxs-lookup"><span data-stu-id="a929b-118">2.1</span></span>         | `dotnet publish -c Release`                                 |
|                                | <span data-ttu-id="a929b-119">3.1</span><span class="sxs-lookup"><span data-stu-id="a929b-119">3.1</span></span>         | `dotnet publish -c Release -p:UseAppHost=false`             |
|                                | <span data-ttu-id="a929b-120">5,0</span><span class="sxs-lookup"><span data-stu-id="a929b-120">5.0</span></span>         | `dotnet publish -c Release -p:UseAppHost=false`             |
| [<span data-ttu-id="a929b-121">Исполняемый файл, зависящий от платформы</span><span class="sxs-lookup"><span data-stu-id="a929b-121">Framework-dependent executable</span></span>](#framework-dependent-executable) | <span data-ttu-id="a929b-122">3.1</span><span class="sxs-lookup"><span data-stu-id="a929b-122">3.1</span></span>         | `dotnet publish -c Release -r <RID> --self-contained false`<br>`dotnet publish -c Release` |
|                                | <span data-ttu-id="a929b-123">5,0</span><span class="sxs-lookup"><span data-stu-id="a929b-123">5.0</span></span>         | `dotnet publish -c Release -r <RID> --self-contained false`<br>`dotnet publish -c Release` |
| [<span data-ttu-id="a929b-124">автономное развертывание;</span><span class="sxs-lookup"><span data-stu-id="a929b-124">Self-contained deployment</span></span>](#self-contained-deployment)      | <span data-ttu-id="a929b-125">2.1</span><span class="sxs-lookup"><span data-stu-id="a929b-125">2.1</span></span>         | `dotnet publish -c Release -r <RID> --self-contained true`  |
|                                | <span data-ttu-id="a929b-126">3.1</span><span class="sxs-lookup"><span data-stu-id="a929b-126">3.1</span></span>         | `dotnet publish -c Release -r <RID> --self-contained true`  |
|                                | <span data-ttu-id="a929b-127">5,0</span><span class="sxs-lookup"><span data-stu-id="a929b-127">5.0</span></span>         | `dotnet publish -c Release -r <RID> --self-contained true`  |

<span data-ttu-id="a929b-128">\* При использовании **пакета SDK 3.1** или более поздней версии режим публикации по умолчанию при выполнении базовой команды `dotnet publish` предусматривает использование зависимого от платформы исполняемого файла.</span><span class="sxs-lookup"><span data-stu-id="a929b-128">\* When using **SDK version 3.1** or higher, framework-dependent executable is the default publishing mode when running the basic `dotnet publish` command.</span></span>

> [!NOTE]
> <span data-ttu-id="a929b-129">Параметр `-c Release` не является обязательным.</span><span class="sxs-lookup"><span data-stu-id="a929b-129">The `-c Release` parameter isn't required.</span></span> <span data-ttu-id="a929b-130">Он предоставляется в виде напоминания о публикации сборки **выпуска** приложения.</span><span class="sxs-lookup"><span data-stu-id="a929b-130">It's provided as a reminder to publish the **Release** build of your app.</span></span>

## <a name="publishing-basics"></a><span data-ttu-id="a929b-131">Основы публикации</span><span class="sxs-lookup"><span data-stu-id="a929b-131">Publishing basics</span></span>

<span data-ttu-id="a929b-132">Параметр `<TargetFramework>` файла проекта указывает целевую платформу по умолчанию при публикации приложения.</span><span class="sxs-lookup"><span data-stu-id="a929b-132">The `<TargetFramework>` setting of the project file specifies the default target framework when you publish your app.</span></span> <span data-ttu-id="a929b-133">Можно изменить целевую платформу на любой допустимый [моникер целевой платформы (TFM)](../../standard/frameworks.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-133">You can change the target framework to any valid [Target Framework Moniker (TFM)](../../standard/frameworks.md).</span></span> <span data-ttu-id="a929b-134">Например, если проект использует `<TargetFramework>netcoreapp2.1</TargetFramework>`, создается двоичный файл, предназначенный для .NET Core 2.1.</span><span class="sxs-lookup"><span data-stu-id="a929b-134">For example, if your project uses `<TargetFramework>netcoreapp2.1</TargetFramework>`, a binary that targets .NET Core 2.1 is created.</span></span> <span data-ttu-id="a929b-135">TFM, указанный в этом параметре, является целевым объектом по умолчанию, используемым командой [`dotnet publish`](../tools/dotnet-publish.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-135">The TFM specified in this setting is the default target used by the [`dotnet publish`](../tools/dotnet-publish.md) command.</span></span>

<span data-ttu-id="a929b-136">Если вам нужно охватить несколько платформ, можно задать в параметре `<TargetFrameworks>` несколько значений TFM, разделенных точками с запятой.</span><span class="sxs-lookup"><span data-stu-id="a929b-136">If you want to target more than one framework, you can set the `<TargetFrameworks>` setting to multiple TFM values, separated by a semicolon.</span></span> <span data-ttu-id="a929b-137">При создании приложения создается сборка для каждой целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="a929b-137">When you build your app, a build is produced for each target framework.</span></span> <span data-ttu-id="a929b-138">Но при публикации приложения необходимо указать целевую платформу с помощью команды `dotnet publish -f <TFM>`.</span><span class="sxs-lookup"><span data-stu-id="a929b-138">However, when you publish your app, you must specify the target framework with the `dotnet publish -f <TFM>` command.</span></span>

<span data-ttu-id="a929b-139">Если не указано иное, выходной каталог команды [`dotnet publish`](../tools/dotnet-publish.md) — `./bin/<BUILD-CONFIGURATION>/<TFM>/publish/`.</span><span class="sxs-lookup"><span data-stu-id="a929b-139">Unless otherwise set, the output directory of the [`dotnet publish`](../tools/dotnet-publish.md) command is `./bin/<BUILD-CONFIGURATION>/<TFM>/publish/`.</span></span> <span data-ttu-id="a929b-140">Значение по умолчанию для режима **BUILD-CONFIGURATION** — **Отладка**, если с помощью параметра `-c` не задано иное.</span><span class="sxs-lookup"><span data-stu-id="a929b-140">The default **BUILD-CONFIGURATION** mode is **Debug** unless changed with the `-c` parameter.</span></span> <span data-ttu-id="a929b-141">Например `dotnet publish -c Release -f netcoreapp2.1` публикует в `./bin/Release/netcoreapp2.1/publish/`.</span><span class="sxs-lookup"><span data-stu-id="a929b-141">For example, `dotnet publish -c Release -f netcoreapp2.1` publishes to `./bin/Release/netcoreapp2.1/publish/`.</span></span>

<span data-ttu-id="a929b-142">При использовании пакета SDK для .NET Core 3.1 или более поздней версии режим публикации по умолчанию предусматривает зависимый от платформы _исполняемый файл_.</span><span class="sxs-lookup"><span data-stu-id="a929b-142">If you use .NET Core SDK 3.1 or later, the default publish mode is framework-dependent _executable_.</span></span>

<span data-ttu-id="a929b-143">При использовании пакета SDK для .NET Core 2.1 режим публикации по умолчанию предусматривает зависимое от платформы _развертывание_.</span><span class="sxs-lookup"><span data-stu-id="a929b-143">If you use .NET Core SDK 2.1, the default publish mode is framework-dependent _deployment_.</span></span>

### <a name="native-dependencies"></a><span data-ttu-id="a929b-144">Машинные зависимости</span><span class="sxs-lookup"><span data-stu-id="a929b-144">Native dependencies</span></span>

<span data-ttu-id="a929b-145">Если приложение имеет машинные зависимости, оно не может выполняться в другой операционной системе.</span><span class="sxs-lookup"><span data-stu-id="a929b-145">If your app has native dependencies, it may not run on a different operating system.</span></span> <span data-ttu-id="a929b-146">Например, если приложение использует нативный интерфейс Windows API, оно не будет работать в macOS или Linux.</span><span class="sxs-lookup"><span data-stu-id="a929b-146">For example, if your app uses the native Windows API, it won't run on macOS or Linux.</span></span> <span data-ttu-id="a929b-147">Необходимо написать код для конкретной платформы и скомпилировать исполняемый файл для каждой платформы.</span><span class="sxs-lookup"><span data-stu-id="a929b-147">You would need to provide platform-specific code and compile an executable for each platform.</span></span>

<span data-ttu-id="a929b-148">Учтите также, что если ссылка на библиотеку имеет машинную зависимость, приложения могут не выполняться на всех платформах.</span><span class="sxs-lookup"><span data-stu-id="a929b-148">Consider also, if a library you referenced has a native dependency, your app may not run on every platform.</span></span> <span data-ttu-id="a929b-149">Тем не менее возможно, что пакет NuGet, на который вы ссылаетесь, включает версии для конкретных платформ, которые разрешают машинные зависимости за вас.</span><span class="sxs-lookup"><span data-stu-id="a929b-149">However, it's possible a NuGet package you're referencing has included platform-specific versions to handle the required native dependencies for you.</span></span>

<span data-ttu-id="a929b-150">При распространении приложения с машинными зависимостями может потребоваться использовать `dotnet publish -r <RID>` для указания целевой платформы публикации.</span><span class="sxs-lookup"><span data-stu-id="a929b-150">When distributing an app with native dependencies, you may need to use the `dotnet publish -r <RID>` switch to specify the target platform you want to publish for.</span></span> <span data-ttu-id="a929b-151">Список идентификаторов сред выполнения см. в [каталоге идентификаторов сред выполнения](../rid-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-151">For a list of runtime identifiers, see [Runtime Identifier (RID) catalog](../rid-catalog.md).</span></span>

<span data-ttu-id="a929b-152">Дополнительные сведения о двоичных файлах для определенной платформы см. в разделах [Исполняемый файл, зависящий от платформы](#framework-dependent-executable) и [Автономное развертывание](#self-contained-deployment).</span><span class="sxs-lookup"><span data-stu-id="a929b-152">More information about platform-specific binaries is covered in the [Framework-dependent executable](#framework-dependent-executable) and [Self-contained deployment](#self-contained-deployment) sections.</span></span>

## <a name="sample-app"></a><span data-ttu-id="a929b-153">Пример приложения</span><span class="sxs-lookup"><span data-stu-id="a929b-153">Sample app</span></span>

<span data-ttu-id="a929b-154">Чтобы изучить команды публикации, можно использовать следующее приложение.</span><span class="sxs-lookup"><span data-stu-id="a929b-154">You can use the following app to explore the publishing commands.</span></span> <span data-ttu-id="a929b-155">Приложение можно создать, выполнив следующие команды в окне терминала:</span><span class="sxs-lookup"><span data-stu-id="a929b-155">The app is created by running the following commands in your terminal:</span></span>

```dotnetcli
mkdir apptest1
cd apptest1
dotnet new console
dotnet add package Figgle
```

<span data-ttu-id="a929b-156">Файл `Program.cs` или `Program.vb`, созданный с помощью шаблона консоли, необходимо изменить на следующее:</span><span class="sxs-lookup"><span data-stu-id="a929b-156">The `Program.cs` or `Program.vb` file that is generated by the console template needs to be changed to the following:</span></span>

```csharp
using System;

namespace apptest1
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine(Figgle.FiggleFonts.Standard.Render("Hello, World!"));
        }
    }
}
```

```vb
Module Program
    Sub Main(args As String())
        Console.WriteLine(Figgle.FiggleFonts.Standard.Render("Hello, World!"))
    End Sub
End Module
```

<span data-ttu-id="a929b-157">При выполнении приложения ([`dotnet run`](../tools/dotnet-run.md)) отображается следующий результат:</span><span class="sxs-lookup"><span data-stu-id="a929b-157">When you run the app ([`dotnet run`](../tools/dotnet-run.md)), the following output is displayed:</span></span>

```terminal
  _   _      _ _         __        __         _     _ _
 | | | | ___| | | ___    \ \      / /__  _ __| | __| | |
 | |_| |/ _ \ | |/ _ \    \ \ /\ / / _ \| '__| |/ _` | |
 |  _  |  __/ | | (_) |    \ V  V / (_) | |  | | (_| |_|
 |_| |_|\___|_|_|\___( )    \_/\_/ \___/|_|  |_|\__,_(_)
                     |/
```

## <a name="framework-dependent-deployment"></a><span data-ttu-id="a929b-158">развертывание, зависящее от платформы;</span><span class="sxs-lookup"><span data-stu-id="a929b-158">Framework-dependent deployment</span></span>

<span data-ttu-id="a929b-159">Для пакета SDK для .NET Core 2.1 зависимое от платформы развертывание (FDD) является режимом по умолчанию для базовой команды `dotnet publish`.</span><span class="sxs-lookup"><span data-stu-id="a929b-159">For the .NET Core 2.1 SDK CLI, framework-dependent deployment (FDD) is the default mode for the basic `dotnet publish` command.</span></span> <span data-ttu-id="a929b-160">В более новых пакетах SDK по умолчанию используется [зависимый от платформы исполняемый файл](#framework-dependent-executable).</span><span class="sxs-lookup"><span data-stu-id="a929b-160">In newer SDKs, [Framework-dependent executable](#framework-dependent-executable) is the default.</span></span>

<span data-ttu-id="a929b-161">При публикации приложения в качестве FDD файл `<PROJECT-NAME>.dll` создается в папке `./bin/<BUILD-CONFIGURATION>/<TFM>/publish/`.</span><span class="sxs-lookup"><span data-stu-id="a929b-161">When you publish your app as an FDD, a `<PROJECT-NAME>.dll` file is created in the `./bin/<BUILD-CONFIGURATION>/<TFM>/publish/` folder.</span></span> <span data-ttu-id="a929b-162">Чтобы запустить приложение, перейдите к папке выходных данных и используйте команду `dotnet <PROJECT-NAME>.dll`.</span><span class="sxs-lookup"><span data-stu-id="a929b-162">To run your app, navigate to the output folder and use the `dotnet <PROJECT-NAME>.dll` command.</span></span>

<span data-ttu-id="a929b-163">Ваше приложение будет настроено для конкретной версии .NET.</span><span class="sxs-lookup"><span data-stu-id="a929b-163">Your app is configured to target a specific version of .NET.</span></span> <span data-ttu-id="a929b-164">Целевую среду выполнения .NET необходимо установить на компьютер, на котором будет запущено приложение.</span><span class="sxs-lookup"><span data-stu-id="a929b-164">That targeted .NET runtime is required to be on any machine where your app runs.</span></span> <span data-ttu-id="a929b-165">Например, если приложение предназначено для .NET Core 3.1, на любом компьютере, где работает ваше приложение, должна быть установлена среда выполнения .NET Core 3.1.</span><span class="sxs-lookup"><span data-stu-id="a929b-165">For example, if your app targets .NET Core 3.1, any machine that your app runs on must have the .NET Core 3.1 runtime installed.</span></span> <span data-ttu-id="a929b-166">Как уже говорилось в разделе [Основы публикации](#publishing-basics), можно изменить файл проекта для изменения целевой платформы по умолчанию или для выбора нескольких платформ.</span><span class="sxs-lookup"><span data-stu-id="a929b-166">As stated in the [Publishing basics](#publishing-basics) section, you can edit your project file to change the default target framework or to target more than one framework.</span></span>

<span data-ttu-id="a929b-167">При публикации FDD создается приложение, которое автоматически использует новейшую версию исправлений безопасности .NET, доступных в системе, где выполняется приложение.</span><span class="sxs-lookup"><span data-stu-id="a929b-167">Publishing an FDD creates an app that automatically rolls-forward to the latest .NET security patch available on the system that runs the app.</span></span> <span data-ttu-id="a929b-168">Дополнительные сведения о привязке версий во время компиляции см. в разделе [Накат платформозависимых приложений](../versions/selection.md#framework-dependent-apps-roll-forward).</span><span class="sxs-lookup"><span data-stu-id="a929b-168">For more information on version binding at compile time, see [Select the .NET version to use](../versions/selection.md#framework-dependent-apps-roll-forward).</span></span>

| <span data-ttu-id="a929b-169">Режим публикации</span><span class="sxs-lookup"><span data-stu-id="a929b-169">Publish Mode</span></span>                   | <span data-ttu-id="a929b-170">Версия пакета SDK</span><span class="sxs-lookup"><span data-stu-id="a929b-170">SDK Version</span></span> | <span data-ttu-id="a929b-171">Get-Help</span><span class="sxs-lookup"><span data-stu-id="a929b-171">Command</span></span>                                                     |
|--------------------------------|-------------|-------------------------------------------------------------|
| <span data-ttu-id="a929b-172">развертывание, зависящее от платформы;</span><span class="sxs-lookup"><span data-stu-id="a929b-172">Framework-dependent deployment</span></span> | <span data-ttu-id="a929b-173">2.1</span><span class="sxs-lookup"><span data-stu-id="a929b-173">2.1</span></span>         | `dotnet publish -c Release`                                 |
|                                | <span data-ttu-id="a929b-174">3.1</span><span class="sxs-lookup"><span data-stu-id="a929b-174">3.1</span></span>         | `dotnet publish -c Release -p:UseAppHost=false`             |
|                                | <span data-ttu-id="a929b-175">5,0</span><span class="sxs-lookup"><span data-stu-id="a929b-175">5.0</span></span>         | `dotnet publish -c Release -p:UseAppHost=false`             |

## <a name="framework-dependent-executable"></a><span data-ttu-id="a929b-176">Исполняемый файл, зависящий от платформы</span><span class="sxs-lookup"><span data-stu-id="a929b-176">Framework-dependent executable</span></span>

<span data-ttu-id="a929b-177">Для CLI пакета SDK .NET 5 (и .NET Core 3.1) зависящий от платформы исполняемый файл (FDE) является режимом по умолчанию для базовой команды `dotnet publish`.</span><span class="sxs-lookup"><span data-stu-id="a929b-177">For the .NET 5 (and .NET Core 3.1) SDK CLI, framework-dependent executable (FDE) is the default mode for the basic `dotnet publish` command.</span></span> <span data-ttu-id="a929b-178">Указывать другие параметры, если вы будете работать в текущей операционной системе, не нужно.</span><span class="sxs-lookup"><span data-stu-id="a929b-178">You don't need to specify any other parameters, as long as you want to target the current operating system.</span></span>

<span data-ttu-id="a929b-179">В этом режиме для размещения кроссплатформенного приложения создается исполняемый файл основного приложения для конкретной платформы.</span><span class="sxs-lookup"><span data-stu-id="a929b-179">In this mode, a platform-specific executable host is created to host your cross-platform app.</span></span> <span data-ttu-id="a929b-180">Этот режим аналогичен FDD, так как FDD требуется основное приложение в виде команды `dotnet`.</span><span class="sxs-lookup"><span data-stu-id="a929b-180">This mode is similar to FDD, as FDD requires a host in the form of the `dotnet` command.</span></span> <span data-ttu-id="a929b-181">Имя исполняемого файла основного приложения зависит от платформы и обычно похоже на `<PROJECT-FILE>.exe`.</span><span class="sxs-lookup"><span data-stu-id="a929b-181">The host executable filename varies per platform and is named something similar to `<PROJECT-FILE>.exe`.</span></span> <span data-ttu-id="a929b-182">Вы можете запустить этот исполняемый файл напрямую вместо вызова метода `dotnet <PROJECT-FILE>.dll`, который по-прежнему допустим для запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="a929b-182">You can run this executable directly instead of calling `dotnet <PROJECT-FILE>.dll`, which is still an acceptable way to run the app.</span></span>

<span data-ttu-id="a929b-183">Ваше приложение будет настроено для конкретной версии .NET.</span><span class="sxs-lookup"><span data-stu-id="a929b-183">Your app is configured to target a specific version of .NET.</span></span> <span data-ttu-id="a929b-184">Целевую среду выполнения .NET необходимо установить на компьютер, на котором будет запущено приложение.</span><span class="sxs-lookup"><span data-stu-id="a929b-184">That targeted .NET runtime is required to be on any machine where your app runs.</span></span> <span data-ttu-id="a929b-185">Например, если приложение предназначено для .NET Core 3.1, на любом компьютере, где работает ваше приложение, должна быть установлена среда выполнения .NET Core 3.1.</span><span class="sxs-lookup"><span data-stu-id="a929b-185">For example, if your app targets .NET Core 3.1, any machine that your app runs on must have the .NET Core 3.1 runtime installed.</span></span> <span data-ttu-id="a929b-186">Как уже говорилось в разделе [Основы публикации](#publishing-basics), можно изменить файл проекта для изменения целевой платформы по умолчанию или для выбора нескольких платформ.</span><span class="sxs-lookup"><span data-stu-id="a929b-186">As stated in the [Publishing basics](#publishing-basics) section, you can edit your project file to change the default target framework or to target more than one framework.</span></span>

<span data-ttu-id="a929b-187">Публикация FDE создает приложение, которое автоматически использует новейшую версию исправлений безопасности .NET, доступных в системе, где выполняется приложение.</span><span class="sxs-lookup"><span data-stu-id="a929b-187">Publishing an FDE creates an app that automatically rolls-forward to the latest .NET security patch available on the system that runs the app.</span></span> <span data-ttu-id="a929b-188">Дополнительные сведения о привязке версий во время компиляции см. в разделе [Накат платформозависимых приложений](../versions/selection.md#framework-dependent-apps-roll-forward).</span><span class="sxs-lookup"><span data-stu-id="a929b-188">For more information on version binding at compile time, see [Select the .NET version to use](../versions/selection.md#framework-dependent-apps-roll-forward).</span></span>

<span data-ttu-id="a929b-189">При использовании .NET 2.1 необходимо использовать следующие параметры с командой `dotnet publish` для публикации FDE:</span><span class="sxs-lookup"><span data-stu-id="a929b-189">For .NET 2.1, you must use the following switches with the `dotnet publish` command to publish an FDE:</span></span>

- <span data-ttu-id="a929b-190">`-r <RID>` — этот параметр использует идентификатор (RID) для указания целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="a929b-190">`-r <RID>` This switch uses an identifier (RID) to specify the target platform.</span></span> <span data-ttu-id="a929b-191">Список идентификаторов сред выполнения см. в [каталоге идентификаторов сред выполнения](../rid-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-191">For a list of runtime identifiers, see [Runtime Identifier (RID) catalog](../rid-catalog.md).</span></span>

- <span data-ttu-id="a929b-192">`--self-contained false` — этот параметр отключает поведение переключателя по умолчанию `-r`, которое заключается в создании автономного развертывания.</span><span class="sxs-lookup"><span data-stu-id="a929b-192">`--self-contained false` This switch disables the default behavior of the `-r` switch, which is to create a self-contained deployment (SCD).</span></span> <span data-ttu-id="a929b-193">Этот параметр создает FDE.</span><span class="sxs-lookup"><span data-stu-id="a929b-193">This switch creates an FDE.</span></span>

| <span data-ttu-id="a929b-194">Режим публикации</span><span class="sxs-lookup"><span data-stu-id="a929b-194">Publish Mode</span></span>                   | <span data-ttu-id="a929b-195">Версия пакета SDK</span><span class="sxs-lookup"><span data-stu-id="a929b-195">SDK Version</span></span> | <span data-ttu-id="a929b-196">Get-Help</span><span class="sxs-lookup"><span data-stu-id="a929b-196">Command</span></span>                                                     |
|--------------------------------|-------------|-------------------------------------------------------------|
| <span data-ttu-id="a929b-197">Исполняемый файл, зависящий от платформы</span><span class="sxs-lookup"><span data-stu-id="a929b-197">Framework-dependent executable</span></span> | <span data-ttu-id="a929b-198">3.1</span><span class="sxs-lookup"><span data-stu-id="a929b-198">3.1</span></span>         | `dotnet publish -c Release -r <RID> --self-contained false`<br>`dotnet publish -c Release` |
|                                | <span data-ttu-id="a929b-199">5,0</span><span class="sxs-lookup"><span data-stu-id="a929b-199">5.0</span></span>         | `dotnet publish -c Release -r <RID> --self-contained false`<br>`dotnet publish -c Release` |

<span data-ttu-id="a929b-200">При использовании параметра `-r` путь к папке выходных данных изменяется на `./bin/<BUILD-CONFIGURATION>/<TFM>/<RID>/publish/`</span><span class="sxs-lookup"><span data-stu-id="a929b-200">Whenever you use the `-r` switch, the output folder path changes to: `./bin/<BUILD-CONFIGURATION>/<TFM>/<RID>/publish/`</span></span>

<span data-ttu-id="a929b-201">Если вы используете [пример приложения](#sample-app), запустите `dotnet publish -f net5.0 -r win10-x64 --self-contained false`.</span><span class="sxs-lookup"><span data-stu-id="a929b-201">If you use the [example app](#sample-app), run `dotnet publish -f net5.0 -r win10-x64 --self-contained false`.</span></span> <span data-ttu-id="a929b-202">Эта команда создает следующий исполняемый файл: `./bin/Debug/net5.0/win10-x64/publish/apptest1.exe`</span><span class="sxs-lookup"><span data-stu-id="a929b-202">This command creates the following executable: `./bin/Debug/net5.0/win10-x64/publish/apptest1.exe`</span></span>

> [!NOTE]
> <span data-ttu-id="a929b-203">Можно уменьшить размер развертывания, включив **инвариантный режим глобализации**.</span><span class="sxs-lookup"><span data-stu-id="a929b-203">You can reduce the total size of your deployment by enabling **globalization invariant mode**.</span></span> <span data-ttu-id="a929b-204">Он подходит для приложений, которые не имеют глобальных параметров и могут использовать соглашения о форматировании, соглашения о регистре, сравнение строк и порядок сортировки для [инвариантного языка и региональных параметров](xref:System.Globalization.CultureInfo.InvariantCulture).</span><span class="sxs-lookup"><span data-stu-id="a929b-204">This mode is useful for applications that are not globally aware and that can use the formatting conventions, casing conventions, and string comparison and sort order of the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture).</span></span> <span data-ttu-id="a929b-205">Дополнительные сведения об **инвариантном режиме глобализации** и том, как его включить, см. в статье об [инвариантном режиме глобализации .NET](https://github.com/dotnet/runtime/blob/main/docs/design/features/globalization-invariant-mode.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-205">For more information about **globalization invariant mode** and how to enable it, see [.NET Globalization Invariant Mode](https://github.com/dotnet/runtime/blob/main/docs/design/features/globalization-invariant-mode.md).</span></span>

## <a name="self-contained-deployment"></a><span data-ttu-id="a929b-206">автономное развертывание;</span><span class="sxs-lookup"><span data-stu-id="a929b-206">Self-contained deployment</span></span>

<span data-ttu-id="a929b-207">При публикации автономного развертывания (SCD) пакет SDK для .NET создает исполняемый файл для конкретной платформы.</span><span class="sxs-lookup"><span data-stu-id="a929b-207">When you publish a self-contained deployment (SCD), the .NET SDK creates a platform-specific executable.</span></span> <span data-ttu-id="a929b-208">Публикация SCD включает в себя все необходимые файлы .NET для запуска приложения, но не включает [собственные зависимости .NET](https://github.com/dotnet/core/blob/main/Documentation/prereqs.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-208">Publishing an SCD includes all required .NET files to run your app but it doesn't include the [native dependencies of .NET](https://github.com/dotnet/core/blob/main/Documentation/prereqs.md).</span></span> <span data-ttu-id="a929b-209">Эти зависимости должны присутствовать в системе перед запуском приложения.</span><span class="sxs-lookup"><span data-stu-id="a929b-209">These dependencies must be present on the system before the app runs.</span></span>

<span data-ttu-id="a929b-210">При публикации SCD создается приложение, которое не будет автоматически использовать новейшую версию исправлений безопасности .NET.</span><span class="sxs-lookup"><span data-stu-id="a929b-210">Publishing an SCD creates an app that doesn't roll forward to the latest available .NET security patch.</span></span> <span data-ttu-id="a929b-211">Дополнительные сведения о привязке версий во время компиляции см. в разделе [Накат платформозависимых приложений](../versions/selection.md#self-contained-deployments-include-the-selected-runtime).</span><span class="sxs-lookup"><span data-stu-id="a929b-211">For more information on version binding at compile time, see [Select the .NET version to use](../versions/selection.md#self-contained-deployments-include-the-selected-runtime).</span></span>

<span data-ttu-id="a929b-212">Необходимо использовать следующие параметры командной строки с командой `dotnet publish` для публикации SCD:</span><span class="sxs-lookup"><span data-stu-id="a929b-212">You must use the following switches with the `dotnet publish` command to publish an SCD:</span></span>

- <span data-ttu-id="a929b-213">`-r <RID>` — этот параметр использует идентификатор (RID) для указания целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="a929b-213">`-r <RID>` This switch uses an identifier (RID) to specify the target platform.</span></span> <span data-ttu-id="a929b-214">Список идентификаторов сред выполнения см. в [каталоге идентификаторов сред выполнения](../rid-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-214">For a list of runtime identifiers, see [Runtime Identifier (RID) catalog](../rid-catalog.md).</span></span>

- <span data-ttu-id="a929b-215">`--self-contained true` — этот параметр указывает пакету SDK для .NET Core, что исполняемый файл нужно создать как SCD.</span><span class="sxs-lookup"><span data-stu-id="a929b-215">`--self-contained true` This switch tells the .NET Core SDK to create an executable as an SCD.</span></span>

| <span data-ttu-id="a929b-216">Режим публикации</span><span class="sxs-lookup"><span data-stu-id="a929b-216">Publish Mode</span></span>                   | <span data-ttu-id="a929b-217">Версия пакета SDK</span><span class="sxs-lookup"><span data-stu-id="a929b-217">SDK Version</span></span> | <span data-ttu-id="a929b-218">Get-Help</span><span class="sxs-lookup"><span data-stu-id="a929b-218">Command</span></span>                                                     |
|--------------------------------|-------------|-------------------------------------------------------------|
| <span data-ttu-id="a929b-219">автономное развертывание;</span><span class="sxs-lookup"><span data-stu-id="a929b-219">Self-contained deployment</span></span>      | <span data-ttu-id="a929b-220">2.1</span><span class="sxs-lookup"><span data-stu-id="a929b-220">2.1</span></span>         | `dotnet publish -c Release -r <RID> --self-contained true`  |
|                                | <span data-ttu-id="a929b-221">3.1</span><span class="sxs-lookup"><span data-stu-id="a929b-221">3.1</span></span>         | `dotnet publish -c Release -r <RID> --self-contained true`  |
|                                | <span data-ttu-id="a929b-222">5,0</span><span class="sxs-lookup"><span data-stu-id="a929b-222">5.0</span></span>         | `dotnet publish -c Release -r <RID> --self-contained true`  |

> [!NOTE]
> <span data-ttu-id="a929b-223">Можно уменьшить размер развертывания, включив **инвариантный режим глобализации**.</span><span class="sxs-lookup"><span data-stu-id="a929b-223">You can reduce the total size of your deployment by enabling **globalization invariant mode**.</span></span> <span data-ttu-id="a929b-224">Он подходит для приложений, которые не имеют глобальных параметров и могут использовать соглашения о форматировании, соглашения о регистре, сравнение строк и порядок сортировки для [инвариантного языка и региональных параметров](xref:System.Globalization.CultureInfo.InvariantCulture).</span><span class="sxs-lookup"><span data-stu-id="a929b-224">This mode is useful for applications that are not globally aware and that can use the formatting conventions, casing conventions, and string comparison and sort order of the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture).</span></span> <span data-ttu-id="a929b-225">Дополнительные сведения об **инвариантном режиме глобализации** и том, как его включить, см. в статье об [инвариантном режиме глобализации .NET Core](https://github.com/dotnet/runtime/blob/main/docs/design/features/globalization-invariant-mode.md).</span><span class="sxs-lookup"><span data-stu-id="a929b-225">For more information about **globalization invariant mode** and how to enable it, see [.NET Core Globalization Invariant Mode](https://github.com/dotnet/runtime/blob/main/docs/design/features/globalization-invariant-mode.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="a929b-226">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="a929b-226">See also</span></span>

- [<span data-ttu-id="a929b-227">Общие сведения о развертывании приложений .NET</span><span class="sxs-lookup"><span data-stu-id="a929b-227">.NET Application Deployment Overview</span></span>](index.md)
- [<span data-ttu-id="a929b-228">Каталог идентификаторов сред выполнения (RID) .NET</span><span class="sxs-lookup"><span data-stu-id="a929b-228">.NET Runtime IDentifier (RID) catalog</span></span>](../rid-catalog.md)
