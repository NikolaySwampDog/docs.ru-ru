---
title: Перенос кода из .NET Framework в .NET 5
description: Общие сведения о процессе переноса и инструментах, которые могут оказаться полезными при переносе проектов .NET Framework в .NET 5 (и .NET Core 3.1).
author: adegeo
ms.date: 03/03/2020
no-loc:
- package.config
- PackageReference
ms.openlocfilehash: 8515689cf4a1be917f12bb8f3315cda89988d773
ms.sourcegitcommit: 46cfed35d79d70e08c313b9c664c7e76babab39e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2021
ms.locfileid: "102605052"
---
# <a name="overview-of-porting-from-net-framework-to-net"></a><span data-ttu-id="2c374-103">Общие сведения о переносе кода в .NET Framework из .NET</span><span class="sxs-lookup"><span data-stu-id="2c374-103">Overview of porting from .NET Framework to .NET</span></span>

<span data-ttu-id="2c374-104">В этой статье приводятся общие сведения о том, что следует учитывать при переносе кода с .NET Framework в .NET (прежнее название — .NET Core).</span><span class="sxs-lookup"><span data-stu-id="2c374-104">This article provides an overview of what you should consider when porting your code from .NET Framework to .NET (formerly named .NET Core).</span></span> <span data-ttu-id="2c374-105">Перенос в .NET из .NET Framework для многих проектов выполняется относительно просто.</span><span class="sxs-lookup"><span data-stu-id="2c374-105">Porting to .NET from .NET Framework for many projects is relatively straightforward.</span></span> <span data-ttu-id="2c374-106">Сложность проектов определяет, сколько усилий придется приложить после первоначальной миграции файлов проекта.</span><span class="sxs-lookup"><span data-stu-id="2c374-106">The complexity of your projects dictates how much work you'll do after the initial migration of the project files.</span></span>

<span data-ttu-id="2c374-107">Для проектов, в которых модель приложений доступна в .NET (например, библиотеки, консольные приложения и классические приложения), обычно требуются небольшие изменения.</span><span class="sxs-lookup"><span data-stu-id="2c374-107">Projects where the app-model is available in .NET (such as libraries, console apps, and desktop apps) usually require little change.</span></span> <span data-ttu-id="2c374-108">Проекты, для которых понадобится новая модель приложения, например при переносе в ASP.NET Core из ASP.NET, требуют больше работы.</span><span class="sxs-lookup"><span data-stu-id="2c374-108">Projects that require a new app model, such as moving to ASP.NET Core from ASP.NET, require more work.</span></span> <span data-ttu-id="2c374-109">Многие шаблоны из старой модели приложения имеют эквиваленты, которые можно использовать во время преобразования.</span><span class="sxs-lookup"><span data-stu-id="2c374-109">Many patterns from the old app model have equivalents that can be used during the conversion.</span></span>

## <a name="unavailable-technologies"></a><span data-ttu-id="2c374-110">Недоступные технологии</span><span class="sxs-lookup"><span data-stu-id="2c374-110">Unavailable technologies</span></span>

<span data-ttu-id="2c374-111">В .NET Framework есть несколько технологий, которые отсутствуют в .NET:</span><span class="sxs-lookup"><span data-stu-id="2c374-111">There are a few technologies in .NET Framework that don't exist in .NET:</span></span>

- [<span data-ttu-id="2c374-112">Домены приложений</span><span class="sxs-lookup"><span data-stu-id="2c374-112">Application domains</span></span>](net-framework-tech-unavailable.md#application-domains)

  <span data-ttu-id="2c374-113">Создание дополнительных доменов приложений не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="2c374-113">Creating additional application domains isn't supported.</span></span> <span data-ttu-id="2c374-114">Для изоляции кода используйте в качестве альтернативы отдельные процессы или контейнеры.</span><span class="sxs-lookup"><span data-stu-id="2c374-114">For code isolation, use separate processes or containers as an alternative.</span></span>

- [<span data-ttu-id="2c374-115">Удаленное взаимодействие</span><span class="sxs-lookup"><span data-stu-id="2c374-115">Remoting</span></span>](net-framework-tech-unavailable.md#remoting)

  <span data-ttu-id="2c374-116">Удаленное взаимодействие используется для обмена данными между доменами приложений, которые больше не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="2c374-116">Remoting is used for communicating across application domains, which are no longer supported.</span></span> <span data-ttu-id="2c374-117">Для взаимодействия между процессами вместо удаленного взаимодействия можно применять механизмы межпроцессного взаимодействия (IPC), например класс <xref:System.IO.Pipes> или <xref:System.IO.MemoryMappedFiles.MemoryMappedFile>.</span><span class="sxs-lookup"><span data-stu-id="2c374-117">For communication across processes, consider inter-process communication (IPC) mechanisms as an alternative to remoting, such as the <xref:System.IO.Pipes> class or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

- [<span data-ttu-id="2c374-118">Управление доступом для кода (CAS)</span><span class="sxs-lookup"><span data-stu-id="2c374-118">Code access security (CAS)</span></span>](net-framework-tech-unavailable.md#code-access-security-cas)

  <span data-ttu-id="2c374-119">CAS был методом песочницы, который поддерживается .NET Framework, но не рекомендуется в .NET Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="2c374-119">CAS was a sandboxing technique supported by .NET Framework but deprecated in .NET Framework 4.0.</span></span> <span data-ttu-id="2c374-120">Он был заменен прозрачностью безопасности и не поддерживается в .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-120">It was replaced by Security Transparency and it's not supported in .NET.</span></span> <span data-ttu-id="2c374-121">Вместо него применяйте ограничения безопасности, предусмотренные в операционной системе, например виртуализацию, контейнеры или учетные записи пользователей.</span><span class="sxs-lookup"><span data-stu-id="2c374-121">Instead, use security boundaries provided by the operating system, such as virtualization, containers, or user accounts.</span></span>

- [<span data-ttu-id="2c374-122">Прозрачность безопасности</span><span class="sxs-lookup"><span data-stu-id="2c374-122">Security transparency</span></span>](net-framework-tech-unavailable.md#security-transparency)

  <span data-ttu-id="2c374-123">Подобно CAS, этот метод песочницы больше не рекомендуется для приложений .NET Framework и не поддерживается в .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-123">Similar to CAS, this sandboxing technique is no longer recommended for .NET Framework applications and it's not supported in .NET.</span></span> <span data-ttu-id="2c374-124">Вместо него применяйте ограничения безопасности, предусмотренные в операционной системе, например виртуализацию, контейнеры или учетные записи пользователей.</span><span class="sxs-lookup"><span data-stu-id="2c374-124">Instead, use security boundaries provided by the operating system, such as virtualization, containers, or user accounts.</span></span>
  
- <xref:System.EnterpriseServices?displayProperty=fullName>

  <span data-ttu-id="2c374-125"><xref:System.EnterpriseServices?displayProperty=fullName> (COM+) не поддерживается в .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-125"><xref:System.EnterpriseServices?displayProperty=fullName> (COM+) isn't supported in .NET.</span></span>

- <span data-ttu-id="2c374-126">Windows Workflow Foundation (WF) и Windows Communication Foundation (WCF)</span><span class="sxs-lookup"><span data-stu-id="2c374-126">Windows Workflow Foundation (WF) and Windows Communication Foundation (WCF)</span></span>

  <span data-ttu-id="2c374-127">WF и WCF не поддерживаются в .NET 5+ (включая .NET Core).</span><span class="sxs-lookup"><span data-stu-id="2c374-127">WF and WCF aren't supported in .NET 5+ (including .NET Core).</span></span> <span data-ttu-id="2c374-128">Альтернативные варианты см. в разделах [CoreWF](https://github.com/UiPath/corewf) и [CoreWCF](https://github.com/CoreWCF/CoreWCF).</span><span class="sxs-lookup"><span data-stu-id="2c374-128">For alternatives, see [CoreWF](https://github.com/UiPath/corewf) and [CoreWCF](https://github.com/CoreWCF/CoreWCF).</span></span>

<span data-ttu-id="2c374-129">Дополнительные сведения об этих неподдерживаемых технологиях см. в статье [Технологии .NET Framework, недоступные в .NET Core и .NET 5+](net-framework-tech-unavailable.md).</span><span class="sxs-lookup"><span data-stu-id="2c374-129">For more information about these unsupported technologies, see [.NET Framework technologies unavailable on .NET Core and .NET 5+](net-framework-tech-unavailable.md).</span></span>

## <a name="windows-desktop-technologies"></a><span data-ttu-id="2c374-130">Технологии рабочего стола Windows</span><span class="sxs-lookup"><span data-stu-id="2c374-130">Windows desktop technologies</span></span>

<span data-ttu-id="2c374-131">Многие приложения, созданные для .NET Framework, используют технологии рабочего стола, такие как Windows Forms или Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="2c374-131">Many applications created for .NET Framework use a desktop technology such as Windows Forms or Windows Presentation Foundation (WPF).</span></span> <span data-ttu-id="2c374-132">Как Windows Forms, так и WPF были перенесены в .NET, но остаются технологиями только для Windows.</span><span class="sxs-lookup"><span data-stu-id="2c374-132">Both Windows Forms and WPF have been ported to .NET, but these remain Windows-only technologies.</span></span>

<span data-ttu-id="2c374-133">Перед миграцией приложения Windows Forms или WPF учитывайте следующие зависимости:</span><span class="sxs-lookup"><span data-stu-id="2c374-133">Consider the following dependencies before you migrate a Windows Forms or WPF application:</span></span>

01. <span data-ttu-id="2c374-134">Файлы проекта для .NET используют формат, отличный от формата .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-134">Project files for .NET use a different format than .NET Framework.</span></span>
01. <span data-ttu-id="2c374-135">Проект может использовать API, который недоступен в .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-135">Your project may use an API that isn't available in .NET.</span></span>
01. <span data-ttu-id="2c374-136">Некоторые сторонние элементы управления и библиотеки не перенесены в .NET и доступны только для .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-136">3rd-party controls and libraries may not have been ported to .NET and remain only available to .NET Framework.</span></span>
01. <span data-ttu-id="2c374-137">В проекте используется [технология, которая больше не доступна](net-framework-tech-unavailable.md) в .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-137">Your project uses a [technology that is no longer available](net-framework-tech-unavailable.md) in .NET.</span></span>

<span data-ttu-id="2c374-138">.NET использует версии Windows Forms и WPF с открытым кодом, а также включает улучшения по сравнению с .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-138">.NET uses the open-source versions of Windows Forms and WPF and includes enhancements over .NET Framework.</span></span>

<span data-ttu-id="2c374-139">Руководства по переносу классического приложения на платформу .NET 5 см. в одной из следующих статей:</span><span class="sxs-lookup"><span data-stu-id="2c374-139">For tutorials on migrating your desktop application to .NET 5, see one of the following articles:</span></span>

- [<span data-ttu-id="2c374-140">Перенос приложений WPF из .NET Framework на .NET</span><span class="sxs-lookup"><span data-stu-id="2c374-140">Migrate .NET Framework WPF apps to .NET</span></span>](/dotnet/desktop/wpf/migration/convert-project-from-net-framework?view=netdesktop-5.0&preserve-view=true)
- [<span data-ttu-id="2c374-141">Перенос приложений Windows Forms из .NET Framework на .NET Core</span><span class="sxs-lookup"><span data-stu-id="2c374-141">Migrate .NET Framework Windows Forms apps to .NET</span></span>](/dotnet/desktop/winforms/migration/?view=netdesktop-5.0&preserve-view=true)

## <a name="windows-specific-apis"></a><span data-ttu-id="2c374-142">API для Windows</span><span class="sxs-lookup"><span data-stu-id="2c374-142">Windows-specific APIs</span></span>

<span data-ttu-id="2c374-143">Приложения по-прежнему могут обращаться к собственным библиотекам на платформах, поддерживаемых .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-143">Applications can still P/Invoke native libraries on platforms supported by .NET.</span></span> <span data-ttu-id="2c374-144">Эта технология не ограничивается Windows.</span><span class="sxs-lookup"><span data-stu-id="2c374-144">This technology isn't limited to Windows.</span></span> <span data-ttu-id="2c374-145">Однако если библиотека, на которую вы ссылаетесь, относится к Windows, например _user32.dll_ или _kernal32.dll_, то код работает только в Windows.</span><span class="sxs-lookup"><span data-stu-id="2c374-145">However, if the library you're referencing is Windows-specific, such as a _user32.dll_ or _kernal32.dll_, then the code only works on Windows.</span></span> <span data-ttu-id="2c374-146">Для каждой платформы, в которой должно выполняться приложение, необходимо либо найти отдельные версии, либо сделать код достаточно универсальным для запуска на всех платформах.</span><span class="sxs-lookup"><span data-stu-id="2c374-146">For each platform you want your app to run on, you'll have to either find platform-specific versions, or make your code generic enough to run on all platforms.</span></span>

<span data-ttu-id="2c374-147">Приложение, вероятно, использовало библиотеку, предоставленную вместе с .NET Framework, и это следует учитывать при переносе приложения с .NET Framework в .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-147">When porting an application from .NET Framework to .NET, your application probably used a library provided distributed with the .NET Framework.</span></span> <span data-ttu-id="2c374-148">Многие интерфейсы API, которые были доступны в .NET Framework, не были перенесены в .NET, так как они использовали технологию, относящуюся только к Windows, например реестр Windows или модель рисования GDI+.</span><span class="sxs-lookup"><span data-stu-id="2c374-148">Many APIs that were available in .NET Framework weren't ported to .NET because they relied on Windows-specific technology, such as the Windows Registry or the GDI+ drawing model.</span></span>

<span data-ttu-id="2c374-149">**Пакет обеспечения совместимости Windows** предоставляет большую часть поверхности API .NET Framework в .NET с помощью [пакета NuGet Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility).</span><span class="sxs-lookup"><span data-stu-id="2c374-149">The **Windows Compatibility Pack** provides a large portion of the .NET Framework API surface to .NET and is provided via the [Microsoft.Windows.Compatibility NuGet package](https://www.nuget.org/packages/Microsoft.Windows.Compatibility).</span></span>

<span data-ttu-id="2c374-150">Дополнительные сведения см. в разделе [Перенос кода в .NET с помощью пакета обеспечения совместимости Windows](windows-compat-pack.md).</span><span class="sxs-lookup"><span data-stu-id="2c374-150">For more information, see [Use the Windows Compatibility Pack to port code to .NET](windows-compat-pack.md).</span></span>

## <a name="net-framework-compatibility-mode"></a><span data-ttu-id="2c374-151">Режим совместимости .NET Framework</span><span class="sxs-lookup"><span data-stu-id="2c374-151">.NET Framework compatibility mode</span></span>

<span data-ttu-id="2c374-152">Начиная с .NET Standard 2.0 доступен режим совместимости .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-152">The .NET Framework compatibility mode was introduced in .NET Standard 2.0.</span></span> <span data-ttu-id="2c374-153">Этот режим совместимости позволяет проектам .NET Standard и .NET 5+ (и .NET Core 3.1) ссылаться на библиотеки .NET Framework только в Windows.</span><span class="sxs-lookup"><span data-stu-id="2c374-153">This compatibility mode allows .NET Standard and .NET 5+ (and .NET Core 3.1) projects to reference .NET Framework libraries on Windows-only.</span></span> <span data-ttu-id="2c374-154">Создание ссылок на библиотеки .NET Framework не работает для всех проектов, например, если библиотека использует API WPF, то делает возможным разблокировку множества сценариев переноса.</span><span class="sxs-lookup"><span data-stu-id="2c374-154">Referencing .NET Framework libraries doesn't work for all projects, such as if the library uses Windows Presentation Foundation (WPF) APIs, but it does unblock many porting scenarios.</span></span> <span data-ttu-id="2c374-155">Дополнительные сведения см. в разделе [Анализ зависимостей для переноса кода из .NET Framework в .NET](third-party-deps.md#net-framework-compatibility-mode).</span><span class="sxs-lookup"><span data-stu-id="2c374-155">For more information, see the [Analyze your dependencies to port code from .NET Framework to .NET](third-party-deps.md#net-framework-compatibility-mode).</span></span>

## <a name="cross-platform"></a><span data-ttu-id="2c374-156">Поддержка разных платформ</span><span class="sxs-lookup"><span data-stu-id="2c374-156">Cross-platform</span></span>

<span data-ttu-id="2c374-157">.NET (прежнее название — .NET Core) предназначен для кросс-платформенного использования.</span><span class="sxs-lookup"><span data-stu-id="2c374-157">.NET (formerly known as .NET Core) is designed to be cross-platform.</span></span> <span data-ttu-id="2c374-158">Если код не зависит от технологий Windows, он может работать на других платформах, таких как macOS, Linux и Android.</span><span class="sxs-lookup"><span data-stu-id="2c374-158">If your code doesn't depend on Windows-specific technologies, it may run on other platforms such as macOS, Linux, and Android.</span></span> <span data-ttu-id="2c374-159">К ним относятся такие типы проектов, как:</span><span class="sxs-lookup"><span data-stu-id="2c374-159">This includes project types like:</span></span>

- <span data-ttu-id="2c374-160">Библиотеки</span><span class="sxs-lookup"><span data-stu-id="2c374-160">Libraries</span></span>
- <span data-ttu-id="2c374-161">Средства на основе консоли</span><span class="sxs-lookup"><span data-stu-id="2c374-161">Console-based tools</span></span>
- <span data-ttu-id="2c374-162">Служба автоматизации</span><span class="sxs-lookup"><span data-stu-id="2c374-162">Automation</span></span>
- <span data-ttu-id="2c374-163">Сайты ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2c374-163">ASP.NET sites</span></span>

<span data-ttu-id="2c374-164">Платформа .NET Framework является компонентом только для Windows.</span><span class="sxs-lookup"><span data-stu-id="2c374-164">.NET Framework is a Windows-only component.</span></span> <span data-ttu-id="2c374-165">Если в коде используются технологии или API, предназначенные только для Windows, такие как Windows Forms и Windows Presentation Foundation (WPF), код по-прежнему может выполняться в .NET, но не будет работать в других операционных системах.</span><span class="sxs-lookup"><span data-stu-id="2c374-165">When your code uses Windows-specific technologies or APIs, such as Windows Forms and Windows Presentation Foundation (WPF), the code can still run on .NET but it won't run on other operating systems.</span></span>

<span data-ttu-id="2c374-166">Возможно, вашу библиотеку или консольное приложение можно использовать на разных платформах без существенных изменений.</span><span class="sxs-lookup"><span data-stu-id="2c374-166">It's possible that your library or console-based application can be used cross-platform without changing much.</span></span> <span data-ttu-id="2c374-167">При переносе кода в .NET учитывайте это и протестируйте приложение на других платформах.</span><span class="sxs-lookup"><span data-stu-id="2c374-167">When porting to .NET, you may want to take this into consideration and test your application on other platforms.</span></span>

## <a name="the-future-of-net-standard"></a><span data-ttu-id="2c374-168">Будущее .NET Standard</span><span class="sxs-lookup"><span data-stu-id="2c374-168">The future of .NET Standard</span></span>

<span data-ttu-id="2c374-169">[.NET Standard](https://github.com/dotnet/standard) — это официальная спецификация для API .NET, которые должны быть доступны во всех реализациях .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-169">[.NET Standard](https://github.com/dotnet/standard) is a formal specification of .NET APIs that are available on multiple .NET implementations.</span></span> <span data-ttu-id="2c374-170">.NET Standard была создана для того, чтобы повысить согласованность в экосистеме .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-170">The motivation behind .NET Standard was to establish greater uniformity in the .NET ecosystem.</span></span> <span data-ttu-id="2c374-171">Начиная с .NET 5 реализован другой подход к обеспечению единообразия, в рамках которого во многих сценариях отсутствует необходимость использовать .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="2c374-171">Starting with .NET 5, a different approach to establishing uniformity has been adopted, and this new approach eliminates the need for .NET Standard in many scenarios.</span></span> <span data-ttu-id="2c374-172">Дополнительные сведения см. в статье [.NET 5 и .NET Standard](../../standard/net-standard.md#net-5-and-net-standard).</span><span class="sxs-lookup"><span data-stu-id="2c374-172">For more information, see [.NET 5 and .NET Standard](../../standard/net-standard.md#net-5-and-net-standard).</span></span>

<span data-ttu-id="2c374-173">.NET Standard 2.0 была последней версией, которая поддерживала .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-173">.NET Standard 2.0 was the last version to support .NET Framework.</span></span>

## <a name="tools-to-assist-porting"></a><span data-ttu-id="2c374-174">Средства для поддержки переноса</span><span class="sxs-lookup"><span data-stu-id="2c374-174">Tools to assist porting</span></span>

<span data-ttu-id="2c374-175">Вместо переноса приложения с .NET Framework в .NET вручную можно использовать различные средства для автоматизации некоторых аспектов миграции.</span><span class="sxs-lookup"><span data-stu-id="2c374-175">Instead of manually porting an application from .NET Framework to .NET, you can use different tools to help automate some aspects of the migration.</span></span> <span data-ttu-id="2c374-176">Перенос сложного проекта — это уже непростой процесс.</span><span class="sxs-lookup"><span data-stu-id="2c374-176">Porting a complex project is, in itself, a complex process.</span></span> <span data-ttu-id="2c374-177">Эти средства помогут вам в этом.</span><span class="sxs-lookup"><span data-stu-id="2c374-177">These tools may help in that journey.</span></span>

<span data-ttu-id="2c374-178">Даже если вы используете средство для переноса приложения, ознакомьтесь с [разделом рекомендаций по переносу](#considerations-when-porting) в этой статье.</span><span class="sxs-lookup"><span data-stu-id="2c374-178">Even if you use a tool to help port your application, you should review the [Considerations when porting section](#considerations-when-porting) in this article.</span></span>

### <a name="net-upgrade-assistant"></a><span data-ttu-id="2c374-179">Помощник по обновлению .NET</span><span class="sxs-lookup"><span data-stu-id="2c374-179">.NET Upgrade Assistant</span></span>

<span data-ttu-id="2c374-180">[Помощник по обновлению .NET](upgrade-assistant-overview.md) — это средство командной строки, которое можно запускать для различных приложений платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-180">The [.NET Upgrade Assistant](upgrade-assistant-overview.md) is a command-line tool that can be run on different kinds of .NET Framework apps.</span></span> <span data-ttu-id="2c374-181">Это средство поможет вам в обновлении приложений .NET Framework до .NET 5.</span><span class="sxs-lookup"><span data-stu-id="2c374-181">It's designed to assist with upgrading .NET Framework apps to .NET 5.</span></span> <span data-ttu-id="2c374-182">После запуска средства **в большинстве случаев для завершения миграции приложения потребуются дополнительные действия**.</span><span class="sxs-lookup"><span data-stu-id="2c374-182">After running the tool, **in most cases the app will require more effort to complete the migration**.</span></span> <span data-ttu-id="2c374-183">Средство включает установку анализаторов, которые могут помочь в завершении миграции.</span><span class="sxs-lookup"><span data-stu-id="2c374-183">The tool includes the installation of analyzers that can assist with completing the migration.</span></span> <span data-ttu-id="2c374-184">Это средство работает со следующими типами приложений .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="2c374-184">This tool works on the following types of .NET Framework applications:</span></span>

- <span data-ttu-id="2c374-185">Windows Forms</span><span class="sxs-lookup"><span data-stu-id="2c374-185">Windows Forms</span></span>
- <span data-ttu-id="2c374-186">WPF</span><span class="sxs-lookup"><span data-stu-id="2c374-186">WPF</span></span>
- <span data-ttu-id="2c374-187">ASP.NET MVC 3</span><span class="sxs-lookup"><span data-stu-id="2c374-187">ASP.NET MVC</span></span>
- <span data-ttu-id="2c374-188">Консоль</span><span class="sxs-lookup"><span data-stu-id="2c374-188">Console</span></span>
- <span data-ttu-id="2c374-189">библиотеки классов;</span><span class="sxs-lookup"><span data-stu-id="2c374-189">Class libraries</span></span>

<span data-ttu-id="2c374-190">Это средство использует другие средства, перечисленные в этой статье, и дает рекомендации по процессу миграции.</span><span class="sxs-lookup"><span data-stu-id="2c374-190">This tool uses the other tools listed in this article and guides the migration process.</span></span> <span data-ttu-id="2c374-191">Дополнительные сведения об этом средстве см. в разделе [Обзор помощника по обновлению .NET](upgrade-assistant-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2c374-191">For more information about the tool, see [Overview of the .NET Upgrade Assistant](upgrade-assistant-overview.md).</span></span>

### <a name="try-convert"></a><span data-ttu-id="2c374-192">try-convert</span><span class="sxs-lookup"><span data-stu-id="2c374-192">try-convert</span></span>

<span data-ttu-id="2c374-193">try-convert — глобальное средство .NET, которое может преобразовать проект или все решение в пакет SDK для .NET, включая перенос настольных приложений в .NET 5.</span><span class="sxs-lookup"><span data-stu-id="2c374-193">The try-convert tool is a .NET global tool that can convert a project or entire solution to the .NET SDK, including moving desktop apps to .NET 5.</span></span> <span data-ttu-id="2c374-194">Однако это средство не рекомендуется, если в проекте есть сложный процесс сборки, например пользовательские задачи, целевые объекты или импорты.</span><span class="sxs-lookup"><span data-stu-id="2c374-194">However, this tool isn't recommended if your project has a complicated build process such as custom tasks, targets, or imports.</span></span>

<span data-ttu-id="2c374-195">Дополнительные сведения см. в [репозитории GitHub try-convert](https://github.com/dotnet/try-convert).</span><span class="sxs-lookup"><span data-stu-id="2c374-195">For more information, see the [try-convert GitHub repository](https://github.com/dotnet/try-convert).</span></span>

### <a name="net-portability-analyzer"></a><span data-ttu-id="2c374-196">.NET Portability Analyzer</span><span class="sxs-lookup"><span data-stu-id="2c374-196">.NET Portability Analyzer</span></span>

<span data-ttu-id="2c374-197">Анализатор переносимости .NET — это средство, которое анализирует сборки и предоставляет подробный отчет об отсутствующих API-интерфейсах .NET для приложений или библиотек, которые переносятся на заданные целевые платформы .NET.</span><span class="sxs-lookup"><span data-stu-id="2c374-197">The .NET Portability Analyzer is a tool that analyzes assemblies and provides a detailed report on .NET APIs that are missing for the applications or libraries to be portable on your specified targeted .NET platforms.</span></span>

<span data-ttu-id="2c374-198">Чтобы использовать анализатор переносимости .NET в Visual Studio, установите [расширение из marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span><span class="sxs-lookup"><span data-stu-id="2c374-198">To use the .NET Portability Analyzer in Visual Studio, install the [extension from the marketplace](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer).</span></span>

<span data-ttu-id="2c374-199">См. дополнительные сведения об [анализаторе переносимости .NET](../../standard/analyzers/portability-analyzer.md).</span><span class="sxs-lookup"><span data-stu-id="2c374-199">For more information, see [The .NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md).</span></span>

### <a name="net-api-analyzer"></a><span data-ttu-id="2c374-200">Анализатор .NET API</span><span class="sxs-lookup"><span data-stu-id="2c374-200">.NET API Analyzer</span></span>

<span data-ttu-id="2c374-201">[Анализатор .NET API](../../standard/analyzers/api-analyzer.md) анализирует, используете ли вы API, который выдаст исключение <xref:System.PlatformNotSupportedException> во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="2c374-201">The [.NET API Analyzer](../../standard/analyzers/api-analyzer.md) analyzes whether or not you're using an API that will throw a <xref:System.PlatformNotSupportedException> at run-time.</span></span> <span data-ttu-id="2c374-202">Хотя такая проверка обычно не выполняется при переходе с .NET Framework 4.7.2 и более поздних версий, ее стоит выполнить.</span><span class="sxs-lookup"><span data-stu-id="2c374-202">Although this isn't common if you're moving from .NET Framework 4.7.2 or higher, it's good to check.</span></span> <span data-ttu-id="2c374-203">Дополнительные сведения об API, вызывающих исключения в .NET, см. в статье [API, которые всегда создают исключения в .NET Core](../compatibility/unsupported-apis.md).</span><span class="sxs-lookup"><span data-stu-id="2c374-203">For more information about APIs that throw exceptions on .NET, see [APIs that always throw exceptions on .NET Core](../compatibility/unsupported-apis.md).</span></span>

<span data-ttu-id="2c374-204">Анализатор API поставляется в виде пакета NuGet [Microsoft.DotNet.Analyzers.Compatibility](https://www.nuget.org/packages/Microsoft.DotNet.Analyzers.Compatibility/), который вы добавляете в проект.</span><span class="sxs-lookup"><span data-stu-id="2c374-204">API Analyzer comes as a NuGet package [Microsoft.DotNet.Analyzers.Compatibility](https://www.nuget.org/packages/Microsoft.DotNet.Analyzers.Compatibility/) you add to your project.</span></span>

<span data-ttu-id="2c374-205">См. дополнительные сведения об [анализаторе API .NET](../../standard/analyzers/api-analyzer.md).</span><span class="sxs-lookup"><span data-stu-id="2c374-205">For more information, see [.NET API analyzer](../../standard/analyzers/api-analyzer.md).</span></span>

## <a name="considerations-when-porting"></a><span data-ttu-id="2c374-206">Рекомендации по переносу</span><span class="sxs-lookup"><span data-stu-id="2c374-206">Considerations when porting</span></span>

<span data-ttu-id="2c374-207">При переносе приложения на платформу .NET рассмотрите следующие рекомендации по порядку.</span><span class="sxs-lookup"><span data-stu-id="2c374-207">When porting your application to .NET, consider the following suggestions in order.</span></span>

<span data-ttu-id="2c374-208">✔️ РЕКОМЕНДУЕТСЯ: используйте [помощник по обновлению .NET](upgrade-assistant-overview.md) для переноса проектов.</span><span class="sxs-lookup"><span data-stu-id="2c374-208">✔️ CONSIDER using the [.NET Upgrade Assistant](upgrade-assistant-overview.md) to migrate your projects.</span></span> <span data-ttu-id="2c374-209">Несмотря на то, что этот инструмент находится на этапе предварительной версии, он автоматизирует большинство выполняемых вручную действий, описанных в этой статье, и предоставляет отличную отправную точку для миграции.</span><span class="sxs-lookup"><span data-stu-id="2c374-209">Even though this tool is in preview, it automates most of the manual steps detailed in this article and gives you a great starting point for continuing your migration path.</span></span>

<span data-ttu-id="2c374-210">✔️ РЕКОМЕНДУЕТСЯ: сначала проанализируйте зависимости.</span><span class="sxs-lookup"><span data-stu-id="2c374-210">✔️ CONSIDER examining your dependencies first.</span></span> <span data-ttu-id="2c374-211">Зависимости должны быть нацелены на .NET 5, .NET Standard или .NET Core.</span><span class="sxs-lookup"><span data-stu-id="2c374-211">Your dependencies must target .NET 5, .NET Standard, or .NET Core.</span></span>

<span data-ttu-id="2c374-212">✔️ ОБЯЗАТЕЛЬНО: выполните миграцию из файла NuGet _packages.config_ в параметры [PackageReference](/nuget/consume-packages/package-references-in-project-files) в файле проекта.</span><span class="sxs-lookup"><span data-stu-id="2c374-212">✔️ DO migrate from a NuGet _packages.config_ file to [PackageReference](/nuget/consume-packages/package-references-in-project-files) settings in the project file.</span></span> <span data-ttu-id="2c374-213">Используйте Visual Studio для [преобразования файла _package.config_ ](/nuget/consume-packages/migrate-packages-config-to-package-reference#migration-steps).</span><span class="sxs-lookup"><span data-stu-id="2c374-213">Use Visual Studio to [convert the _package.config_ file](/nuget/consume-packages/migrate-packages-config-to-package-reference#migration-steps).</span></span>

<span data-ttu-id="2c374-214">✔️ РЕКОМЕНДУЕТСЯ: выполните обновление до последнего формата файла проекта, даже если вы еще не можете перенести приложение.</span><span class="sxs-lookup"><span data-stu-id="2c374-214">✔️ CONSIDER upgrading to the latest project file format even if you can't yet port your app.</span></span> <span data-ttu-id="2c374-215">Проекты .NET Framework используют устаревший формат проекта.</span><span class="sxs-lookup"><span data-stu-id="2c374-215">.NET Framework projects use an outdated project format.</span></span> <span data-ttu-id="2c374-216">Хотя новейший формат проекта, известный как проекты в стиле пакета SDK, был создан для .NET Core и более поздних версий, они работают с .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-216">Even though the latest project format, known as SDK-style projects, was created for .NET Core and beyond, they work with .NET Framework.</span></span> <span data-ttu-id="2c374-217">Наличие файла проекта в новейшем формате дает хорошее основание для переноса приложения в будущем.</span><span class="sxs-lookup"><span data-stu-id="2c374-217">Having your project file in the latest format gives you a good basis for porting your app in the future.</span></span>

<span data-ttu-id="2c374-218">✔️ ОБЯЗАТЕЛЬНО: выберите для проекта .NET Framework целевую платформу .NET Framework версии не ранее 4.7.2.</span><span class="sxs-lookup"><span data-stu-id="2c374-218">✔️ DO retarget your .NET Framework project to at least .NET Framework 4.7.2.</span></span> <span data-ttu-id="2c374-219">Это обеспечит доступность альтернативных API-интерфейсов последних версий в случаях, когда .NET Standard не поддерживает существующие API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="2c374-219">This ensures the availability of the latest API alternatives for cases where .NET Standard doesn't support existing APIs.</span></span>

<span data-ttu-id="2c374-220">✔️ РЕКОМЕНДУЕТСЯ: выберите целевую платформу .NET 5 вместо .NET Core 3.1.</span><span class="sxs-lookup"><span data-stu-id="2c374-220">✔️ CONSIDER targeting .NET 5 instead of .NET Core 3.1.</span></span> <span data-ttu-id="2c374-221">Хотя на .NET Core 3.1 распространяется долгосрочная поддержка (LTS), .NET 5 — это последняя версия, а .NET 6 станет версией LTS после выпуска.</span><span class="sxs-lookup"><span data-stu-id="2c374-221">While .NET Core 3.1 is under long-term support (LTS), .NET 5 is the latest and .NET 6 will be LTS when released.</span></span>

<span data-ttu-id="2c374-222">✔️ ОБЯЗАТЕЛЬНО: выберите целевую платформу .NET 5 для проектов **Windows Forms и WPF**.</span><span class="sxs-lookup"><span data-stu-id="2c374-222">✔️ DO target .NET 5 for **Windows Forms and WPF** projects.</span></span> <span data-ttu-id="2c374-223">.NET 5 содержит множество улучшений для классических приложений.</span><span class="sxs-lookup"><span data-stu-id="2c374-223">.NET 5 contains many improvements for Desktop apps.</span></span>

<span data-ttu-id="2c374-224">✔️ РЕКОМЕНДУЕТСЯ: выберите в качестве целевой платформы .NET Standard 2.0 при миграции библиотеки, которая также может использоваться с проектами .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2c374-224">✔️ CONSIDER targeting .NET Standard 2.0 if you're migrating a library that may also be used with .NET Framework projects.</span></span> <span data-ttu-id="2c374-225">Кроме того, можно выбрать для библиотеки несколько целевых платформ — .NET Framework и .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="2c374-225">You can also multitarget your library, targeting both .NET Framework and .NET Standard.</span></span>

<span data-ttu-id="2c374-226">✔️ ОБЯЗАТЕЛЬНО: добавьте ссылку на [пакет NuGet Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility), если после миграции возникнет ошибка отсутствующих API.</span><span class="sxs-lookup"><span data-stu-id="2c374-226">✔️ DO add reference to the [Microsoft.Windows.Compatibility NuGet package](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) if, after migrating, you get errors of missing APIs.</span></span> <span data-ttu-id="2c374-227">Большая часть поверхности API .NET Framework доступна для .NET через пакет NuGet.</span><span class="sxs-lookup"><span data-stu-id="2c374-227">A large portion of the .NET Framework API surface is available to .NET via the NuGet package.</span></span>

## <a name="see-also"></a><span data-ttu-id="2c374-228">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="2c374-228">See also</span></span>

- [<span data-ttu-id="2c374-229">Обзор помощника по обновлению .NET</span><span class="sxs-lookup"><span data-stu-id="2c374-229">Overview of the .NET Upgrade Assistant</span></span>](upgrade-assistant-overview.md)
- [<span data-ttu-id="2c374-230">Миграция с ASP.NET на ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="2c374-230">ASP.NET to ASP.NET Core migration</span></span>](/aspnet/core/migration/proper-to-2x)
- [<span data-ttu-id="2c374-231">Перенос приложений WPF из .NET Framework на .NET</span><span class="sxs-lookup"><span data-stu-id="2c374-231">Migrate .NET Framework WPF apps to .NET</span></span>](/dotnet/desktop/wpf/migration/convert-project-from-net-framework?view=netdesktop-5.0&preserve-view=true)
- [<span data-ttu-id="2c374-232">Перенос приложений Windows Forms из .NET Framework на .NET Core</span><span class="sxs-lookup"><span data-stu-id="2c374-232">Migrate .NET Framework Windows Forms apps to .NET</span></span>](/dotnet/desktop/winforms/migration/?view=netdesktop-5.0&preserve-view=true)
- [<span data-ttu-id="2c374-233">Перенос библиотек .NET Framework в .NET</span><span class="sxs-lookup"><span data-stu-id="2c374-233">Port .NET Framework libraries to .NET</span></span>](libraries.md)
- [<span data-ttu-id="2c374-234">Выбор между .NET 5 и .NET Framework для серверных приложений</span><span class="sxs-lookup"><span data-stu-id="2c374-234">.NET 5 vs. .NET Framework for server apps</span></span>](../../standard/choosing-core-framework-server.md)
