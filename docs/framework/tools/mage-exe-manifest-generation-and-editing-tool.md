---
title: Mage.exe (средство создания и редактирования манифеста)
description: См. сведения о Mage.exe, Инструменте создания и изменения манифестов. Этот инструмент позволяет создавать и редактировать манифесты приложения и развертывания.
ms.date: 12/06/2018
helpviewer_keywords:
- Manifest Generation and Editing tool
- Mage.exe
ms.assetid: 77dfe576-2962-407e-af13-82255df725a1
ms.openlocfilehash: df329d121009e519d2e9efd77dc4d2fbc37d198e
ms.sourcegitcommit: 1dbe25ff484a02025d5c34146e517c236f7161fb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104654015"
---
# <a name="mageexe-manifest-generation-and-editing-tool"></a><span data-ttu-id="45ef6-104">Mage.exe (средство создания и редактирования манифеста)</span><span class="sxs-lookup"><span data-stu-id="45ef6-104">Mage.exe (Manifest Generation and Editing Tool)</span></span>

<span data-ttu-id="45ef6-105">Инструмент создания и изменения манифестов (*Mage.exe*) — это программа командной строки, обеспечивающая создание и изменение манифестов приложений и развертываний.</span><span class="sxs-lookup"><span data-stu-id="45ef6-105">The Manifest Generation and Editing Tool (*Mage.exe*) is a command-line tool that supports the creation and editing of application and deployment manifests.</span></span> <span data-ttu-id="45ef6-106">Как средство командной строки *Mage.exe* можно запустить из пакетных сценариев и других приложений Windows, включая приложения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="45ef6-106">As a command-line tool, *Mage.exe* can be run from both batch scripts and other Windows-based applications, including ASP.NET applications.</span></span>

<span data-ttu-id="45ef6-107">Вместо программы *Mage.exe* можно также использовать графическое приложение *MageUI.exe*.</span><span class="sxs-lookup"><span data-stu-id="45ef6-107">You can also use *MageUI.exe*, a graphical application, instead of *Mage.exe*.</span></span> <span data-ttu-id="45ef6-108">Для получения дополнительной информации см. [MageUI.exe (средство создания и редактирования манифестов, графический клиент)](mageui-exe-manifest-generation-and-editing-tool-graphical-client.md).</span><span class="sxs-lookup"><span data-stu-id="45ef6-108">For more information, see [MageUI.exe (Manifest Generation and Editing Tool, Graphical Client)](mageui-exe-manifest-generation-and-editing-tool-graphical-client.md).</span></span>

<span data-ttu-id="45ef6-109">Эта программа автоматически устанавливается вместе с Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="45ef6-109">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="45ef6-110">Для запуска этого средства используйте [Командную строку разработчика или PowerShell для разработчиков в Visual Studio](/visualstudio/ide/reference/command-prompt-powershell).</span><span class="sxs-lookup"><span data-stu-id="45ef6-110">To run the tool, use [Visual Studio Developer Command Prompt or Visual Studio Developer PowerShell](/visualstudio/ide/reference/command-prompt-powershell).</span></span>

<span data-ttu-id="45ef6-111">В Visual Studio входят две версии *Mage.exe* и *MageUI.exe*.</span><span class="sxs-lookup"><span data-stu-id="45ef6-111">Two versions of *Mage.exe* and *MageUI.exe* are included with Visual Studio.</span></span> <span data-ttu-id="45ef6-112">Чтобы просмотреть сведения о версии, запустите программу *MageUI.exe*, откройте меню **Справка** и выберите пункт **О программе**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-112">To see version information, run *MageUI.exe*, select **Help**, and select **About**.</span></span> <span data-ttu-id="45ef6-113">В данной документации представлено описание программ *Mage.exe* и *MageUI.exe* версии 4.0.x.x.</span><span class="sxs-lookup"><span data-stu-id="45ef6-113">This documentation describes version 4.0.x.x of *Mage.exe* and *MageUI.exe*.</span></span>

## <a name="syntax"></a><span data-ttu-id="45ef6-114">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="45ef6-114">Syntax</span></span>

```console
Mage [commands] [commandOptions]
```

## <a name="parameters"></a><span data-ttu-id="45ef6-115">Параметры</span><span class="sxs-lookup"><span data-stu-id="45ef6-115">Parameters</span></span>

<span data-ttu-id="45ef6-116">В следующей таблице показаны команды, поддерживаемые программой *Mage.exe*.</span><span class="sxs-lookup"><span data-stu-id="45ef6-116">The following table shows the commands supported by *Mage.exe*.</span></span> <span data-ttu-id="45ef6-117">Дополнительные сведения о параметрах этих команд см. в разделах [Параметры команд "New" и "Update"](#new-and-update-command-options) и [Параметры команды "Sign"](#sign-command-options).</span><span class="sxs-lookup"><span data-stu-id="45ef6-117">For more information about the options supported by these commands, see [New and Update command options](#new-and-update-command-options) and [Sign command options](#sign-command-options).</span></span>

|<span data-ttu-id="45ef6-118">Команда</span><span class="sxs-lookup"><span data-stu-id="45ef6-118">Command</span></span>|<span data-ttu-id="45ef6-119">Описание</span><span class="sxs-lookup"><span data-stu-id="45ef6-119">Description</span></span>|
|-------------|-----------------|
|<span data-ttu-id="45ef6-120">**-cc, ClearApplicationCache**</span><span class="sxs-lookup"><span data-stu-id="45ef6-120">**-cc, ClearApplicationCache**</span></span>|<span data-ttu-id="45ef6-121">Очищает кэш загруженных интерактивных приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-121">Clears the downloaded application cache of all online-only applications.</span></span>|
|<span data-ttu-id="45ef6-122">**-n, -New** *fileType [newOptions]*</span><span class="sxs-lookup"><span data-stu-id="45ef6-122">**-n, -New** *fileType [newOptions]*</span></span>|<span data-ttu-id="45ef6-123">Создает новый файл заданного типа.</span><span class="sxs-lookup"><span data-stu-id="45ef6-123">Creates a new file of the given type.</span></span> <span data-ttu-id="45ef6-124">Допустимыми являются следующие типы:</span><span class="sxs-lookup"><span data-stu-id="45ef6-124">Valid types are:</span></span><br /><br /> <span data-ttu-id="45ef6-125">-   `Deployment`: Создает новый манифест развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-125">-   `Deployment`: Creates a new deployment manifest.</span></span><br /><span data-ttu-id="45ef6-126">-   `Application`: Создает новый манифест приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-126">-   `Application`: Creates a new application manifest.</span></span><br /><br /> <span data-ttu-id="45ef6-127">Если для этой команды не заданы никакие дополнительные параметры, она создаст файл соответствующего типа, с соответствующими тегами по умолчанию и значениями атрибутов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-127">If you do not specify any additional parameters with this command, it will create a file of the appropriate type, with appropriate default tags and attribute values.</span></span><br /><br /> <span data-ttu-id="45ef6-128">Чтобы задать имя и путь для нового файла, используется параметр **-ToFile** (см. в следующей таблице).</span><span class="sxs-lookup"><span data-stu-id="45ef6-128">Use the **-ToFile** option (see in the following table) to specify the file name and path of the new file.</span></span><br /><br /> <span data-ttu-id="45ef6-129">Чтобы создать манифест приложения со всеми сборками приложения, добавленными в раздел \<dependency> манифеста, используется параметр **-FromDirectory** (см. в следующей таблице).</span><span class="sxs-lookup"><span data-stu-id="45ef6-129">Use the **-FromDirectory** option (see in the following table) to create an application manifest with all of the assemblies for an application added to the \<dependency> section of the manifest.</span></span>|
|<span data-ttu-id="45ef6-130">**-u, -Update** *[filePath] [updateOptions]*</span><span class="sxs-lookup"><span data-stu-id="45ef6-130">**-u, -Update** *[filePath] [updateOptions]*</span></span>|<span data-ttu-id="45ef6-131">Вносит одно или несколько изменений в файл манифеста.</span><span class="sxs-lookup"><span data-stu-id="45ef6-131">Makes one or more changes to a manifest file.</span></span> <span data-ttu-id="45ef6-132">Задавать тип редактируемого файла не требуется.</span><span class="sxs-lookup"><span data-stu-id="45ef6-132">You do not have to specify the type of file that you are editing.</span></span> <span data-ttu-id="45ef6-133">Программа Mage.exe проверит файл, используя набор эвристик, и определит, является ли он манифестом развертывания или манифестом приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-133">Mage.exe will examine the file by using a set of heuristics and determine whether it is a deployment manifest or an application manifest.</span></span><br /><br /> <span data-ttu-id="45ef6-134">Если файл уже подписан с помощью сертификата, при использовании параметра **-Update** блок подписи ключа будет удален.</span><span class="sxs-lookup"><span data-stu-id="45ef6-134">If you have already signed a file with a certificate, **-Update** will remove the key signature block.</span></span> <span data-ttu-id="45ef6-135">Это обусловлено тем, что подпись ключа содержит хэш файла и изменение файла делает хэш недействительным.</span><span class="sxs-lookup"><span data-stu-id="45ef6-135">This is because the key signature contains a hash of the file, and modifying the file renders the hash invalid.</span></span><br /><br /> <span data-ttu-id="45ef6-136">Чтобы задать имя и путь нового файла вместо перезаписи существующего файла, используется параметр **-ToFile** (см. в следующей таблице).</span><span class="sxs-lookup"><span data-stu-id="45ef6-136">Use the **-ToFile** option (see in the following table) to specify a new file name and path instead of overwriting the existing file.</span></span>|
|<span data-ttu-id="45ef6-137">**-s, -Sign** `[signOptions]`</span><span class="sxs-lookup"><span data-stu-id="45ef6-137">**-s, -Sign** `[signOptions]`</span></span>|<span data-ttu-id="45ef6-138">Использует для подписывания файла пару ключей или сертификат X509.</span><span class="sxs-lookup"><span data-stu-id="45ef6-138">Uses a key pair or X509 certificate to sign a file.</span></span> <span data-ttu-id="45ef6-139">Подписи вставляются в файлы в виде XML-элементов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-139">Signatures are inserted as XML elements inside of the files.</span></span><br /><br /> <span data-ttu-id="45ef6-140">При подписывании манифеста, задающего значение **-TimestampUri** , необходимо подключение к Интернету.</span><span class="sxs-lookup"><span data-stu-id="45ef6-140">You must be connected to the Internet when signing a manifest that specifies a **-TimestampUri** value.</span></span>|
|<span data-ttu-id="45ef6-141">**-ver, -Verify** *[manifest-filename]*</span><span class="sxs-lookup"><span data-stu-id="45ef6-141">**-ver, -Verify** *[manifest-filename]*</span></span>|<span data-ttu-id="45ef6-142">Проверяет, правильно ли подписан манифест.</span><span class="sxs-lookup"><span data-stu-id="45ef6-142">Verifies that the manifest is signed correctly.</span></span> <span data-ttu-id="45ef6-143">Невозможно использовать с другими командами.</span><span class="sxs-lookup"><span data-stu-id="45ef6-143">Cannot be combined with other commands.</span></span> <br/><br/><span data-ttu-id="45ef6-144">**Доступна в .NET Framework 4.7 и более поздних версиях.**</span><span class="sxs-lookup"><span data-stu-id="45ef6-144">**Available in .NET Framework 4.7 and later versions.**</span></span>|
|<span data-ttu-id="45ef6-145">**-h, -?, -Help** *[verbose]*</span><span class="sxs-lookup"><span data-stu-id="45ef6-145">**-h, -?, -Help** *[verbose]*</span></span>|<span data-ttu-id="45ef6-146">Описывает все доступные команды и их параметры.</span><span class="sxs-lookup"><span data-stu-id="45ef6-146">Describes all of the available commands and their options.</span></span> <span data-ttu-id="45ef6-147">Задайте параметр `verbose` , чтобы получить подробные справочные сведения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-147">Specify `verbose` to get detailed help.</span></span>|

## <a name="new-and-update-command-options"></a><span data-ttu-id="45ef6-148">Параметры команд "New" и "Update"</span><span class="sxs-lookup"><span data-stu-id="45ef6-148">New and Update command options</span></span>

<span data-ttu-id="45ef6-149">В следующей таблице приведены параметры команд `-New` и `-Update`:</span><span class="sxs-lookup"><span data-stu-id="45ef6-149">The following table shows the options supported by the `-New` and `-Update` commands:</span></span>

|<span data-ttu-id="45ef6-150">Параметры</span><span class="sxs-lookup"><span data-stu-id="45ef6-150">Options</span></span>|<span data-ttu-id="45ef6-151">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="45ef6-151">Default Value</span></span>|<span data-ttu-id="45ef6-152">Применение</span><span class="sxs-lookup"><span data-stu-id="45ef6-152">Applies To</span></span>|<span data-ttu-id="45ef6-153">Описание</span><span class="sxs-lookup"><span data-stu-id="45ef6-153">Description</span></span>|
|-------------|-------------------|----------------|-----------------|
|<span data-ttu-id="45ef6-154">**-a, -Algorithm**</span><span class="sxs-lookup"><span data-stu-id="45ef6-154">**-a, -Algorithm**</span></span>|<span data-ttu-id="45ef6-155">sha1RSA</span><span class="sxs-lookup"><span data-stu-id="45ef6-155">sha1RSA</span></span>|<span data-ttu-id="45ef6-156">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-156">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-157">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-157">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-158">Определяет алгоритм создания дайджестов зависимостей.</span><span class="sxs-lookup"><span data-stu-id="45ef6-158">Specifies the algorithm to generate dependency digests with.</span></span> <span data-ttu-id="45ef6-159">Допустимые значения: "sha256RSA" или "sha1RSA".</span><span class="sxs-lookup"><span data-stu-id="45ef6-159">Value must be "sha256RSA" or "sha1RSA.</span></span><br /><br /> <span data-ttu-id="45ef6-160">Используется вместе с параметром "-Update".</span><span class="sxs-lookup"><span data-stu-id="45ef6-160">Use with the "-Update" option.</span></span> <span data-ttu-id="45ef6-161">При использовании параметра "-Sign" этот параметр не учитывается</span><span class="sxs-lookup"><span data-stu-id="45ef6-161">This option is ignored when using the "-Sign" option</span></span>|
|<span data-ttu-id="45ef6-162">**-appc, -AppCodeBase** `manifestReference`</span><span class="sxs-lookup"><span data-stu-id="45ef6-162">**-appc, -AppCodeBase** `manifestReference`</span></span>||<span data-ttu-id="45ef6-163">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-163">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-164">Вставляет в файл манифеста приложения ссылку на URL-адрес или путь к файлу.</span><span class="sxs-lookup"><span data-stu-id="45ef6-164">Inserts a URL or file path reference to the application manifest file.</span></span> <span data-ttu-id="45ef6-165">Этим значением должен быть полный путь к манифесту приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-165">This value must be the full path to the application manifest.</span></span>|
|<span data-ttu-id="45ef6-166">**-appm, -AppManifest** `manifestPath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-166">**-appm, -AppManifest** `manifestPath`</span></span>||<span data-ttu-id="45ef6-167">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-167">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-168">Вставляет ссылку на манифест приложения в соответствующий манифест развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-168">Inserts a reference to a deployment's application manifest into its deployment manifest.</span></span><br /><br /> <span data-ttu-id="45ef6-169">Файл, указанный в `manifestPath`, должен существовать, в противном случае программа *Mage.exe* выдаст ошибку.</span><span class="sxs-lookup"><span data-stu-id="45ef6-169">The file indicated by `manifestPath` must exist, or *Mage.exe* will issue an error.</span></span> <span data-ttu-id="45ef6-170">Если файл, указанный в `manifestPath`, не является манифестом приложения, программа *Mage.exe* выдаст ошибку.</span><span class="sxs-lookup"><span data-stu-id="45ef6-170">If the file referenced by `manifestPath` is not an application manifest, *Mage.exe* will issue an error.</span></span>|
|<span data-ttu-id="45ef6-171">**-cf, -CertFile** `filePath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-171">**-cf, -CertFile** `filePath`</span></span>||<span data-ttu-id="45ef6-172">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-172">All file types.</span></span>|<span data-ttu-id="45ef6-173">Задает местонахождение цифрового сертификата X509 для подписания манифеста или файла лицензии.</span><span class="sxs-lookup"><span data-stu-id="45ef6-173">Specifies the location of an X509 digital certificate for signing a manifest or license file.</span></span> <span data-ttu-id="45ef6-174">Этот параметр может использоваться в сочетании с параметром **-Password**, если для сертификата требуется пароль файлов обмена персональными данными (PFX).</span><span class="sxs-lookup"><span data-stu-id="45ef6-174">This option can be used in conjunction with the **-Password** option if the certificate requires a password for Personal Information Exchange (PFX) files.</span></span> <span data-ttu-id="45ef6-175">Начиная с .NET Framework 4.7, при отсутствии закрытого ключа в файле требуется сочетание параметров **-CryptoProvider** и **-KeyContainer**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-175">Starting with .NET Framework 4.7, if the file does not contain a private key, a combination of the **-CryptoProvider** and **-KeyContainer** options is required.</span></span><br/><br/><span data-ttu-id="45ef6-176">Начиная с .NET Framework 4.6.2, *Mage.exe* подписывает манифесты с использованием сертификатов CNG и CAPI.</span><span class="sxs-lookup"><span data-stu-id="45ef6-176">Starting with .NET Framework 4.6.2, *Mage.exe* signs manifests with CNG as well as CAPI certificates.</span></span>|
|<span data-ttu-id="45ef6-177">**-ch, -CertHash** `hashSignature`</span><span class="sxs-lookup"><span data-stu-id="45ef6-177">**-ch, -CertHash** `hashSignature`</span></span>||<span data-ttu-id="45ef6-178">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-178">All file types.</span></span>|<span data-ttu-id="45ef6-179">Хэш цифрового сертификата, хранящегося в хранилище личных сертификатов на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="45ef6-179">The hash of a digital certificate stored in the personal certificate store of the client computer.</span></span> <span data-ttu-id="45ef6-180">Соответствует строке отпечатка цифрового сертификата, отображаемого в консоли сертификатов Windows.</span><span class="sxs-lookup"><span data-stu-id="45ef6-180">This corresponds to the Thumbprint string of a digital certificate viewed in the Windows Certificates Console.</span></span><br /><br /> <span data-ttu-id="45ef6-181">Параметр`hashSignature` может быть задан или в верхнем, или в нижнем регистре, и может предоставляться либо как единая строка, либо в виде всех октетов отпечатка, разделенных пробелами, и всего отпечатка, заключенного в кавычки.</span><span class="sxs-lookup"><span data-stu-id="45ef6-181">`hashSignature` can be either uppercase or lowercase, and can be supplied either as a single string, or with each octet of the Thumbprint separated by spaces and the entire Thumbprint enclosed in quotation marks.</span></span>|
|<span data-ttu-id="45ef6-182">**-csp, -CryptoProvider** `provider-name`</span><span class="sxs-lookup"><span data-stu-id="45ef6-182">**-csp, -CryptoProvider** `provider-name`</span></span>||<span data-ttu-id="45ef6-183">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-183">All file types.</span></span>|<span data-ttu-id="45ef6-184">Указывает имя поставщика служб шифрования (CSP), содержащего контейнер закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="45ef6-184">Specifies the name of a cryptographic service provider (CSP) that contains the private key container.</span></span> <span data-ttu-id="45ef6-185">Для этого параметра требуется параметр **-KeyContainer**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-185">This option requires the **-KeyContainer** option.</span></span><br/><br/><span data-ttu-id="45ef6-186">Данный параметр доступен, начиная с .NET Framework 4.7.</span><span class="sxs-lookup"><span data-stu-id="45ef6-186">This option is available starting with .NET Framework 4.7.</span></span>|
|<span data-ttu-id="45ef6-187">**-fd, -FromDirectory** `directoryPath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-187">**-fd, -FromDirectory** `directoryPath`</span></span>||<span data-ttu-id="45ef6-188">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-188">Application manifests.</span></span>|<span data-ttu-id="45ef6-189">Заполняет манифест приложения описаниями всех сборок и файлов, найденных в каталоге `directoryPath`и всех его подкаталогах, где `directoryPath` — это каталог, содержащий развертываемое приложение.</span><span class="sxs-lookup"><span data-stu-id="45ef6-189">Populates the application manifest with descriptions of all assemblies and files found in `directoryPath`, including all subdirectories, where `directoryPath` is the directory that contains the application that you want to deploy.</span></span> <span data-ttu-id="45ef6-190">Для каждого файла в этом каталоге *Mage.exe* определяет, является ли такой файл сборкой или статическим файлом.</span><span class="sxs-lookup"><span data-stu-id="45ef6-190">For each file in the directory, *Mage.exe* decides whether the file is an assembly or a static file.</span></span> <span data-ttu-id="45ef6-191">Если файл является сборкой, программа добавляет в приложение тег `<dependency>` и атрибут `installFrom` , указав имя, базу кода и версию сборки.</span><span class="sxs-lookup"><span data-stu-id="45ef6-191">If it is an assembly, it adds a `<dependency>` tag and `installFrom` attribute to the application with the assembly's name, code base, and version.</span></span> <span data-ttu-id="45ef6-192">Если это статический файл, программа добавляет тег `<file>` .</span><span class="sxs-lookup"><span data-stu-id="45ef6-192">If it is a static file, it adds a `<file>` tag.</span></span> <span data-ttu-id="45ef6-193">*Mage.exe* также будет использовать простой набор эвристик, чтобы определить главный исполняемый файл приложения, и пометит его в манифесте как точку входа приложения ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="45ef6-193">*Mage.exe* will also use a simple set of heuristics to detect the main executable for the application, and will mark it as the ClickOnce application's entry point in the manifest.</span></span><br /><br /> <span data-ttu-id="45ef6-194">*Mage.exe* никогда не помечает файл как файл "данных".</span><span class="sxs-lookup"><span data-stu-id="45ef6-194">*Mage.exe* will never automatically mark a file as a "data" file.</span></span> <span data-ttu-id="45ef6-195">Это необходимо сделать вручную.</span><span class="sxs-lookup"><span data-stu-id="45ef6-195">You must do this manually.</span></span> <span data-ttu-id="45ef6-196">Дополнительные сведения см. в разделе [Практическое руководство. включить файл данных в приложение ClickOnce](/visualstudio/deployment/how-to-include-a-data-file-in-a-clickonce-application).</span><span class="sxs-lookup"><span data-stu-id="45ef6-196">For more information, see [How to: Include a Data File in a ClickOnce Application](/visualstudio/deployment/how-to-include-a-data-file-in-a-clickonce-application).</span></span><br /><br /> <span data-ttu-id="45ef6-197">*Mage.exe* также создает хэш для каждого файла в зависимости от его размера.</span><span class="sxs-lookup"><span data-stu-id="45ef6-197">*Mage.exe* also generates a hash for each file based on its size.</span></span> <span data-ttu-id="45ef6-198">Технология ClickOnce использует эти хэши, чтобы гарантировать отсутствие злонамеренного изменения файлов развертывания с момента создания манифеста.</span><span class="sxs-lookup"><span data-stu-id="45ef6-198">ClickOnce uses these hashes to ensure that no one has tampered with the deployment's files since the manifest was created.</span></span> <span data-ttu-id="45ef6-199">При изменении любого из файлов развертывания можно запустить *Mage.exe* с командой **-Update** и параметром **-FromDirectory**, и она обновит хэши и версии сборки для всех указанных файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-199">If any of the files in your deployment change, you can run *Mage.exe* with the **-Update** command and the **-FromDirectory** option, and it will update the hashes and assembly versions of all referenced files.</span></span><br /><br /> <span data-ttu-id="45ef6-200">**-FromDirectory** включает все файлы во всех подкаталогах, найденных в каталоге `directoryPath`.</span><span class="sxs-lookup"><span data-stu-id="45ef6-200">**-FromDirectory** will include all files in all subdirectories found within `directoryPath`.</span></span><br /><br /> <span data-ttu-id="45ef6-201">При использовании параметра **-FromDirectory** с командой **-Update** программа *Mage.exe* удалит из манифеста приложения все файлы, которые больше не существуют в каталоге.</span><span class="sxs-lookup"><span data-stu-id="45ef6-201">If you use **-FromDirectory** with the **-Update** command, *Mage.exe* will remove any files in the application manifest that no longer exist in the directory.</span></span>|
|<span data-ttu-id="45ef6-202">**-if, -IconFile**  `filePath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-202">**-if, -IconFile**  `filePath`</span></span>||<span data-ttu-id="45ef6-203">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-203">Application manifests.</span></span>|<span data-ttu-id="45ef6-204">Задает полный путь к ICO-файлу значка.</span><span class="sxs-lookup"><span data-stu-id="45ef6-204">Specifies the full path to an .ICO icon file.</span></span> <span data-ttu-id="45ef6-205">Этот значок отображается рядом с именем приложения в меню "Пуск" и в разделе "Установка или удаление программ".</span><span class="sxs-lookup"><span data-stu-id="45ef6-205">This icon appears beside your application name in the start menu, and in its Add-or-Remove Programs entry.</span></span> <span data-ttu-id="45ef6-206">Если значок не задан, используется значок по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="45ef6-206">If no icon is provided, a default icon is used.</span></span>|
|<span data-ttu-id="45ef6-207">**-ip, -IncludeProviderURL**  `url`</span><span class="sxs-lookup"><span data-stu-id="45ef6-207">**-ip, -IncludeProviderURL**  `url`</span></span>|<span data-ttu-id="45ef6-208">true</span><span class="sxs-lookup"><span data-stu-id="45ef6-208">true</span></span>|<span data-ttu-id="45ef6-209">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-209">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-210">Указывает, содержит ли манифест развертывания значение расположения обновления, заданное параметром **-ProviderURL**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-210">Indicates whether the deployment manifest includes the update location value set by **-ProviderURL**.</span></span>|
|<span data-ttu-id="45ef6-211">**-i, -Install** `willInstall`</span><span class="sxs-lookup"><span data-stu-id="45ef6-211">**-i, -Install** `willInstall`</span></span>|<span data-ttu-id="45ef6-212">true</span><span class="sxs-lookup"><span data-stu-id="45ef6-212">true</span></span>|<span data-ttu-id="45ef6-213">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-213">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-214">Указывает, должно ли приложение ClickOnce устанавливаться на локальном компьютере или оно должно запускаться из Интернета.</span><span class="sxs-lookup"><span data-stu-id="45ef6-214">Indicates whether or not the ClickOnce application should install onto the local computer, or whether it should run from the Web.</span></span> <span data-ttu-id="45ef6-215">При установке приложения оно появляется в меню **Пуск** в ОС Windows.</span><span class="sxs-lookup"><span data-stu-id="45ef6-215">Installing an application gives that application a presence in the Windows **Start** menu.</span></span> <span data-ttu-id="45ef6-216">Допустимыми являются значения "true" или "t" и "false" или "f".</span><span class="sxs-lookup"><span data-stu-id="45ef6-216">Valid values are "true" or "t", and "false" or "f".</span></span><br /><br /> <span data-ttu-id="45ef6-217">Если задан параметр **-MinVersion** и пользователь использует версию, более раннюю по сравнению с **-MinVersion** , этот параметр вызывает принудительную установку приложения, независимо от значения, переданного в **-Install**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-217">If you specify the **-MinVersion** option, and a user has a version less than **-MinVersion** installed, it will force the application to install, regardless of the value that you pass to **-Install**.</span></span><br /><br /> <span data-ttu-id="45ef6-218">Данный параметр невозможно использовать одновременно с параметром **-BrowserHosted** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-218">This option cannot be used with the **-BrowserHosted** option.</span></span> <span data-ttu-id="45ef6-219">Попытка задать оба параметра в одном манифесте приведет к ошибке.</span><span class="sxs-lookup"><span data-stu-id="45ef6-219">Attempting to specify both for the same manifest will result in an error.</span></span>|
|<span data-ttu-id="45ef6-220">**-kc, -KeyContainer** `name`</span><span class="sxs-lookup"><span data-stu-id="45ef6-220">**-kc, -KeyContainer** `name`</span></span>||<span data-ttu-id="45ef6-221">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-221">All file types.</span></span>|<span data-ttu-id="45ef6-222">Указывает контейнер ключа, содержащий имя закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="45ef6-222">Specifies the key container that contains the name of the private key.</span></span> <span data-ttu-id="45ef6-223">Для этого параметра требуется параметр **CryptoProvider**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-223">This option requires the **CryptoProvider** option.</span></span><br/><br/><span data-ttu-id="45ef6-224">Данный параметр доступен, начиная с .NET Framework 4.7.</span><span class="sxs-lookup"><span data-stu-id="45ef6-224">This option is available starting with .NET Framework 4.7.</span></span>|
|<span data-ttu-id="45ef6-225">**-mv, -MinVersion**  `[version]`</span><span class="sxs-lookup"><span data-stu-id="45ef6-225">**-mv, -MinVersion**  `[version]`</span></span>|<span data-ttu-id="45ef6-226">Версия, указанная в манифесте развертывания ClickOnce и заданная флагом **-Version** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-226">The version listed in the ClickOnce deployment manifest as specified by the **-Version** flag.</span></span>|<span data-ttu-id="45ef6-227">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-227">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-228">Минимальная версия этого приложения, которую может запустить пользователь.</span><span class="sxs-lookup"><span data-stu-id="45ef6-228">The minimum version of this application a user can run.</span></span> <span data-ttu-id="45ef6-229">Этот флаг делает названную версию приложения обязательным обновлением.</span><span class="sxs-lookup"><span data-stu-id="45ef6-229">This flag makes the named version of your application a required update.</span></span> <span data-ttu-id="45ef6-230">Если разработчик выпускает версию своего программного продукта с обновлением, включающим в себя критическое изменение или устранение критической уязвимости в системе безопасности, с помощью этого флага можно указать обязательность установки этого обновления и невозможность для пользователя дальнейшего использования предыдущих версий приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-230">If you release a version of your product with an update to a breaking change or a critical security flaw, you can use this flag to specify that this update must be installed, and that the user cannot continue to run earlier versions.</span></span><br /><br /> <span data-ttu-id="45ef6-231">Семантика параметра`version` совпадает с семантикой аргумента флага **-Version** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-231">`version` has the same semantics as the argument to the **-Version** flag.</span></span>|
|<span data-ttu-id="45ef6-232">**-n, -Name** `nameString`</span><span class="sxs-lookup"><span data-stu-id="45ef6-232">**-n, -Name** `nameString`</span></span>|<span data-ttu-id="45ef6-233">Развертывание</span><span class="sxs-lookup"><span data-stu-id="45ef6-233">Deploy</span></span>|<span data-ttu-id="45ef6-234">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-234">All file types.</span></span>|<span data-ttu-id="45ef6-235">Имя, используемое для идентификации приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-235">The name that is used to identify the application.</span></span> <span data-ttu-id="45ef6-236">Приложение ClickOnce будет использовать это имя для идентификации приложения в меню **Пуск** (если для приложения настроена автоматическая установка) и в диалоговых окнах повышения уровня разрешений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-236">ClickOnce will use this name to identify the application in the **Start** menu (if the application is configured to install itself) and in Permission Elevation dialog boxes.</span></span> <span data-ttu-id="45ef6-237">**Примечание.**  Если при обновлении существующего манифеста вы не указали имя издателя с помощью этого параметра, *Mage.exe* обновляет манифест, используя имя организации, заданное на компьютере.</span><span class="sxs-lookup"><span data-stu-id="45ef6-237">**Note:**  If you are updating an existing manifest and you do not specify a publisher name with this option, *Mage.exe* updates the manifest with the organization name defined on the computer.</span></span> <span data-ttu-id="45ef6-238">Чтобы использовать другое имя, следует обязательно задать требуемое имя издателя с помощью этого параметра.</span><span class="sxs-lookup"><span data-stu-id="45ef6-238">To use a different name, make sure to use this option and specify the desired publisher name.</span></span>|
|<span data-ttu-id="45ef6-239">**-pwd, -Password** `passwd`</span><span class="sxs-lookup"><span data-stu-id="45ef6-239">**-pwd, -Password** `passwd`</span></span>||<span data-ttu-id="45ef6-240">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-240">All file types.</span></span>|<span data-ttu-id="45ef6-241">Пароль, используемый для подписания манифеста с помощью цифрового сертификата.</span><span class="sxs-lookup"><span data-stu-id="45ef6-241">The password that is used for signing a manifest with a digital certificate.</span></span> <span data-ttu-id="45ef6-242">Должен использоваться вместе с параметром **-CertFile** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-242">Must be used in conjunction with the **-CertFile** option.</span></span>|
|<span data-ttu-id="45ef6-243">**-p, Processor** `processorValue`</span><span class="sxs-lookup"><span data-stu-id="45ef6-243">**-p, Processor** `processorValue`</span></span>|<span data-ttu-id="45ef6-244">Msil</span><span class="sxs-lookup"><span data-stu-id="45ef6-244">Msil</span></span>|<span data-ttu-id="45ef6-245">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-245">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-246">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-246">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-247">Архитектура микропроцессора, на которой будет выполняться это развертывание.</span><span class="sxs-lookup"><span data-stu-id="45ef6-247">The microprocessor architecture on which this distribution will run.</span></span> <span data-ttu-id="45ef6-248">Это значение обязательно при подготовке одной или нескольких установок, компиляция сборок которых для конкретного микропроцессора была выполнена заранее.</span><span class="sxs-lookup"><span data-stu-id="45ef6-248">This value is required if you are preparing one or more installations whose assemblies have been precompiled for a specific microprocessor.</span></span> <span data-ttu-id="45ef6-249">Допустимые значения включают `msil`, `x86`, `ia64`и `amd64`.</span><span class="sxs-lookup"><span data-stu-id="45ef6-249">Valid values include `msil`, `x86`, `ia64`, and `amd64`.</span></span> <span data-ttu-id="45ef6-250">`msil` — это промежуточный язык Майкрософт, который означает, что все сборки являются независимыми от платформы, и среда CLR будет выполнять их JIT-компиляцию при первом запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-250">`msil` is Microsoft intermediate language, which means all of your assemblies are platform-independent, and the common language runtime (CLR) will just-in-time compile them when your application is first run.</span></span>|
|<span data-ttu-id="45ef6-251">**-pu,** **-ProviderURL** `url`</span><span class="sxs-lookup"><span data-stu-id="45ef6-251">**-pu,** **-ProviderURL** `url`</span></span>||<span data-ttu-id="45ef6-252">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-252">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-253">Задает URL-адрес, который приложение ClickOnce будет использовать для обновлений приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-253">Specifies the URL which ClickOnce will examine for application updates.</span></span>|
|<span data-ttu-id="45ef6-254">**-pub, -Publisher** `publisherName`</span><span class="sxs-lookup"><span data-stu-id="45ef6-254">**-pub, -Publisher** `publisherName`</span></span>||<span data-ttu-id="45ef6-255">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-255">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-256">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-256">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-257">Добавляет имя издателя в элемент описания либо манифеста развертывания, либо манифеста приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-257">Adds the publisher name to the description element of either the deployment or application manifest.</span></span> <span data-ttu-id="45ef6-258">При использовании этого параметра для манифеста приложения должен быть также задан параметр **-UseManifestForTrust** со значением "true" или "t", в противном случае этот параметр вызовет ошибку.</span><span class="sxs-lookup"><span data-stu-id="45ef6-258">When used on an application manifest, **-UseManifestForTrust** must also be specified with a value of "true" or "t"; otherwise, this parameter will raise an error.</span></span>|
|<span data-ttu-id="45ef6-259">**-s, -SupportURL**  `url`</span><span class="sxs-lookup"><span data-stu-id="45ef6-259">**-s, -SupportURL**  `url`</span></span>||<span data-ttu-id="45ef6-260">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-260">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-261">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-261">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-262">Указывает ссылку, которая появляется в диалоговом окне "Установка и удаление программ" для приложения ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="45ef6-262">Specifies the link that appears in Add or Remove Programs for the ClickOnce application.</span></span>|
|<span data-ttu-id="45ef6-263">**-ti, -TimestampUri** `uri`</span><span class="sxs-lookup"><span data-stu-id="45ef6-263">**-ti, -TimestampUri** `uri`</span></span>||<span data-ttu-id="45ef6-264">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-264">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-265">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-265">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-266">URL-адрес службы цифровых отметок времени.</span><span class="sxs-lookup"><span data-stu-id="45ef6-266">The URL of a digital timestamping service.</span></span> <span data-ttu-id="45ef6-267">Установка меток времени в манифестах позволяет избежать повторной подписи манифестов, когда срок действия цифрового сертификата истекает до развертывания следующей версии приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-267">Timestamping the manifests prevents you from having to re-sign the manifests should your digital certificate expire before you deploy the next version of your application.</span></span> <span data-ttu-id="45ef6-268">Дополнительные сведения см. в разделе [Участники программы корневых сертификатов Windows](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn265983(v=ws.11)).</span><span class="sxs-lookup"><span data-stu-id="45ef6-268">For more information, see [Windows root certificate program members](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn265983(v=ws.11)).</span></span>|
|<span data-ttu-id="45ef6-269">**-t, -ToFile** `filePath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-269">**-t, -ToFile** `filePath`</span></span>|<span data-ttu-id="45ef6-270">— New:</span><span class="sxs-lookup"><span data-stu-id="45ef6-270">-   New:</span></span><br /><span data-ttu-id="45ef6-271">— Deployment: deploy.application</span><span class="sxs-lookup"><span data-stu-id="45ef6-271">-   Deployment: deploy.application</span></span><br /><span data-ttu-id="45ef6-272">— Application: application.exe.manifest</span><span class="sxs-lookup"><span data-stu-id="45ef6-272">-   Application: application.exe.manifest</span></span><br /><span data-ttu-id="45ef6-273">— Update:</span><span class="sxs-lookup"><span data-stu-id="45ef6-273">-   Update:</span></span><br /><span data-ttu-id="45ef6-274">— Входной файл.</span><span class="sxs-lookup"><span data-stu-id="45ef6-274">-   The input file.</span></span>|<span data-ttu-id="45ef6-275">Все типы файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-275">All file types.</span></span>|<span data-ttu-id="45ef6-276">Задает выходной путь для созданного или измененного файла.</span><span class="sxs-lookup"><span data-stu-id="45ef6-276">Specifies the output path of the file that has been created or modified.</span></span><br /><br /> <span data-ttu-id="45ef6-277">Если при использовании команды **-New** не задан параметр **-ToFile**, результат записывается в текущий рабочий каталог.</span><span class="sxs-lookup"><span data-stu-id="45ef6-277">If **-ToFile** is not supplied when you use **-New**, the output is written to the current working directory.</span></span> <span data-ttu-id="45ef6-278">Если при использовании команды **-Update** не задан параметр **-ToFile**, программа *Mage.exe* записывает файл обратно во входной файл.</span><span class="sxs-lookup"><span data-stu-id="45ef6-278">If **-ToFile** is not supplied when you use **-Update**, *Mage.exe* will write the file back to the input file.</span></span>|
|<span data-ttu-id="45ef6-279">**-tr, -TrustLevel** `level`</span><span class="sxs-lookup"><span data-stu-id="45ef6-279">**-tr, -TrustLevel** `level`</span></span>|<span data-ttu-id="45ef6-280">Зависит от зоны, в которой находится URL-адрес приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-280">Based on the zone in which the application URL resides.</span></span>|<span data-ttu-id="45ef6-281">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-281">Application manifests.</span></span>|<span data-ttu-id="45ef6-282">Уровень доверия, предоставляемый приложению на клиентских компьютерах.</span><span class="sxs-lookup"><span data-stu-id="45ef6-282">The level of trust to grant the application on client computers.</span></span> <span data-ttu-id="45ef6-283">Возможными значениями являются "Internet", "Intranet" и "FullTrust".</span><span class="sxs-lookup"><span data-stu-id="45ef6-283">Values include "Internet", "Intranet", and "FullTrust".</span></span>|
|<span data-ttu-id="45ef6-284">**-um, -UseManifestForTrust** `willUseForTrust`</span><span class="sxs-lookup"><span data-stu-id="45ef6-284">**-um, -UseManifestForTrust** `willUseForTrust`</span></span>|<span data-ttu-id="45ef6-285">False</span><span class="sxs-lookup"><span data-stu-id="45ef6-285">False</span></span>|<span data-ttu-id="45ef6-286">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-286">Application manifests.</span></span>|<span data-ttu-id="45ef6-287">Определяет, будет ли использоваться цифровая подпись манифеста приложения для принятия решений о доверии при выполнении приложения на клиенте.</span><span class="sxs-lookup"><span data-stu-id="45ef6-287">Specifies whether the digital signature of the application manifest will be used for making trust decisions when the application runs on the client.</span></span> <span data-ttu-id="45ef6-288">Задание значения "true" или "t" указывает, что для решений о доверии будет использоваться манифест приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-288">Specifying "true" or "t" indicates that the application manifest will be used for trust decisions.</span></span> <span data-ttu-id="45ef6-289">Задание значения "false" или "f" указывает, что будет использоваться подпись манифеста развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-289">Specifying "false" or "f" indicates that the signature of the deployment manifest will be used.</span></span>|
|<span data-ttu-id="45ef6-290">**-v, -Version** `versionNumber`</span><span class="sxs-lookup"><span data-stu-id="45ef6-290">**-v, -Version** `versionNumber`</span></span>|<span data-ttu-id="45ef6-291">1.0.0.0</span><span class="sxs-lookup"><span data-stu-id="45ef6-291">1.0.0.0</span></span>|<span data-ttu-id="45ef6-292">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-292">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-293">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-293">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-294">Версия развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-294">The version of the deployment.</span></span> <span data-ttu-id="45ef6-295">Аргумент должен быть строкой допустимой версии в формате "*N.N.N.N*", где "*N*" — это 32-разрядное целое число без знака.</span><span class="sxs-lookup"><span data-stu-id="45ef6-295">The argument must be a valid version string of the format "*N.N.N.N*", where "*N*" is an unsigned 32-bit integer.</span></span>|
|<span data-ttu-id="45ef6-296">**-wpf, -WPFBrowserApp**  `isWPFApp`</span><span class="sxs-lookup"><span data-stu-id="45ef6-296">**-wpf, -WPFBrowserApp**  `isWPFApp`</span></span>|<span data-ttu-id="45ef6-297">false</span><span class="sxs-lookup"><span data-stu-id="45ef6-297">false</span></span>|<span data-ttu-id="45ef6-298">Манифесты приложений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-298">Application manifests.</span></span><br /><br /> <span data-ttu-id="45ef6-299">Манифесты развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-299">Deployment manifests.</span></span>|<span data-ttu-id="45ef6-300">Этот флаг используется, только если приложение является приложением Windows Presentation Foundation (WPF), размещаемым в Internet Explorer, а не автономным исполняемым файлом.</span><span class="sxs-lookup"><span data-stu-id="45ef6-300">Use this flag only if the application is a Windows Presentation Foundation (WPF) application that will be hosted inside of Internet Explorer, and is not a stand-alone executable.</span></span> <span data-ttu-id="45ef6-301">Допустимыми являются значения "true" или "t" и "false" или "f".</span><span class="sxs-lookup"><span data-stu-id="45ef6-301">Valid values are "true" or "t", and "false" or "f".</span></span><br /><br /> <span data-ttu-id="45ef6-302">Для манифестов приложений вставляет атрибут `hostInBrowser` под элементом `entryPoint` манифеста приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-302">For application manifests, inserts the `hostInBrowser` attribute under the `entryPoint` element of the application manifest.</span></span><br /><br /> <span data-ttu-id="45ef6-303">Для манифестов развертывания задает значение атрибута `install` для элемента `deployment` как "false" и сохраняет манифест развертывания с расширением XBAP.</span><span class="sxs-lookup"><span data-stu-id="45ef6-303">For deployment manifests, sets the `install` attribute on the `deployment` element to false, and saves the deployment manifest with a .xbap extension.</span></span> <span data-ttu-id="45ef6-304">Задание этого аргумента вместе с аргументом **-Install** приводит к ошибке, так как приложение, размещенное в браузере, не может быть устанавливаемым, автономным приложением.</span><span class="sxs-lookup"><span data-stu-id="45ef6-304">Specifying this argument along with the **-Install** argument produces an error, because a browser-hosted application cannot be an installed, offline application.</span></span>|

## <a name="sign-command-options"></a><span data-ttu-id="45ef6-305">Параметры команды "Sign"</span><span class="sxs-lookup"><span data-stu-id="45ef6-305">Sign command options</span></span>

<span data-ttu-id="45ef6-306">В следующей таблице указаны параметры команды `-Sign` , применяемой ко всем типам файлов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-306">The following table shows the options supported by the `-Sign` command, which apply to all types of files.</span></span>

|<span data-ttu-id="45ef6-307">Параметры</span><span class="sxs-lookup"><span data-stu-id="45ef6-307">Options</span></span>|<span data-ttu-id="45ef6-308">Описание</span><span class="sxs-lookup"><span data-stu-id="45ef6-308">Description</span></span>|
|-------------|-----------------|
|<span data-ttu-id="45ef6-309">**-cf, -CertFile** `filePath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-309">**-cf, -CertFile** `filePath`</span></span>|<span data-ttu-id="45ef6-310">Задает местонахождение цифрового сертификата для подписания манифеста.</span><span class="sxs-lookup"><span data-stu-id="45ef6-310">Specifies The location of a digital certificate for signing a manifest.</span></span> <span data-ttu-id="45ef6-311">Этот параметр может использоваться в сочетании с параметром **-Password**, если для сертификата требуется пароль файлов обмена персональными данными (PFX).</span><span class="sxs-lookup"><span data-stu-id="45ef6-311">This option can be used in conjunction with the **-Password** option if the certificate requires a password for Personal Information Exchange (PFX) files.</span></span> <span data-ttu-id="45ef6-312">Начиная с .NET Framework 4.7, при отсутствии закрытого ключа в файле требуется сочетание параметров **-CryptoProvider** и **-KeyContainer**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-312">Starting with .NET Framework 4.7, if the file does not contain a private key, a combination of the **-CryptoProvider** and **-KeyContainer** options is required.</span></span><br/><br/><span data-ttu-id="45ef6-313">Начиная с .NET Framework 4.6.2, *Mage.exe* подписывает манифесты с использованием сертификатов CNG и CAPI.</span><span class="sxs-lookup"><span data-stu-id="45ef6-313">Starting with .NET Framework 4.6.2, *Mage.exe* signs manifests with CNG as well as CAPI certificates.</span></span>|
|<span data-ttu-id="45ef6-314">**-ch, -CertHash** `hashSignature`</span><span class="sxs-lookup"><span data-stu-id="45ef6-314">**-ch, -CertHash** `hashSignature`</span></span>|<span data-ttu-id="45ef6-315">Хэш цифрового сертификата, хранящегося в хранилище личных сертификатов на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="45ef6-315">The hash of a digital certificate stored in the personal certificate store of the client computer.</span></span> <span data-ttu-id="45ef6-316">Соответствует свойству отпечатка цифрового сертификата, отображаемого в консоли сертификатов Windows.</span><span class="sxs-lookup"><span data-stu-id="45ef6-316">This corresponds to the Thumbprint property of a digital certificate viewed in the Windows Certificates Console.</span></span><br /><br /> <span data-ttu-id="45ef6-317">Параметр`hashSignature` может быть задан или в верхнем, или в нижнем регистре, и может предоставляться либо как единая строка, либо в виде всех октетов отпечатка, разделенных пробелами, и всего отпечатка, заключенного в кавычки.</span><span class="sxs-lookup"><span data-stu-id="45ef6-317">`hashSignature` can be either uppercase or lowercase, and can be supplied either as a single string or with each octet of the Thumbprint separated by spaces and the entire Thumbprint enclosed in quotation marks.</span></span>|
<span data-ttu-id="45ef6-318">**-csp, -CryptoProvider** `provider-name`</span><span class="sxs-lookup"><span data-stu-id="45ef6-318">**-csp, -CryptoProvider** `provider-name`</span></span>|<span data-ttu-id="45ef6-319">Указывает имя поставщика служб шифрования (CSP), содержащего контейнер закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="45ef6-319">Specifies the name of a cryptographic service provider (CSP) that contains the private key container.</span></span> <span data-ttu-id="45ef6-320">Для этого параметра требуется параметр **-KeyContainer**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-320">This option requires the **-KeyContainer** option.</span></span><br/><br/><span data-ttu-id="45ef6-321">Данный параметр доступен, начиная с .NET Framework 4.7.</span><span class="sxs-lookup"><span data-stu-id="45ef6-321">This option is available starting with .NET Framework 4.7.</span></span>|
|<span data-ttu-id="45ef6-322">**-kc, -KeyContainer** `name`</span><span class="sxs-lookup"><span data-stu-id="45ef6-322">**-kc, -KeyContainer** `name`</span></span>|<span data-ttu-id="45ef6-323">Указывает контейнер ключа, содержащий имя закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="45ef6-323">Specifies the key container that contains the name of the private key.</span></span> <span data-ttu-id="45ef6-324">Для этого параметра требуется параметр **CryptoProvider**.</span><span class="sxs-lookup"><span data-stu-id="45ef6-324">This option requires the **CryptoProvider** option.</span></span><br/><br/><span data-ttu-id="45ef6-325">Данный параметр доступен, начиная с .NET Framework 4.7.</span><span class="sxs-lookup"><span data-stu-id="45ef6-325">This option is available starting with .NET Framework 4.7.</span></span>|
|<span data-ttu-id="45ef6-326">**-pwd, -Password** `passwd`</span><span class="sxs-lookup"><span data-stu-id="45ef6-326">**-pwd, -Password** `passwd`</span></span>|<span data-ttu-id="45ef6-327">Пароль, используемый для подписания манифеста с помощью цифрового сертификата.</span><span class="sxs-lookup"><span data-stu-id="45ef6-327">The password that is used for signing a manifest with a digital certificate.</span></span> <span data-ttu-id="45ef6-328">Должен использоваться вместе с параметром **-CertFile** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-328">Must be used in conjunction with the **-CertFile** option.</span></span>|
|<span data-ttu-id="45ef6-329">**-t, -ToFile** `filePath`</span><span class="sxs-lookup"><span data-stu-id="45ef6-329">**-t, -ToFile** `filePath`</span></span>|<span data-ttu-id="45ef6-330">Задает выходной путь для созданного или измененного файла.</span><span class="sxs-lookup"><span data-stu-id="45ef6-330">Specifies the output path of the file that has been created or modified.</span></span>|

## <a name="remarks"></a><span data-ttu-id="45ef6-331">Примечания</span><span class="sxs-lookup"><span data-stu-id="45ef6-331">Remarks</span></span>

<span data-ttu-id="45ef6-332">Все аргументы программы *Mage.exe* не зависят от регистра символов.</span><span class="sxs-lookup"><span data-stu-id="45ef6-332">All arguments to *Mage.exe* are case-insensitive.</span></span> <span data-ttu-id="45ef6-333">Перед командами и параметрами должен быть поставлен дефис (-) или косая черта (/).</span><span class="sxs-lookup"><span data-stu-id="45ef6-333">Commands and options can be prefixed with a dash (-) or a forward slash (/).</span></span>

<span data-ttu-id="45ef6-334">Все аргументы, используемые с командой **-Sign** , всегда можно использовать вместе с командой **-New** или **-Update** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-334">All of the arguments used with the **-Sign** command can be used at any time with the **-New** or **-Update** commands as well.</span></span> <span data-ttu-id="45ef6-335">Следующие команды являются эквивалентными.</span><span class="sxs-lookup"><span data-stu-id="45ef6-335">The following commands are equivalent.</span></span>

```console
mage -Sign c:\HelloWorldDeployment\HelloWorld.deploy -CertFile cert.pfx
mage -Update c:\HelloWorldDeployment\HelloWorld.deploy -CertFile cert.pfx
```

> [!NOTE]
> <span data-ttu-id="45ef6-336">Начиная с .NET Framework 4.6.2, также поддерживаются сертификаты CNG.</span><span class="sxs-lookup"><span data-stu-id="45ef6-336">Beginning with .NET Framework version 4.6.2, CNG certificates are also supported.</span></span>

 <span data-ttu-id="45ef6-337">Подписание — это последняя задача, которую должен выполнить разработчик, поскольку для проверки правильности подписи документа подписанный документ использует хэш файла.</span><span class="sxs-lookup"><span data-stu-id="45ef6-337">Signing is the last task you should perform, because a signed document uses a hash of the file to verify that the signature is valid for the document.</span></span> <span data-ttu-id="45ef6-338">При внесении в файл каких-либо изменений разработчик должен снова подписать этот файл.</span><span class="sxs-lookup"><span data-stu-id="45ef6-338">If you make any changes to a signed file, you must sign it again.</span></span> <span data-ttu-id="45ef6-339">Если подписывается документ, который уже был подписан, *Mage.exe* заменяет старую подпись новой.</span><span class="sxs-lookup"><span data-stu-id="45ef6-339">If you sign a document that was previously signed, *Mage.exe* will replace the old signature with the new.</span></span>

 <span data-ttu-id="45ef6-340">При использовании параметра **-AppManifest** для заполнения манифеста развертывания программа *Mage.exe* предполагает, что манифест приложения будет находиться в том же каталоге, что и манифест развертывания, в подкаталоге, название которого соответствует текущей версии развертывания, и соответствующим образом настраивает манифест развертывания.</span><span class="sxs-lookup"><span data-stu-id="45ef6-340">When you use the **-AppManifest** option to populate a deployment manifest, *Mage.exe* will assume that your application manifest will reside in the same directory as the deployment manifest within a subdirectory named after the current deployment version, and will configure your deployment manifest appropriately.</span></span> <span data-ttu-id="45ef6-341">Если манифест приложения будет находиться в другом месте, для указания альтернативного расположения можно использовать параметр **-AppCodeBase** .</span><span class="sxs-lookup"><span data-stu-id="45ef6-341">If your application manifest will reside elsewhere, use the **-AppCodeBase** option to set the alternate location.</span></span>

 <span data-ttu-id="45ef6-342">Перед развертыванием приложения манифест развертывания и манифест приложения должны быть подписаны.</span><span class="sxs-lookup"><span data-stu-id="45ef6-342">Your deployment and application manifest must be signed before you deploy your application.</span></span> <span data-ttu-id="45ef6-343">Руководство по подписанию документов см. в разделе [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview).</span><span class="sxs-lookup"><span data-stu-id="45ef6-343">For guidance about signing manifests, see [Trusted Application Deployment Overview](/visualstudio/deployment/trusted-application-deployment-overview).</span></span>

 <span data-ttu-id="45ef6-344">Параметр **-TrustLevel** для манифестов приложений описывает набор разрешений, необходимых приложению для выполнения на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="45ef6-344">The **-TrustLevel** option for application manifests describes the permission set an application requires to run on the client computer.</span></span> <span data-ttu-id="45ef6-345">По умолчанию уровень доверия, назначаемый приложениями, зависит от *зоны* , в которой находится URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="45ef6-345">By default, applications are assigned a trust level based on the *zone* in which their URL resides.</span></span> <span data-ttu-id="45ef6-346">Приложения, развертываемые в корпоративной сети, обычно помещаются в зоне интрасети, а приложения, развертываемые через Интернет, размещаются в зоне Интернета.</span><span class="sxs-lookup"><span data-stu-id="45ef6-346">Applications deployed over a corporate network are generally placed in the Intranet zone, while those deployed over the Internet are placed in the Internet zone.</span></span> <span data-ttu-id="45ef6-347">Обе зоны безопасности налагают на приложение ограничения доступа к локальным ресурсам, при этом зона интрасети предоставляет чуть больше прав, чем зона Интернета.</span><span class="sxs-lookup"><span data-stu-id="45ef6-347">Both security zones place restrictions on the application's access to local resources, with the Intranet zone slightly more permissive than the Internet zone.</span></span> <span data-ttu-id="45ef6-348">В зоне полного доверия (FullTrust) приложениям предоставляется полный доступ к локальным ресурсам компьютера.</span><span class="sxs-lookup"><span data-stu-id="45ef6-348">The FullTrust zone gives applications complete access to a computer's local resources.</span></span> <span data-ttu-id="45ef6-349">Если для помещения приложения в эту зону используется параметр **-TrustLevel**, менеджер доверия среды CLR предложит пользователю решить, следует ли предоставить повышенный уровень доверия.</span><span class="sxs-lookup"><span data-stu-id="45ef6-349">If you use the **-TrustLevel** option to place an application in this zone, the Trust Manager component of the CLR will prompt the user to decide whether they want to grant this higher level of trust.</span></span> <span data-ttu-id="45ef6-350">Если приложение развертывается в корпоративной сети, можно использовать развертывание доверенных приложений, чтобы повысить уровень доверия приложения без участия пользователя.</span><span class="sxs-lookup"><span data-stu-id="45ef6-350">If you are deploying your application over a corporate network, you can use Trusted Application Deployment to raise the trust level of the application without prompting the user.</span></span>

 <span data-ttu-id="45ef6-351">Манифесты приложений также поддерживают настраиваемые разделы доверия.</span><span class="sxs-lookup"><span data-stu-id="45ef6-351">Application manifests also support custom trust sections.</span></span> <span data-ttu-id="45ef6-352">Это помогает приложению соблюдать принцип безопасности (запрос минимально необходимых разрешений), позволяя настроить манифест на запрос только конкретных разрешений, которые требуются приложению для работы.</span><span class="sxs-lookup"><span data-stu-id="45ef6-352">This helps your application obey the security principle of requesting least permission, as you can configure the manifest to demand only those specific permissions that the application requires in order to execute.</span></span> <span data-ttu-id="45ef6-353">*Mage.exe* не поддерживает прямое добавление настраиваемого раздела доверия.</span><span class="sxs-lookup"><span data-stu-id="45ef6-353">*Mage.exe* does not directly support adding a custom trust section.</span></span> <span data-ttu-id="45ef6-354">Такой раздел можно добавить с помощью текстового редактора, средства синтаксического анализа XML или графического средства *MageUI.exe*.</span><span class="sxs-lookup"><span data-stu-id="45ef6-354">You can add one using a text editor, an XML parser, or the graphical tool *MageUI.exe*.</span></span> <span data-ttu-id="45ef6-355">Дополнительные сведения об использовании *MageUI.exe* для добавления настраиваемых разделов доверия см. в разделе [MageUI.exe (инструмент создания и изменения манифестов, графический клиент)](mageui-exe-manifest-generation-and-editing-tool-graphical-client.md).</span><span class="sxs-lookup"><span data-stu-id="45ef6-355">For more information about how to use *MageUI.exe* to add custom trust sections, see [MageUI.exe (Manifest Generation and Editing Tool, Graphical Client)](mageui-exe-manifest-generation-and-editing-tool-graphical-client.md).</span></span>

<span data-ttu-id="45ef6-356">Visual Studio 2017 включает *Mage.exe* версии 4.6.1.</span><span class="sxs-lookup"><span data-stu-id="45ef6-356">Visual Studio 2017 includes version 4.6.1 of *Mage.exe*.</span></span> <span data-ttu-id="45ef6-357">Манифесты, созданные с помощью этой версии *Mage.exe*, предназначены для .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="45ef6-357">Manifests created with this version of *Mage.exe* target .NET Framework 4.</span></span> <span data-ttu-id="45ef6-358">Для работы в более ранних версиях платформы .NET Framework используйте более раннюю версию *Mage.exe*.</span><span class="sxs-lookup"><span data-stu-id="45ef6-358">To target older versions of the .NET Framework, use an earlier version of *Mage.exe*.</span></span>

<span data-ttu-id="45ef6-359">Если вы добавляете или удаляете сборки из существующего манифеста или повторно подписываете существующий манифест, программа *Mage.exe* не обновляет манифест до .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="45ef6-359">When you add or remove assemblies from an existing manifest, or re-sign an existing manifest, *Mage.exe* does not update the manifest to target .NET Framework 4.</span></span>

<span data-ttu-id="45ef6-360">В следующих таблицах показаны эти возможности и ограничения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-360">The following tables show these features and restrictions:</span></span>

|<span data-ttu-id="45ef6-361">Версия манифеста</span><span class="sxs-lookup"><span data-stu-id="45ef6-361">Manifest version</span></span>|<span data-ttu-id="45ef6-362">Операция</span><span class="sxs-lookup"><span data-stu-id="45ef6-362">Operation</span></span>|<span data-ttu-id="45ef6-363">Mage v2.0</span><span class="sxs-lookup"><span data-stu-id="45ef6-363">Mage v2.0</span></span>|<span data-ttu-id="45ef6-364">Mage v4.0</span><span class="sxs-lookup"><span data-stu-id="45ef6-364">Mage v4.0</span></span>|
|----------------------|---------------|---------------|---------------|
|<span data-ttu-id="45ef6-365">Манифест для приложений, предназначенных для .NET Framework версии 2.0 или 3.x</span><span class="sxs-lookup"><span data-stu-id="45ef6-365">Manifest for applications targeting version 2.0 or 3.x of the .NET Framework</span></span>|<span data-ttu-id="45ef6-366">Открыть</span><span class="sxs-lookup"><span data-stu-id="45ef6-366">Open</span></span>|<span data-ttu-id="45ef6-367">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-367">OK</span></span>|<span data-ttu-id="45ef6-368">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-368">OK</span></span>|
||<span data-ttu-id="45ef6-369">Закрыть</span><span class="sxs-lookup"><span data-stu-id="45ef6-369">Close</span></span>|<span data-ttu-id="45ef6-370">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-370">OK</span></span>|<span data-ttu-id="45ef6-371">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-371">OK</span></span>|
||<span data-ttu-id="45ef6-372">Сохранение</span><span class="sxs-lookup"><span data-stu-id="45ef6-372">Save</span></span>|<span data-ttu-id="45ef6-373">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-373">OK</span></span>|<span data-ttu-id="45ef6-374">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-374">OK</span></span>|
||<span data-ttu-id="45ef6-375">Повторно подписать</span><span class="sxs-lookup"><span data-stu-id="45ef6-375">Re-sign</span></span>|<span data-ttu-id="45ef6-376">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-376">OK</span></span>|<span data-ttu-id="45ef6-377">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-377">OK</span></span>|
||<span data-ttu-id="45ef6-378">Новый</span><span class="sxs-lookup"><span data-stu-id="45ef6-378">New</span></span>|<span data-ttu-id="45ef6-379">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-379">OK</span></span>|<span data-ttu-id="45ef6-380">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="45ef6-380">Not supported</span></span>|
||<span data-ttu-id="45ef6-381">Обновить (см. ниже)</span><span class="sxs-lookup"><span data-stu-id="45ef6-381">Update (see below)</span></span>|<span data-ttu-id="45ef6-382">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-382">OK</span></span>|<span data-ttu-id="45ef6-383">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-383">OK</span></span>|
|<span data-ttu-id="45ef6-384">Манифест для приложений, предназначенных для .NET Framework версии 4</span><span class="sxs-lookup"><span data-stu-id="45ef6-384">Manifest for applications targeting version 4 of the .NET Framework</span></span>|<span data-ttu-id="45ef6-385">Открыть</span><span class="sxs-lookup"><span data-stu-id="45ef6-385">Open</span></span>|<span data-ttu-id="45ef6-386">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-386">OK</span></span>|<span data-ttu-id="45ef6-387">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-387">OK</span></span>|
||<span data-ttu-id="45ef6-388">Закрыть</span><span class="sxs-lookup"><span data-stu-id="45ef6-388">Close</span></span>|<span data-ttu-id="45ef6-389">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-389">OK</span></span>|<span data-ttu-id="45ef6-390">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-390">OK</span></span>|
||<span data-ttu-id="45ef6-391">Сохранение</span><span class="sxs-lookup"><span data-stu-id="45ef6-391">Save</span></span>|<span data-ttu-id="45ef6-392">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-392">OK</span></span>|<span data-ttu-id="45ef6-393">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-393">OK</span></span>|
||<span data-ttu-id="45ef6-394">Повторно подписать</span><span class="sxs-lookup"><span data-stu-id="45ef6-394">Re-sign</span></span>|<span data-ttu-id="45ef6-395">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-395">OK</span></span>|<span data-ttu-id="45ef6-396">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-396">OK</span></span>|
||<span data-ttu-id="45ef6-397">Оператор new</span><span class="sxs-lookup"><span data-stu-id="45ef6-397">New</span></span>|<span data-ttu-id="45ef6-398">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="45ef6-398">Not supported</span></span>|<span data-ttu-id="45ef6-399">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-399">OK</span></span>|
||<span data-ttu-id="45ef6-400">Обновить (см. ниже)</span><span class="sxs-lookup"><span data-stu-id="45ef6-400">Update (see below)</span></span>|<span data-ttu-id="45ef6-401">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="45ef6-401">Not supported</span></span>|<span data-ttu-id="45ef6-402">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-402">OK</span></span>|

|<span data-ttu-id="45ef6-403">Версия манифеста</span><span class="sxs-lookup"><span data-stu-id="45ef6-403">Manifest version</span></span>|<span data-ttu-id="45ef6-404">Обновить сведения об операции</span><span class="sxs-lookup"><span data-stu-id="45ef6-404">Update Operation Details</span></span>|<span data-ttu-id="45ef6-405">Mage v2.0</span><span class="sxs-lookup"><span data-stu-id="45ef6-405">Mage v2.0</span></span>|<span data-ttu-id="45ef6-406">Mage v4.0</span><span class="sxs-lookup"><span data-stu-id="45ef6-406">Mage v4.0</span></span>|
|----------------------|------------------------------|---------------|---------------|
|<span data-ttu-id="45ef6-407">Манифест для приложений, предназначенных для .NET Framework версии 2.0 или 3.x</span><span class="sxs-lookup"><span data-stu-id="45ef6-407">Manifest for applications targeting version 2.0 or 3.x of the .NET Framework</span></span>|<span data-ttu-id="45ef6-408">Изменить сборку</span><span class="sxs-lookup"><span data-stu-id="45ef6-408">Modify an assembly</span></span>|<span data-ttu-id="45ef6-409">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-409">OK</span></span>|<span data-ttu-id="45ef6-410">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-410">OK</span></span>|
||<span data-ttu-id="45ef6-411">Добавить сборку</span><span class="sxs-lookup"><span data-stu-id="45ef6-411">Add an assembly</span></span>|<span data-ttu-id="45ef6-412">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-412">OK</span></span>|<span data-ttu-id="45ef6-413">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-413">OK</span></span>|
||<span data-ttu-id="45ef6-414">Удалить сборку</span><span class="sxs-lookup"><span data-stu-id="45ef6-414">Remove an assembly</span></span>|<span data-ttu-id="45ef6-415">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-415">OK</span></span>|<span data-ttu-id="45ef6-416">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-416">OK</span></span>|
|<span data-ttu-id="45ef6-417">Манифест для приложений, предназначенных для .NET Framework версии 4</span><span class="sxs-lookup"><span data-stu-id="45ef6-417">Manifest for applications targeting version 4 of the .NET Framework</span></span>|<span data-ttu-id="45ef6-418">Изменить сборку</span><span class="sxs-lookup"><span data-stu-id="45ef6-418">Modify an assembly</span></span>|<span data-ttu-id="45ef6-419">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="45ef6-419">Not supported</span></span>|<span data-ttu-id="45ef6-420">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-420">OK</span></span>|
||<span data-ttu-id="45ef6-421">Добавить сборку</span><span class="sxs-lookup"><span data-stu-id="45ef6-421">Add an assembly</span></span>|<span data-ttu-id="45ef6-422">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="45ef6-422">Not supported</span></span>|<span data-ttu-id="45ef6-423">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-423">OK</span></span>|
||<span data-ttu-id="45ef6-424">Удалить сборку</span><span class="sxs-lookup"><span data-stu-id="45ef6-424">Remove an assembly</span></span>|<span data-ttu-id="45ef6-425">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="45ef6-425">Not supported</span></span>|<span data-ttu-id="45ef6-426">ОК</span><span class="sxs-lookup"><span data-stu-id="45ef6-426">OK</span></span>|

 <span data-ttu-id="45ef6-427">Программа Mage.exe создает новые манифесты, предназначенные для клиентского профиля .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="45ef6-427">Mage.exe creates new manifests that target the .NET Framework 4 Client Profile.</span></span> <span data-ttu-id="45ef6-428">Приложения ClickOnce, предназначенные для клиентского профиля .NET Framework 4, могут также работать и в полной версии .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="45ef6-428">ClickOnce applications that target the .NET Framework 4 Client Profile can run on both the .NET Framework 4 Client Profile and the full version of the .NET Framework 4.</span></span> <span data-ttu-id="45ef6-429">Если приложение предназначено для полной версии .NET Framework 4 и не может выполняться в клиентском профиле .NET Framework 4, удалите клиентский элемент `<framework>` с помощью текстового редактора и повторно подпишите манифест.</span><span class="sxs-lookup"><span data-stu-id="45ef6-429">If your application targets the full version of the .NET Framework 4 and cannot run on the .NET Framework 4 Client Profile, remove the client `<framework>` element by using a text editor and re-sign the manifest.</span></span>

<span data-ttu-id="45ef6-430">Ниже приведен пример элемента `<framework>`, предназначенного для клиентского профиля .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="45ef6-430">The following is a sample `<framework>` element that targets the .NET Framework 4 Client Profile:</span></span>

```xml
<framework targetVersion="4.0" profile="client" supportedRuntime="4.0.20506" />
```

## <a name="examples"></a><span data-ttu-id="45ef6-431">Примеры</span><span class="sxs-lookup"><span data-stu-id="45ef6-431">Examples</span></span>

<span data-ttu-id="45ef6-432">В следующем примере показано открытие пользовательского интерфейса для программы Mage (*MageUI.exe*).</span><span class="sxs-lookup"><span data-stu-id="45ef6-432">The following example opens the user interface for Mage (*MageUI.exe*).</span></span>

```console
mage
```

<span data-ttu-id="45ef6-433">В следующих примерах показано создание манифеста развертывания и манифеста приложения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="45ef6-433">The following examples create a default deployment manifest and application manifest.</span></span> <span data-ttu-id="45ef6-434">Эти файлы создаются в текущем рабочем каталоге и называются "deploy.application" и "application.exe.manifest" соответственно.</span><span class="sxs-lookup"><span data-stu-id="45ef6-434">These files are all created in the current working directory and are named deploy.application and application.exe.manifest, respectively.</span></span>

```console
mage -New Deployment
mage -New Application
```

<span data-ttu-id="45ef6-435">В следующем примере показано создание манифеста приложения, заполненного всеми сборками и файлами ресурсов из текущего каталога.</span><span class="sxs-lookup"><span data-stu-id="45ef6-435">The following example creates an application manifest populated with all of the assemblies and resource files from the current directory.</span></span>

```console
mage -New Application -FromDirectory . -Version 1.0.0.0
```

<span data-ttu-id="45ef6-436">В следующем примере показано продолжение предыдущего примера с указанием имени развертывания и целевого микропроцессора.</span><span class="sxs-lookup"><span data-stu-id="45ef6-436">The following example continues the previous example by specifying the deployment name and target microprocessor.</span></span> <span data-ttu-id="45ef6-437">В нем также показано задание URL-адреса, который приложение ClickOnce должно использовать для проверки обновлений.</span><span class="sxs-lookup"><span data-stu-id="45ef6-437">It also specifies a URL against which ClickOnce should check for updates.</span></span>

```console
mage -New Application -FromDirectory . -Name "Hello, World! Application" -Version 1.0.0.0 -Processor "x86" -ProviderUrl http://internalserver/HelloWorld/
```

<span data-ttu-id="45ef6-438">В следующем примере показано создание пары манифестов для развертывания приложения WPF, размещаемого в Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="45ef6-438">The following example demonstrates how to create a pair of manifests for deploying a WPF application that will be hosted in Internet Explorer.</span></span>

```console
mage -New Application -FromDirectory . -Version 1.0.0.0 -WPFBrowserApp true
mage -New Deployment -AppManifest 1.0.0.0\application.manifest -WPFBrowserApp true
```

<span data-ttu-id="45ef6-439">В следующем примере показано создание манифеста приложения, заполненного всеми сборками и файлами ресурсов из текущего каталога и необходимыми подписями.</span><span class="sxs-lookup"><span data-stu-id="45ef6-439">The following example creates an application manifest populated with all of the assemblies and resource files from the current directory and signs.</span></span>

```console
mage -New Application -FromDirectory . -Version 1.0.0.0 -KeyContainer keypair.snk -CryptoProvider "Microsoft Enhanced Cryptographic Provider v1.0"
```

<span data-ttu-id="45ef6-440">В следующем примере в манифест развертывания добавляются сведения из манифеста приложения и задается база кода для местонахождения манифеста приложения.</span><span class="sxs-lookup"><span data-stu-id="45ef6-440">The following example updates a deployment manifest with information from an application manifest, and sets the code base for the location of the application manifest.</span></span>

```console
mage -Update HelloWorld.deploy -AppManifest 1.0.0.0\application.manifest -AppCodeBase http://internalserver/HelloWorld.deploy
```

<span data-ttu-id="45ef6-441">В следующем примере изменяется манифест развертывания для принудительного обновления установленной у пользователя версии.</span><span class="sxs-lookup"><span data-stu-id="45ef6-441">The following example edits the deployment manifest to force an update of the user's installed version.</span></span>

```console
mage -Update c:\HelloWorldDeployment\HelloWorld.deploy -MinVersion 1.1.0.0
```

<span data-ttu-id="45ef6-442">В следующем примере манифест развертывания получает указание извлекать манифест приложения из другого каталога.</span><span class="sxs-lookup"><span data-stu-id="45ef6-442">The following example tells the deployment manifest to retrieve the application manifest from another directory.</span></span>

```console
mage -Update HelloWorld.deploy -AppCodeBase http://anotherserver/HelloWorld/1.1.0.0/
```

<span data-ttu-id="45ef6-443">В следующем примере существующий манифест развертывания подписывается с помощью цифрового сертификата в текущем рабочем каталоге.</span><span class="sxs-lookup"><span data-stu-id="45ef6-443">The following example signs an existing deployment manifest using a digital certificate in the current working directory.</span></span>

```console
mage -Sign deploy.application -CertFile cert.pfx -Password <passwd>
```

<span data-ttu-id="45ef6-444">В следующем примере существующий манифест развертывания подписывается с помощью цифрового сертификата и закрытого ключа в текущем рабочем каталоге.</span><span class="sxs-lookup"><span data-stu-id="45ef6-444">The following example signs an existing deployment manifest using a digital certificate and private key in the current working directory.</span></span>

```console
mage -Sign deploy.application -CertFile cert.pfx -KeyContainer keyfile.snk -CryptoProvider "Microsoft Enhanced Cryptographic Provider v1.0"
```

## <a name="see-also"></a><span data-ttu-id="45ef6-445">См. также</span><span class="sxs-lookup"><span data-stu-id="45ef6-445">See also</span></span>

- [<span data-ttu-id="45ef6-446">Развертывание и безопасность технологии ClickOnce</span><span class="sxs-lookup"><span data-stu-id="45ef6-446">ClickOnce Security and Deployment</span></span>](/visualstudio/deployment/clickonce-security-and-deployment)
- [<span data-ttu-id="45ef6-447">Пошаговое руководство: Развертывание вручную приложения ClickOnce</span><span class="sxs-lookup"><span data-stu-id="45ef6-447">Walkthrough: Manually Deploying a ClickOnce Application</span></span>](/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-application)
- [<span data-ttu-id="45ef6-448">Общие сведения о развертывании доверенных приложений</span><span class="sxs-lookup"><span data-stu-id="45ef6-448">Trusted Application Deployment Overview</span></span>](/visualstudio/deployment/trusted-application-deployment-overview)
- [<span data-ttu-id="45ef6-449">MageUI.exe (средство создания и редактирования манифестов, графический клиент)</span><span class="sxs-lookup"><span data-stu-id="45ef6-449">MageUI.exe (Manifest Generation and Editing Tool, Graphical Client)</span></span>](mageui-exe-manifest-generation-and-editing-tool-graphical-client.md)
- [<span data-ttu-id="45ef6-450">Оболочки командной строки для разработчиков</span><span class="sxs-lookup"><span data-stu-id="45ef6-450">Developer command-line shells</span></span>](/visualstudio/ide/reference/command-prompt-powershell)
