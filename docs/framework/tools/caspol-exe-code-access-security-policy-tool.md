---
title: Caspol.exe (средство настройки политики управления доступом для кода)
description: См. сведения о Caspol.exe, инструменте политики управления доступом для кода. Этот инструмент позволяет пользователям и администраторам изменять политику безопасности для разных уровней политики.
ms.date: 03/30/2017
helpviewer_keywords:
- permission sets, modifying security policy
- security policy [.NET Framework], Code Access Security Policy tool
- enterprise security policy
- referencing code groups and permission sets
- user security policy
- Caspol.exe
- Code Access Security Policy tool
- code groups, modifying security policy
- application development [.NET Framework], security
- machine security policy
- security policy [.NET Framework], modifying
- manually editing security configuration files
ms.assetid: d2bf6123-7b0c-4e60-87ad-a39a1c3eb2e0
ms.openlocfilehash: d26443d07dd76d8d18e0d21112d1e40de5b83c83
ms.sourcegitcommit: 9c589b25b005b9a7f87327646020eb85c3b6306f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2021
ms.locfileid: "102258287"
---
# <a name="caspolexe-code-access-security-policy-tool"></a><span data-ttu-id="549c2-104">Caspol.exe (средство настройки политики управления доступом для кода)</span><span class="sxs-lookup"><span data-stu-id="549c2-104">Caspol.exe (Code Access Security Policy Tool)</span></span>

<span data-ttu-id="549c2-105">Программа для настройки политики разграничения доступа кода (Caspol.exe) позволяет пользователям и администраторам изменять политику безопасности на уровне компьютера, пользователя и предприятия.</span><span class="sxs-lookup"><span data-stu-id="549c2-105">The Code Access Security (CAS) Policy tool (Caspol.exe) enables users and administrators to modify security policy for the machine policy level, the user policy level, and the enterprise policy level.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="549c2-106">Начиная с .NET Framework 4, Caspol.exe не влияет на политику управления доступом для кода, если для [элемента \<legacyCasPolicy>](../configure-apps/file-schema/runtime/netfx40-legacysecuritypolicy-element.md) не задано значение `true`.</span><span class="sxs-lookup"><span data-stu-id="549c2-106">Starting with the .NET Framework 4, Caspol.exe does not affect CAS policy unless the [\<legacyCasPolicy> element](../configure-apps/file-schema/runtime/netfx40-legacysecuritypolicy-element.md) is set to `true`.</span></span> <span data-ttu-id="549c2-107">Все параметры, отображаемые или изменяемые программой CasPol.exe, будут влиять только на приложения, для которых явно задано использование политики CAS.</span><span class="sxs-lookup"><span data-stu-id="549c2-107">Any settings shown or modified by CasPol.exe will only affect applications that opt into using CAS policy.</span></span> <span data-ttu-id="549c2-108">Дополнительные сведения см. в разделе [Изменения системы безопасности](/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="549c2-108">For more information, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="549c2-109">На 64-разрядных компьютерах присутствуют и 64-разрядная, и 32-разрядная версии политики безопасности.</span><span class="sxs-lookup"><span data-stu-id="549c2-109">64-bit computers include both 64-bit and 32-bit versions of security policy.</span></span> <span data-ttu-id="549c2-110">Чтобы проверить возможность применения политики к 32-разрядным и 64-разрядным приложениям, запустите 32-разрядную и 64-разрядную версии программы Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-110">To ensure that your policy changes apply to both 32-bit and 64-bit applications, run both the 32-bit and 64-bit versions of Caspol.exe.</span></span>  
  
 <span data-ttu-id="549c2-111">Средство настройки политики управления доступом для кода автоматически устанавливается вместе с .NET Framework и Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="549c2-111">The Code Access Security Policy tool is automatically installed with .NET Framework and with Visual Studio.</span></span> <span data-ttu-id="549c2-112">Программа Caspol.exe находится в каталоге %windir%\Microsoft.NET\Framework\\*версия* в 32-разрядных системах или в каталоге %windir%\Microsoft.NET\Framework64\\*версия* в 64-разрядных системах.</span><span class="sxs-lookup"><span data-stu-id="549c2-112">You can find Caspol.exe in %windir%\Microsoft.NET\Framework\\*version* on 32-bit systems or %windir%\Microsoft.NET\Framework64\\*version* on 64-bit systems.</span></span> <span data-ttu-id="549c2-113">(Например, в 64-разрядной системе расположение для .NET Framework 4 будет следующим: %windir%\Microsoft.NET\Framework64\v4.030319\caspol.exe.) Если на компьютере одновременно работает несколько версий .NET Framework, на нем могут быть установлены разные версии программы.</span><span class="sxs-lookup"><span data-stu-id="549c2-113">(For example, the location is %windir%\Microsoft.NET\Framework64\v4.030319\caspol.exe for .NET Framework 4 on a 64-bit system.) Multiple versions of the tool might be installed if your computer is running multiple versions of .NET Framework side by side.</span></span> <span data-ttu-id="549c2-114">Программу можно запустить из каталога установки.</span><span class="sxs-lookup"><span data-stu-id="549c2-114">You can run the tool from the installation directory.</span></span> <span data-ttu-id="549c2-115">При этом [оболочка командной строки для разработчиков](/visualstudio/ide/reference/command-prompt-powershell) является рекомендуемым способом запуска, так как для этого не нужно переходить в каталог установки.</span><span class="sxs-lookup"><span data-stu-id="549c2-115">However, we recommend that you use a [command-line shell for developers](/visualstudio/ide/reference/command-prompt-powershell), which does not require you to navigate to the installation folder.</span></span>  
  
 <span data-ttu-id="549c2-116">В командной строке введите следующее.</span><span class="sxs-lookup"><span data-stu-id="549c2-116">At the command prompt, type the following:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="549c2-117">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="549c2-117">Syntax</span></span>  
  
```console
caspol [options]  
```  
  
## <a name="parameters"></a><span data-ttu-id="549c2-118">Параметры</span><span class="sxs-lookup"><span data-stu-id="549c2-118">Parameters</span></span>  
  
|<span data-ttu-id="549c2-119">Параметр</span><span class="sxs-lookup"><span data-stu-id="549c2-119">Option</span></span>|<span data-ttu-id="549c2-120">Описание</span><span class="sxs-lookup"><span data-stu-id="549c2-120">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="549c2-121">**-addfulltrust** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-121">**-addfulltrust** *assembly_file*</span></span><br /><br /> <span data-ttu-id="549c2-122">or</span><span class="sxs-lookup"><span data-stu-id="549c2-122">or</span></span><br /><br /> <span data-ttu-id="549c2-123">**-af** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-123">**-af** *assembly_file*</span></span>|<span data-ttu-id="549c2-124">Добавляет сборку, реализующую настраиваемый объект безопасности (например, настраиваемое разрешение или настраиваемое условие членства), в список сборок с полным доверием для заданного уровня политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-124">Adds an assembly that implements a custom security object (such as a custom permission or a custom membership condition) to the full trust assembly list for a specific policy level.</span></span> <span data-ttu-id="549c2-125">Аргумент *assembly_file* задает добавляемую сборку.</span><span class="sxs-lookup"><span data-stu-id="549c2-125">The *assembly_file* argument specifies the assembly to add.</span></span> <span data-ttu-id="549c2-126">Этот файл должен быть подписан [строгим именем](../../standard/assembly/strong-named.md).</span><span class="sxs-lookup"><span data-stu-id="549c2-126">This file must be signed with a [strong name](../../standard/assembly/strong-named.md).</span></span> <span data-ttu-id="549c2-127">Для подписи сборки строгим именем используется [программа строгих имен (Sn.exe)](sn-exe-strong-name-tool.md).</span><span class="sxs-lookup"><span data-stu-id="549c2-127">You can sign an assembly with a strong name using the [Strong Name Tool (Sn.exe)](sn-exe-strong-name-tool.md).</span></span><br /><br /> <span data-ttu-id="549c2-128">При добавлении в политику набора разрешений, который содержит настраиваемое разрешение, сборка, реализующая настраиваемое разрешение, должна быть добавлена в список полного доверия этого уровня политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-128">Whenever a permission set containing a custom permission is added to policy, the assembly implementing the custom permission must be added to the full trust list for that policy level.</span></span> <span data-ttu-id="549c2-129">Сборки, реализующие настраиваемые объекты безопасности (например, настраиваемые группы кодов или условия членства), применяемые в политике безопасности (например, политике компьютера), должны быть добавлены в список сборок с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="549c2-129">Assemblies that implement custom security objects (such as custom code groups or membership conditions) used in a security policy (such as the machine policy) should always be added to the full trust assembly list.</span></span> <span data-ttu-id="549c2-130">**Внимание**! Если сборка, реализующая настраиваемый объект безопасности, ссылается на другие сборки, необходимо сначала добавить эти сборки в список сборок с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="549c2-130">**Caution:**  If the assembly implementing the custom security object references other assemblies, you must first add the referenced assemblies to the full trust assembly list.</span></span> <span data-ttu-id="549c2-131">Настраиваемые объекты безопасности, созданные с помощью Visual Basic, Visual C++ или JScript, ссылаются на "Microsoft.VisualBasic.dll", "Microsoft.VisualC.dll" и "Microsoft.JScript.dll" соответственно.</span><span class="sxs-lookup"><span data-stu-id="549c2-131">Custom security objects created using Visual Basic, C++, and JScript reference either Microsoft.VisualBasic.dll, Microsoft.VisualC.dll, or Microsoft.JScript.dll, respectively.</span></span> <span data-ttu-id="549c2-132">Эти сборки по умолчанию не содержатся в списке полностью доверенных сборок.</span><span class="sxs-lookup"><span data-stu-id="549c2-132">These assemblies are not in the full trust assembly list by default.</span></span> <span data-ttu-id="549c2-133">Нужно добавить соответствующую сборку в список полностью доверенных, прежде чем добавлять пользовательский объект безопасности.</span><span class="sxs-lookup"><span data-stu-id="549c2-133">You must add the appropriate assembly to the full trust list before you add a custom security object.</span></span> <span data-ttu-id="549c2-134">Невыполнение этого требования нарушит целостность системы безопасности, в результате чего ни одна из сборок не сможет быть загружена.</span><span class="sxs-lookup"><span data-stu-id="549c2-134">Failure to do so will break the security system, causing all assemblies to fail to load.</span></span> <span data-ttu-id="549c2-135">В этой ситуации параметр Caspol.exe **-all -reset** не исправит систему безопасности.</span><span class="sxs-lookup"><span data-stu-id="549c2-135">In this situation, the Caspol.exe **-all -reset** option will not repair security.</span></span> <span data-ttu-id="549c2-136">Для ее исправления необходимо вручную редактировать файлы безопасности для удаления объекта безопасности.</span><span class="sxs-lookup"><span data-stu-id="549c2-136">To repair security, you must manually edit the security files to remove the custom security object.</span></span>|  
|<span data-ttu-id="549c2-137">**-addgroup** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span><span class="sxs-lookup"><span data-stu-id="549c2-137">**-addgroup** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span></span><br /><br /> <span data-ttu-id="549c2-138">or</span><span class="sxs-lookup"><span data-stu-id="549c2-138">or</span></span><br /><br /> <span data-ttu-id="549c2-139">**-ag** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span><span class="sxs-lookup"><span data-stu-id="549c2-139">**-ag** {*parent_label &#124; parent_name*} *mship pset_name* [*flags*]</span></span>|<span data-ttu-id="549c2-140">Добавляет новую группу кода в иерархию групп кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-140">Adds a new code group to the code group hierarchy.</span></span> <span data-ttu-id="549c2-141">Можно задать *parent_label* или *parent_name*.</span><span class="sxs-lookup"><span data-stu-id="549c2-141">You can specify either the *parent_label* or *parent_name*.</span></span> <span data-ttu-id="549c2-142">Аргумент *parent_label* задает метку (например, 1.</span><span class="sxs-lookup"><span data-stu-id="549c2-142">The *parent_label* argument specifies the label (such as 1.</span></span> <span data-ttu-id="549c2-143">или 1.1.) группы кода, которая является родительской по отношению к добавляемой группе кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-143">or 1.1.) of the code group that is the parent of the code group being added.</span></span> <span data-ttu-id="549c2-144">Аргумент *parent_name* задает имя группы кода, являющейся родительской по отношению к добавляемой группе кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-144">The *parent_name* argument specifies the name of the code group that is the parent of the code group being added.</span></span> <span data-ttu-id="549c2-145">Поскольку аргументы *parent_label* и *parent_name* взаимозаменяемы, программа Caspol.exe должна их различать.</span><span class="sxs-lookup"><span data-stu-id="549c2-145">Because *parent_label* and *parent_name* can be used interchangeably, Caspol.exe must be able to distinguish between them.</span></span> <span data-ttu-id="549c2-146">Поэтому аргумент *parent_name* не может начинаться с цифры.</span><span class="sxs-lookup"><span data-stu-id="549c2-146">Therefore, *parent_name* cannot begin with a number.</span></span> <span data-ttu-id="549c2-147">Кроме того, аргумент *parent_name* может состоять только из символов A–Z, 0–9 и символов подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="549c2-147">Additionally, *parent_name* can only contain A-Z, 0-9 and the underscore character.</span></span><br /><br /> <span data-ttu-id="549c2-148">Аргумент *mship* задает условие членства для новой группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-148">The *mship* argument specifies the membership condition for the new code group.</span></span> <span data-ttu-id="549c2-149">Дополнительные сведения см. в таблице аргументов *mship* ниже.</span><span class="sxs-lookup"><span data-stu-id="549c2-149">For more information, see the table of *mship* arguments later in this section.</span></span><br /><br /> <span data-ttu-id="549c2-150">Аргумент *pset_name* задает имя набора разрешений, связанного с новой группой кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-150">The *pset_name* argument is the name of the permission set that will be associated with the new code group.</span></span> <span data-ttu-id="549c2-151">Кроме того, для новой группы можно задать один или несколько аргументов *flags*.</span><span class="sxs-lookup"><span data-stu-id="549c2-151">You can also set one or more *flags* for the new group.</span></span> <span data-ttu-id="549c2-152">Дополнительные сведения см. в таблице аргументов *flags* ниже.</span><span class="sxs-lookup"><span data-stu-id="549c2-152">For more information, see the table of *flags* arguments later in this section.</span></span>|  
|<span data-ttu-id="549c2-153">**-addpset** {*psfile* &#124; *psfile* p *set_name*}</span><span class="sxs-lookup"><span data-stu-id="549c2-153">**-addpset** {*psfile* &#124; *psfile* p *set_name*}</span></span><br /><br /> <span data-ttu-id="549c2-154">or</span><span class="sxs-lookup"><span data-stu-id="549c2-154">or</span></span><br /><br /> <span data-ttu-id="549c2-155">**-ap** {*named* _ *psfile* &#124; *psfile* *pset_name*}</span><span class="sxs-lookup"><span data-stu-id="549c2-155">**-ap** {*named* _ *psfile* &#124; *psfile* *pset_name*}</span></span>|<span data-ttu-id="549c2-156">Добавляет в политику новый именованный набор разрешений.</span><span class="sxs-lookup"><span data-stu-id="549c2-156">Adds a new named permission set to policy.</span></span> <span data-ttu-id="549c2-157">Набор разрешений должен быть создан на языке XML и храниться в XML-файле.</span><span class="sxs-lookup"><span data-stu-id="549c2-157">The permission set must be authored in XML and stored in an .xml file.</span></span> <span data-ttu-id="549c2-158">Если XML-файл содержит имя набора разрешений, необходимо указать только имя файла (*psfile*).</span><span class="sxs-lookup"><span data-stu-id="549c2-158">If the XML file contains the name of the permission set, only that file (*psfile*) is specified.</span></span> <span data-ttu-id="549c2-159">Если XML-файл не содержит имя набора разрешений, необходимо задать и имя XML-файла (*psfile*), и имя набора разрешений (*pset_name*).</span><span class="sxs-lookup"><span data-stu-id="549c2-159">If the XML file does not contain the permission set name, you must specify both the XML file name (*psfile*) and the permission set name (*pset_name*).</span></span><br /><br /> <span data-ttu-id="549c2-160">Обратите внимание, что все разрешения, используемые в наборе разрешений, должны быть определены в сборках, находящихся в глобальном кэше сборок.</span><span class="sxs-lookup"><span data-stu-id="549c2-160">Note that all permissions used in a permission set must be defined in assemblies contained in the global assembly cache.</span></span>|  
|<span data-ttu-id="549c2-161">**-a**[**ll**]</span><span class="sxs-lookup"><span data-stu-id="549c2-161">**-a**[**ll**]</span></span>|<span data-ttu-id="549c2-162">Указывает, что параметры, следующие за этим параметром, применяются к политикам компьютера, пользователя и предприятия.</span><span class="sxs-lookup"><span data-stu-id="549c2-162">Indicates that all options following this one apply to the machine, user, and enterprise policies.</span></span> <span data-ttu-id="549c2-163">Параметр **-all** всегда относится к политике текущего пользователя, вошедшего в систему.</span><span class="sxs-lookup"><span data-stu-id="549c2-163">The **-all** option always refers to the policy of the currently logged-on user.</span></span> <span data-ttu-id="549c2-164">Чтобы сослаться на политику пользователя, отличного от текущего, задайте параметр **-customall**.</span><span class="sxs-lookup"><span data-stu-id="549c2-164">See the **-customall** option to refer to the user policy of a user other than the current user.</span></span>|  
|<span data-ttu-id="549c2-165">**-chggroup** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="549c2-165">**-chggroup** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span></span><br /><br /> <span data-ttu-id="549c2-166">*flags* `}`</span><span class="sxs-lookup"><span data-stu-id="549c2-166">*flags* `}`</span></span><br /><br /> <span data-ttu-id="549c2-167">or</span><span class="sxs-lookup"><span data-stu-id="549c2-167">or</span></span><br /><br /> <span data-ttu-id="549c2-168">**-cg** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="549c2-168">**-cg** {*label &#124;name*} {*mship* &#124; *pset_name* &#124;</span></span><br /><br /> <span data-ttu-id="549c2-169">*flags* `}`</span><span class="sxs-lookup"><span data-stu-id="549c2-169">*flags* `}`</span></span>|<span data-ttu-id="549c2-170">Изменяет условие членства в группе кода, набор разрешений или параметры флагов **exclusive**, **levelfinal**, **name** или **description**.</span><span class="sxs-lookup"><span data-stu-id="549c2-170">Changes a code group's membership condition, permission set, or the settings of the **exclusive**, **levelfinal**, **name**, or **description** flags.</span></span> <span data-ttu-id="549c2-171">Можно задать аргумент *label* или *name*.</span><span class="sxs-lookup"><span data-stu-id="549c2-171">You can specify either the *label* or *name*.</span></span> <span data-ttu-id="549c2-172">Аргумент *label* задает метку (например, 1.</span><span class="sxs-lookup"><span data-stu-id="549c2-172">The *label* argument specifies the label (such as 1.</span></span> <span data-ttu-id="549c2-173">или 1.1.) группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-173">or 1.1.) of the code group.</span></span> <span data-ttu-id="549c2-174">Аргумент *name* задает имя изменяемой группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-174">The *name* argument specifies the name of the code group to change.</span></span> <span data-ttu-id="549c2-175">Поскольку аргументы *label* и *name* взаимозаменяемы, программа Caspol.exe должна их различать.</span><span class="sxs-lookup"><span data-stu-id="549c2-175">Because *label* and *name* can be used interchangeably, Caspol.exe must be able to distinguish between them.</span></span> <span data-ttu-id="549c2-176">Поэтому аргумент *name* не может начинаться с цифры.</span><span class="sxs-lookup"><span data-stu-id="549c2-176">Therefore, *name* cannot begin with a number.</span></span> <span data-ttu-id="549c2-177">Кроме того, аргумент *name* может состоять только из символов A–Z, 0–9 и символов подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="549c2-177">Additionally, *name* can only contain A-Z, 0-9 and the underscore character.</span></span><br /><br /> <span data-ttu-id="549c2-178">Аргумент *pset_name* задает имя набора разрешений, связываемого с группой кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-178">The *pset_name* argument specifies the name of the permission set to associate with the code group.</span></span> <span data-ttu-id="549c2-179">Сведения об аргументах *mship* и *flags* см. в таблицах ниже.</span><span class="sxs-lookup"><span data-stu-id="549c2-179">See the tables later in this section for information on the *mship* and *flags* arguments.</span></span>|  
|<span data-ttu-id="549c2-180">**-chgpset**  *psfile pset_name*</span><span class="sxs-lookup"><span data-stu-id="549c2-180">**-chgpset**  *psfile pset_name*</span></span><br /><br /> <span data-ttu-id="549c2-181">or</span><span class="sxs-lookup"><span data-stu-id="549c2-181">or</span></span><br /><br /> <span data-ttu-id="549c2-182">**-cp** *psfile pset_name*</span><span class="sxs-lookup"><span data-stu-id="549c2-182">**-cp** *psfile pset_name*</span></span>|<span data-ttu-id="549c2-183">Изменяет именованный набор разрешений.</span><span class="sxs-lookup"><span data-stu-id="549c2-183">Changes a named permission set.</span></span> <span data-ttu-id="549c2-184">Аргумент *psfile* задает новое определение набора разрешений, то есть файл сериализованного набора разрешений в формате XML.</span><span class="sxs-lookup"><span data-stu-id="549c2-184">The *psfile* argument supplies the new definition for the permission set; it is a serialized permission set file in XML format.</span></span> <span data-ttu-id="549c2-185">Аргумент *pset_name* задает имя набора разрешений, который необходимо изменить.</span><span class="sxs-lookup"><span data-stu-id="549c2-185">The *pset_name* argument specifies the name of the permission set you want to change.</span></span>|  
|<span data-ttu-id="549c2-186">**-customall**  *path*</span><span class="sxs-lookup"><span data-stu-id="549c2-186">**-customall**  *path*</span></span><br /><br /> <span data-ttu-id="549c2-187">or</span><span class="sxs-lookup"><span data-stu-id="549c2-187">or</span></span><br /><br /> <span data-ttu-id="549c2-188">**-ca**  *path*</span><span class="sxs-lookup"><span data-stu-id="549c2-188">**-ca**  *path*</span></span>|<span data-ttu-id="549c2-189">Указывает, что параметры, следующие за этим параметром, применяются к политикам компьютера, предприятия и настраиваемым политикам указанного пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-189">Indicates that all options following this one apply to the machine, enterprise, and the specified custom user policies.</span></span> <span data-ttu-id="549c2-190">Требуется задать расположение файла конфигурации безопасности пользователя в аргументе *path*.</span><span class="sxs-lookup"><span data-stu-id="549c2-190">You must specify the location of the custom user's security configuration file with the *path* argument.</span></span>|  
|<span data-ttu-id="549c2-191">**-cu**[**stomuser**] *path*</span><span class="sxs-lookup"><span data-stu-id="549c2-191">**-cu**[**stomuser**] *path*</span></span>|<span data-ttu-id="549c2-192">Разрешает администрирование настраиваемой политики пользователя, которая не принадлежит пользователю, от имени которого запущена программа Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-192">Allows the administration of a custom user policy that does not belong to the user on whose behalf Caspol.exe is currently running.</span></span> <span data-ttu-id="549c2-193">Требуется задать расположение файла конфигурации безопасности пользователя в аргументе *path*.</span><span class="sxs-lookup"><span data-stu-id="549c2-193">You must specify the location of the custom user's security configuration file with the *path* argument.</span></span>|  
|<span data-ttu-id="549c2-194">**-enterprise**</span><span class="sxs-lookup"><span data-stu-id="549c2-194">**-enterprise**</span></span><br /><br /> <span data-ttu-id="549c2-195">or</span><span class="sxs-lookup"><span data-stu-id="549c2-195">or</span></span><br /><br /> <span data-ttu-id="549c2-196">**-en**</span><span class="sxs-lookup"><span data-stu-id="549c2-196">**-en**</span></span>|<span data-ttu-id="549c2-197">Указывает, что все параметры, следующие за этим параметром, применяются к политике уровня предприятия.</span><span class="sxs-lookup"><span data-stu-id="549c2-197">Indicates that all options following this one apply to the enterprise level policy.</span></span> <span data-ttu-id="549c2-198">Пользователи, не являющиеся администраторами предприятия, не имеют достаточных прав на изменение политики предприятия, хотя и могут ее просматривать.</span><span class="sxs-lookup"><span data-stu-id="549c2-198">Users who are not enterprise administrators do not have sufficient rights to modify the enterprise policy, although they can view it.</span></span> <span data-ttu-id="549c2-199">По умолчанию в сценариях, не относящихся к предприятию, эта политика не влияет на политики компьютера и пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-199">In nonenterprise scenarios, this policy, by default, does not interfere with machine and user policy.</span></span>|  
|<span data-ttu-id="549c2-200">**-e**[**xecution**] {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="549c2-200">**-e**[**xecution**] {**on** &#124; **off**}</span></span>|<span data-ttu-id="549c2-201">Включает и отключает механизм проверки разрешений до выполнения кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-201">Turns on or off the mechanism that checks for the permission to run before code starts to execute.</span></span> <span data-ttu-id="549c2-202">**Примечание.**  Этот параметр не поддерживается в .NET Framework 4 и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="549c2-202">**Note:**  This switch is removed in the .NET Framework 4 and later versions.</span></span> <span data-ttu-id="549c2-203">Дополнительные сведения см. в разделе [Изменения системы безопасности](/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="549c2-203">For more information, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span>|  
|<span data-ttu-id="549c2-204">**-f**[**orce**]</span><span class="sxs-lookup"><span data-stu-id="549c2-204">**-f**[**orce**]</span></span>|<span data-ttu-id="549c2-205">Отключает проверку инструмента на самоуничтожение и изменяет политику в соответствии с заданными пользователем параметрами.</span><span class="sxs-lookup"><span data-stu-id="549c2-205">Suppresses the tool's self-destruct test and changes the policy as specified by the user.</span></span> <span data-ttu-id="549c2-206">В обычных условиях программа Caspol.exe проверяет, не помешают ли ее работе изменения, внесенные в политику, и если они нарушат ее работу, то изменения политики не сохраняются и выводится сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="549c2-206">Normally, Caspol.exe checks whether any policy changes would prevent Caspol.exe itself from running properly; if so, Caspol.exe does not save the policy change and prints an error message.</span></span> <span data-ttu-id="549c2-207">Чтобы принудительно внести изменения в политику, даже если они нарушат работу программы Caspol.exe, следует указать параметр **-force**.</span><span class="sxs-lookup"><span data-stu-id="549c2-207">To force Caspol.exe to change policy even if this prevents Caspol.exe itself from running, use the **–force** option.</span></span>|  
|<span data-ttu-id="549c2-208">**-h**[**elp**]</span><span class="sxs-lookup"><span data-stu-id="549c2-208">**-h**[**elp**]</span></span>|<span data-ttu-id="549c2-209">Отображает синтаксис команд и параметров программы Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-209">Displays command syntax and options for Caspol.exe.</span></span>|  
|<span data-ttu-id="549c2-210">**-l**[**ist**]</span><span class="sxs-lookup"><span data-stu-id="549c2-210">**-l**[**ist**]</span></span>|<span data-ttu-id="549c2-211">Отображает иерархию групп кода и наборы разрешений для уровней указанного компьютера, пользователя, предприятия или для всех уровней политик.</span><span class="sxs-lookup"><span data-stu-id="549c2-211">Lists the code group hierarchy and the permission sets for the specified machine, user, enterprise, or all policy levels.</span></span> <span data-ttu-id="549c2-212">Программа Caspol.exe сначала отображает метку группы кода, а затем имя, если оно задано.</span><span class="sxs-lookup"><span data-stu-id="549c2-212">Caspol.exe displays the code group's label first, followed by the name, if it is not null.</span></span>|  
|<span data-ttu-id="549c2-213">**-listdescription**</span><span class="sxs-lookup"><span data-stu-id="549c2-213">**-listdescription**</span></span><br /><br /> <span data-ttu-id="549c2-214">or</span><span class="sxs-lookup"><span data-stu-id="549c2-214">or</span></span><br /><br /> <span data-ttu-id="549c2-215">**-ld**</span><span class="sxs-lookup"><span data-stu-id="549c2-215">**-ld**</span></span>|<span data-ttu-id="549c2-216">Отображает список описаний всех групп кода для указанного уровня политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-216">Lists all code group descriptions for the specified policy level.</span></span>|  
|<span data-ttu-id="549c2-217">**-listfulltrust**</span><span class="sxs-lookup"><span data-stu-id="549c2-217">**-listfulltrust**</span></span><br /><br /> <span data-ttu-id="549c2-218">or</span><span class="sxs-lookup"><span data-stu-id="549c2-218">or</span></span><br /><br /> <span data-ttu-id="549c2-219">**-lf**</span><span class="sxs-lookup"><span data-stu-id="549c2-219">**-lf**</span></span>|<span data-ttu-id="549c2-220">Отображает список сборок с полным доверием для указанного уровня политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-220">Lists the contents of the full trust assembly list for the specified policy level.</span></span>|  
|<span data-ttu-id="549c2-221">**-listgroups**</span><span class="sxs-lookup"><span data-stu-id="549c2-221">**-listgroups**</span></span><br /><br /> <span data-ttu-id="549c2-222">or</span><span class="sxs-lookup"><span data-stu-id="549c2-222">or</span></span><br /><br /> <span data-ttu-id="549c2-223">**-lg**</span><span class="sxs-lookup"><span data-stu-id="549c2-223">**-lg**</span></span>|<span data-ttu-id="549c2-224">Отображает группы кода для указанного уровня политики или всех уровней политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-224">Displays the code groups of the specified policy level or all policy levels.</span></span> <span data-ttu-id="549c2-225">Программа Caspol.exe сначала отображает метку группы кода, а затем имя, если оно задано.</span><span class="sxs-lookup"><span data-stu-id="549c2-225">Caspol.exe displays the code group's label first, followed by the name, if it is not null.</span></span>|  
|<span data-ttu-id="549c2-226">**-listpset** или **-lp**</span><span class="sxs-lookup"><span data-stu-id="549c2-226">**-listpset** or **-lp**</span></span>|<span data-ttu-id="549c2-227">Отображает наборы разрешений для указанного уровня политики или всех уровней политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-227">Displays the permission sets for the specified policy level or all policy levels.</span></span>|  
|<span data-ttu-id="549c2-228">**-m**[**achine**]</span><span class="sxs-lookup"><span data-stu-id="549c2-228">**-m**[**achine**]</span></span>|<span data-ttu-id="549c2-229">Указывает, что все параметры, следующие за этим параметром, применяются к политике уровня компьютера.</span><span class="sxs-lookup"><span data-stu-id="549c2-229">Indicates that all options following this one apply to the machine level policy.</span></span> <span data-ttu-id="549c2-230">Пользователи, не являющиеся администраторами, не имеют достаточных прав на изменение политики компьютера, хотя могут просматривать ее.</span><span class="sxs-lookup"><span data-stu-id="549c2-230">Users who are not administrators do not have sufficient rights to modify the machine policy, although they can view it.</span></span> <span data-ttu-id="549c2-231">Для администраторов параметр **-machine** задан по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="549c2-231">For administrators, **-machine** is the default.</span></span>|  
|<span data-ttu-id="549c2-232">**-polchgprompt** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="549c2-232">**-polchgprompt** {**on** &#124; **off**}</span></span><br /><br /> <span data-ttu-id="549c2-233">or</span><span class="sxs-lookup"><span data-stu-id="549c2-233">or</span></span><br /><br /> <span data-ttu-id="549c2-234">**-pp** {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="549c2-234">**-pp** {**on** &#124; **off**}</span></span>|<span data-ttu-id="549c2-235">Разрешает или запрещает выдачу запроса, появляющегося при запуске программы Caspol.exe с параметрами, которые могут изменить политику.</span><span class="sxs-lookup"><span data-stu-id="549c2-235">Enables or disables the prompt that is displayed whenever Caspol.exe is run using an option that would cause policy changes.</span></span>|  
|<span data-ttu-id="549c2-236">**-quiet**</span><span class="sxs-lookup"><span data-stu-id="549c2-236">**-quiet**</span></span><br /><br /> <span data-ttu-id="549c2-237">or</span><span class="sxs-lookup"><span data-stu-id="549c2-237">or</span></span><br /><br /> <span data-ttu-id="549c2-238">**-q**</span><span class="sxs-lookup"><span data-stu-id="549c2-238">**-q**</span></span>|<span data-ttu-id="549c2-239">Временно блокирует вывод запроса, отображаемого при выборе параметров, которые могут изменить политику.</span><span class="sxs-lookup"><span data-stu-id="549c2-239">Temporarily disables the prompt that is normally displayed for an option that causes policy changes.</span></span> <span data-ttu-id="549c2-240">Это не влияет на вывод запроса при внесении глобальных изменений.</span><span class="sxs-lookup"><span data-stu-id="549c2-240">The global change prompt setting does not change.</span></span> <span data-ttu-id="549c2-241">Этот параметр следует использовать только для отдельных команд, чтобы не допустить вывод запроса для всех команд программы Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-241">Use the option only on a single command basis to avoid disabling the prompt for all Caspol.exe commands.</span></span>|  
|<span data-ttu-id="549c2-242">**-r**[**ecover**]</span><span class="sxs-lookup"><span data-stu-id="549c2-242">**-r**[**ecover**]</span></span>|<span data-ttu-id="549c2-243">Восстанавливает политику из файла резервной копии.</span><span class="sxs-lookup"><span data-stu-id="549c2-243">Recovers policy from a backup file.</span></span> <span data-ttu-id="549c2-244">При изменении политики старая политика программы Caspol.exe сохраняется в файле резервной копии.</span><span class="sxs-lookup"><span data-stu-id="549c2-244">Whenever a policy change is made, Caspol.exe stores the old policy in a backup file.</span></span>|  
|<span data-ttu-id="549c2-245">**-remfulltrust** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-245">**-remfulltrust** *assembly_file*</span></span><br /><br /> <span data-ttu-id="549c2-246">or</span><span class="sxs-lookup"><span data-stu-id="549c2-246">or</span></span><br /><br /> <span data-ttu-id="549c2-247">**-rf**  *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-247">**-rf**  *assembly_file*</span></span>|<span data-ttu-id="549c2-248">Удаляет сборку из списка сборок с полным доверием для уровня политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-248">Removes an assembly from the full trust list of a policy level.</span></span> <span data-ttu-id="549c2-249">Эту операцию следует выполнить, если политика больше не использует набор разрешений, содержащий настраиваемое разрешение.</span><span class="sxs-lookup"><span data-stu-id="549c2-249">This operation should be performed if a permission set that contains a custom permission is no longer used by policy.</span></span> <span data-ttu-id="549c2-250">Тем не менее, сборки, реализующие настраиваемые разрешения, следует удалять из списка сборок с полным доверием, только если они не реализуют другие настраиваемые разрешения, которые еще используются.</span><span class="sxs-lookup"><span data-stu-id="549c2-250">However, you should remove an assembly that implements a custom permission from the full trust list only if the assembly does not implement any other custom permissions that are still being used.</span></span> <span data-ttu-id="549c2-251">При удалении сборки из списка следует удалить все сборки, которые от нее зависят.</span><span class="sxs-lookup"><span data-stu-id="549c2-251">When you remove an assembly from the list, you should also remove any other assemblies that it depends on.</span></span>|  
|<span data-ttu-id="549c2-252">**-remgroup** {*label &#124;name*}</span><span class="sxs-lookup"><span data-stu-id="549c2-252">**-remgroup** {*label &#124;name*}</span></span><br /><br /> <span data-ttu-id="549c2-253">or</span><span class="sxs-lookup"><span data-stu-id="549c2-253">or</span></span><br /><br /> <span data-ttu-id="549c2-254">**-rg** {l *abel &#124; name*}</span><span class="sxs-lookup"><span data-stu-id="549c2-254">**-rg** {l *abel &#124; name*}</span></span>|<span data-ttu-id="549c2-255">Удаляет группу кода, заданную меткой или именем.</span><span class="sxs-lookup"><span data-stu-id="549c2-255">Removes the code group specified by either its label or name.</span></span> <span data-ttu-id="549c2-256">Если указанная группа кода имеет дочерние группы кода, они также будут удалены.</span><span class="sxs-lookup"><span data-stu-id="549c2-256">If the specified code group has child code groups, Caspol.exe also removes all the child code groups.</span></span>|  
|<span data-ttu-id="549c2-257">**-rempset** *pset_name*</span><span class="sxs-lookup"><span data-stu-id="549c2-257">**-rempset** *pset_name*</span></span><br /><br /> <span data-ttu-id="549c2-258">or</span><span class="sxs-lookup"><span data-stu-id="549c2-258">or</span></span><br /><br /> <span data-ttu-id="549c2-259">**-rp** *pset_name*</span><span class="sxs-lookup"><span data-stu-id="549c2-259">**-rp** *pset_name*</span></span>|<span data-ttu-id="549c2-260">Удаляет указанный набор разрешений из политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-260">Removes the specified permission set from policy.</span></span> <span data-ttu-id="549c2-261">Удаляемый набор разрешений задается аргументом *pset_name*.</span><span class="sxs-lookup"><span data-stu-id="549c2-261">The *pset_name* argument indicates which permission set to remove.</span></span> <span data-ttu-id="549c2-262">Набор разрешений удаляется только в том случае, если он не связан ни с одной группой кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-262">Caspol.exe removes the permission set only if it is not associated with any code group.</span></span> <span data-ttu-id="549c2-263">Наборы разрешений по умолчанию (встроенные) не могут быть удалены.</span><span class="sxs-lookup"><span data-stu-id="549c2-263">The default (built-in) permission sets cannot be removed.</span></span>|  
|<span data-ttu-id="549c2-264">**-reset**</span><span class="sxs-lookup"><span data-stu-id="549c2-264">**-reset**</span></span><br /><br /> <span data-ttu-id="549c2-265">or</span><span class="sxs-lookup"><span data-stu-id="549c2-265">or</span></span><br /><br /> <span data-ttu-id="549c2-266">**-rs**</span><span class="sxs-lookup"><span data-stu-id="549c2-266">**-rs**</span></span>|<span data-ttu-id="549c2-267">Восстанавливает политику в состояние по умолчанию и сохраняет ее на диске.</span><span class="sxs-lookup"><span data-stu-id="549c2-267">Returns policy to its default state and persists it to disk.</span></span> <span data-ttu-id="549c2-268">Этот параметр полезен, если измененную политику проще не исправлять, а создать заново из состояния по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="549c2-268">This is useful whenever a changed policy seems to be beyond repair and you want to start over with the installation defaults.</span></span> <span data-ttu-id="549c2-269">Возврат к политике по умолчанию также целесообразен при создании файлов конфигурации безопасности на основе файлов, используемых по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="549c2-269">Resetting can also be convenient when you want to use the default policy as a starting point for modifications to specific security configuration files.</span></span> <span data-ttu-id="549c2-270">Дополнительные сведения см. в разделе [Ручная настройка файлов конфигурации безопасности](#cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1).</span><span class="sxs-lookup"><span data-stu-id="549c2-270">For more information, see [Manually Editing the Security Configuration Files](#cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1).</span></span>|  
|<span data-ttu-id="549c2-271">**-resetlockdown**</span><span class="sxs-lookup"><span data-stu-id="549c2-271">**-resetlockdown**</span></span><br /><br /> <span data-ttu-id="549c2-272">or</span><span class="sxs-lookup"><span data-stu-id="549c2-272">or</span></span><br /><br /> <span data-ttu-id="549c2-273">**-rsld**</span><span class="sxs-lookup"><span data-stu-id="549c2-273">**-rsld**</span></span>|<span data-ttu-id="549c2-274">Возвращает политику к более строгой версии состояния по умолчанию и сохраняет ее на диске; создает резервную копию предыдущей политики компьютера и сохраняет ее в файле с именем `security.config.bac`.</span><span class="sxs-lookup"><span data-stu-id="549c2-274">Returns policy to a more restrictive version of the default state and persists it to disk; creates a backup of the previous machine policy and persists it to a file called `security.config.bac`.</span></span>  <span data-ttu-id="549c2-275">Заблокированная политика похожа на политику по умолчанию за тем исключением, что эта политика не предоставляет разрешений коду из зон `Local Intranet`, `Trusted Sites` и `Internet`, а соответствующие группы кода не имеют дочерних групп кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-275">The locked down policy is similar to the default policy, except that the policy grants no permission to code from the `Local Intranet`, `Trusted Sites`, and `Internet` zones and the corresponding code groups have no child code groups.</span></span>|  
|<span data-ttu-id="549c2-276">**-resolvegroup** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-276">**-resolvegroup** *assembly_file*</span></span><br /><br /> <span data-ttu-id="549c2-277">or</span><span class="sxs-lookup"><span data-stu-id="549c2-277">or</span></span><br /><br /> <span data-ttu-id="549c2-278">**-rsg**  *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-278">**-rsg**  *assembly_file*</span></span>|<span data-ttu-id="549c2-279">Отображает группы кодов, к которым принадлежит указанная сборка (*assembly_file*).</span><span class="sxs-lookup"><span data-stu-id="549c2-279">Shows the code groups that a specific assembly (*assembly_file*) belongs to.</span></span> <span data-ttu-id="549c2-280">По умолчанию отображаются политики уровня компьютера, пользователя и предприятия, к которым принадлежит сборка.</span><span class="sxs-lookup"><span data-stu-id="549c2-280">By default, this option displays the machine, user, and enterprise policy levels to which the assembly belongs.</span></span> <span data-ttu-id="549c2-281">Чтобы отобразить только один уровень политики, задайте параметр **-machine**, **-user** или **-enterprise**.</span><span class="sxs-lookup"><span data-stu-id="549c2-281">To view only one policy level, use this option with either the **-machine**, **-user**, or **-enterprise** option.</span></span>|  
|<span data-ttu-id="549c2-282">**-resolveperm** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-282">**-resolveperm** *assembly_file*</span></span><br /><br /> <span data-ttu-id="549c2-283">or</span><span class="sxs-lookup"><span data-stu-id="549c2-283">or</span></span><br /><br /> <span data-ttu-id="549c2-284">**-rsp** *assembly_file*</span><span class="sxs-lookup"><span data-stu-id="549c2-284">**-rsp** *assembly_file*</span></span>|<span data-ttu-id="549c2-285">Отображает все разрешения, которые будут предоставлены сборке при указанном уровне политики безопасности или уровне политики безопасности по умолчанию, если выполнение сборки будет разрешено.</span><span class="sxs-lookup"><span data-stu-id="549c2-285">Displays all permissions that the specified (or default) level of security policy would grant the assembly if the assembly were allowed to run.</span></span> <span data-ttu-id="549c2-286">Сборка задается аргументом *assembly_file*.</span><span class="sxs-lookup"><span data-stu-id="549c2-286">The *assembly_file* argument specifies the assembly.</span></span> <span data-ttu-id="549c2-287">Если указан параметр **-all**, разрешения вычисляются на основе политики пользователя, компьютера и предприятия; в противном случае применяются правила поведения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="549c2-287">If you specify the **-all** option, Caspol.exe calculates the permissions for the assembly based on user, machine, and enterprise policy; otherwise, default behavior rules apply.</span></span>|  
|<span data-ttu-id="549c2-288">**-s**[**ecurity**] {**on** &#124; **off**}</span><span class="sxs-lookup"><span data-stu-id="549c2-288">**-s**[**ecurity**] {**on** &#124; **off**}</span></span>|<span data-ttu-id="549c2-289">Включает и выключает управление доступом для кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-289">Turns code access security on or off.</span></span> <span data-ttu-id="549c2-290">Параметр **-s off** не отключает безопасность на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="549c2-290">Specifying the **-s off** option does not disable role-based security.</span></span> <span data-ttu-id="549c2-291">**Примечание.**  Этот параметр не поддерживается в .NET Framework 4 и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="549c2-291">**Note:**  This switch is removed in the .NET Framework 4 and later versions.</span></span> <span data-ttu-id="549c2-292">Дополнительные сведения см. в разделе [Изменения системы безопасности](/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="549c2-292">For more information, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span> <span data-ttu-id="549c2-293">**Внимание!**  При выключенной системе управления доступом для кода все требования доступа для кода удовлетворяются.</span><span class="sxs-lookup"><span data-stu-id="549c2-293">**Caution:**  When code access security is disabled, all code access demands succeed.</span></span> <span data-ttu-id="549c2-294">При выключении системы управления доступом для кода система становится уязвимой для атак таких вредоносных программ, как вирусы и "черви".</span><span class="sxs-lookup"><span data-stu-id="549c2-294">Disabling code access security makes the system vulnerable to attacks by malicious code such as viruses and worms.</span></span> <span data-ttu-id="549c2-295">Отключение безопасности повышает производительность, однако это допустимо только в том случае, если общая безопасность системы обеспечивается другими механизмами.</span><span class="sxs-lookup"><span data-stu-id="549c2-295">Turning off security gains some extra performance but should only be done when other security measures have been taken to help make sure overall system security is not breached.</span></span> <span data-ttu-id="549c2-296">К другим мерам предосторожности, связанным с безопасностью, относится отключение от общедоступных сетей, физическая защита компьютера и т.п.</span><span class="sxs-lookup"><span data-stu-id="549c2-296">Examples of other security precautions include disconnecting from public networks, physically securing computers, and so on.</span></span>|  
|<span data-ttu-id="549c2-297">**-u**[**ser**]</span><span class="sxs-lookup"><span data-stu-id="549c2-297">**-u**[**ser**]</span></span>|<span data-ttu-id="549c2-298">Указывает, что все параметры, следующие за этим параметром, применяются к политике уровня пользователя для пользователя, от имени которого запущена программа Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-298">Indicates that all options following this one apply to the user level policy for the user on whose behalf Caspol.exe is running.</span></span> <span data-ttu-id="549c2-299">Для пользователей, не являющихся администраторами, параметр **-user** задан по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="549c2-299">For nonadministrative users, **-user** is the default.</span></span>|  
|<span data-ttu-id="549c2-300">**-?**</span><span class="sxs-lookup"><span data-stu-id="549c2-300">**-?**</span></span>|<span data-ttu-id="549c2-301">Отображает синтаксис команд и параметров программы Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-301">Displays command syntax and options for Caspol.exe.</span></span>|  
  
 <span data-ttu-id="549c2-302">Аргумент *mship*, определяющий условия членства в группе кода, может применяться с параметрами **-addgroup** и **-chggroup**.</span><span class="sxs-lookup"><span data-stu-id="549c2-302">The *mship* argument, which specifies the membership condition for a code group, can be used with the **-addgroup** and **-chggroup** options.</span></span> <span data-ttu-id="549c2-303">Каждый аргумент *mship* реализуется как класс .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="549c2-303">Each *mship* argument is implemented as a .NET Framework class.</span></span> <span data-ttu-id="549c2-304">Чтобы задать аргумент *mship*, следует использовать один из приведенных ниже аргументов.</span><span class="sxs-lookup"><span data-stu-id="549c2-304">To specify *mship,* use one of the following.</span></span>  
  
|<span data-ttu-id="549c2-305">Аргумент</span><span class="sxs-lookup"><span data-stu-id="549c2-305">Argument</span></span>|<span data-ttu-id="549c2-306">Описание</span><span class="sxs-lookup"><span data-stu-id="549c2-306">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="549c2-307">**-allcode**</span><span class="sxs-lookup"><span data-stu-id="549c2-307">**-allcode**</span></span>|<span data-ttu-id="549c2-308">Задает весь код.</span><span class="sxs-lookup"><span data-stu-id="549c2-308">Specifies all code.</span></span> <span data-ttu-id="549c2-309">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.AllMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-309">For more information about this membership condition, see <xref:System.Security.Policy.AllMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-310">**-appdir**</span><span class="sxs-lookup"><span data-stu-id="549c2-310">**-appdir**</span></span>|<span data-ttu-id="549c2-311">Задает каталог приложения.</span><span class="sxs-lookup"><span data-stu-id="549c2-311">Specifies the application directory.</span></span> <span data-ttu-id="549c2-312">Если в качестве условия членства задано **-appdir**, URL-свидетельство кода сравнивается со свидетельством каталога приложения этого кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-312">If you specify **–appdir** as the membership condition, the URL evidence of code is compared with the application directory evidence of that code.</span></span> <span data-ttu-id="549c2-313">Если значения свидетельств совпадают, условие членства выполнено.</span><span class="sxs-lookup"><span data-stu-id="549c2-313">If both evidence values are the same, this membership condition is satisfied.</span></span> <span data-ttu-id="549c2-314">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.ApplicationDirectoryMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-314">For more information about this membership condition, see <xref:System.Security.Policy.ApplicationDirectoryMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-315">**-custom**  *xmlfile*</span><span class="sxs-lookup"><span data-stu-id="549c2-315">**-custom**  *xmlfile*</span></span>|<span data-ttu-id="549c2-316">Добавляет настраиваемое условие членства.</span><span class="sxs-lookup"><span data-stu-id="549c2-316">Adds a custom membership condition.</span></span> <span data-ttu-id="549c2-317">Обязательный аргумент *xmlfile* задает XML-файл, содержащий XML-сериализацию настраиваемого условия членства.</span><span class="sxs-lookup"><span data-stu-id="549c2-317">The mandatory *xmlfile* argument specifies the .xml file that contains XML serialization of the custom membership condition.</span></span>|  
|<span data-ttu-id="549c2-318">**-hash** *hashAlg* { **-hex** *hashValue* &#124; **-file** *assembly_file* }</span><span class="sxs-lookup"><span data-stu-id="549c2-318">**-hash** *hashAlg* {**-hex** *hashValue* &#124; **-file** *assembly_file* }</span></span>|<span data-ttu-id="549c2-319">Задает код с указанным хэшем сборки.</span><span class="sxs-lookup"><span data-stu-id="549c2-319">Specifies code that has the given assembly hash.</span></span> <span data-ttu-id="549c2-320">Чтобы использовать хэш в качестве условия членства в группе кода, укажите значение хэша или файл сборки.</span><span class="sxs-lookup"><span data-stu-id="549c2-320">To use a hash as a code group membership condition, you must specify either the hash value or the assembly file.</span></span> <span data-ttu-id="549c2-321">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.HashMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-321">For more information about this membership condition, see <xref:System.Security.Policy.HashMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-322">**-pub** { **-cert** *cert_file_name* &#124;</span><span class="sxs-lookup"><span data-stu-id="549c2-322">**-pub** { **-cert** *cert_file_name* &#124;</span></span><br /><br /> <span data-ttu-id="549c2-323">**-file** *signed_file_name* &#124; **-hex**  *hex_string* }</span><span class="sxs-lookup"><span data-stu-id="549c2-323">**-file** *signed_file_name* &#124; **-hex**  *hex_string* }</span></span>|<span data-ttu-id="549c2-324">Задает код указанного издателя программного обеспечения, определенного файлом сертификата, подписью файла или шестнадцатеричным представлением сертификата X509.</span><span class="sxs-lookup"><span data-stu-id="549c2-324">Specifies code that has the given software publisher, as denoted by a certificate file, a signature on a file, or the hexadecimal representation of an X509 certificate.</span></span> <span data-ttu-id="549c2-325">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.PublisherMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-325">For more information about this membership condition, see <xref:System.Security.Policy.PublisherMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-326">**-site** *website*</span><span class="sxs-lookup"><span data-stu-id="549c2-326">**-site** *website*</span></span>|<span data-ttu-id="549c2-327">Задает код с указанным исходным веб-сайтом.</span><span class="sxs-lookup"><span data-stu-id="549c2-327">Specifies code that has the given site of origin.</span></span> <span data-ttu-id="549c2-328">Пример:</span><span class="sxs-lookup"><span data-stu-id="549c2-328">For example:</span></span><br /><br /> `-site** www.proseware.com`<br /><br /> <span data-ttu-id="549c2-329">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.SiteMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-329">For more information about this membership condition, see <xref:System.Security.Policy.SiteMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-330">**-strong -file** *file_name* {*name* &#124; **-noname**} {*version* &#124; **-noversion**}</span><span class="sxs-lookup"><span data-stu-id="549c2-330">**-strong -file** *file_name* {*name* &#124; **-noname**} {*version* &#124; **-noversion**}</span></span>|<span data-ttu-id="549c2-331">Задает код с указанным строгим именем (определяется по имени файла), имя сборки в виде строкового значения и версию сборки в формате *основная*.*вспомогательная*.*сборка*.*редакция*.</span><span class="sxs-lookup"><span data-stu-id="549c2-331">Specifies code that has a specific strong name, as designated by the file name, the assembly name as a string, and the assembly version in the format *major*.*minor*.*build*.*revision*.</span></span> <span data-ttu-id="549c2-332">Пример:</span><span class="sxs-lookup"><span data-stu-id="549c2-332">For example:</span></span><br /><br /> <span data-ttu-id="549c2-333">**-strong -file** myAssembly.exe myAssembly 1.2.3.4</span><span class="sxs-lookup"><span data-stu-id="549c2-333">**-strong -file** myAssembly.exe myAssembly 1.2.3.4</span></span><br /><br /> <span data-ttu-id="549c2-334">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.StrongNameMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-334">For more information about this membership condition, see <xref:System.Security.Policy.StrongNameMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-335">**-url** *URL*</span><span class="sxs-lookup"><span data-stu-id="549c2-335">**-url** *URL*</span></span>|<span data-ttu-id="549c2-336">Задает код, полученный с указанного URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="549c2-336">Specifies code that originates from the given URL.</span></span> <span data-ttu-id="549c2-337">URL-адрес должен включать протокол, например `http://` или `ftp://`.</span><span class="sxs-lookup"><span data-stu-id="549c2-337">The URL must include a protocol, such as `http://` or `ftp://`.</span></span> <span data-ttu-id="549c2-338">При необходимости задать несколько сборок с определенного URL-адреса используется подстановочный знак (\*).</span><span class="sxs-lookup"><span data-stu-id="549c2-338">Additionally, a wildcard character (\*) can be used to specify multiple assemblies from a particular URL.</span></span> <span data-ttu-id="549c2-339">**Примечание**. Ввиду возможности указывать URL-адрес несколькими способами применение URL-адреса в качестве условия членства нельзя считать безопасным способом идентификации кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-339">**Note:**  Because a URL can be identified using multiple names, using a URL as a membership condition is not a safe way to ascertain the identity of code.</span></span> <span data-ttu-id="549c2-340">Там, где это возможно, используйте условие членства строгого имени, условие членства издателя или условие членства хэша.</span><span class="sxs-lookup"><span data-stu-id="549c2-340">Where possible, use a strong name membership condition, a publisher membership condition, or the hash membership condition.</span></span> <br /><br /> <span data-ttu-id="549c2-341">Дополнительные сведения об этом условии членства см. в разделе <xref:System.Security.Policy.UrlMembershipCondition?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="549c2-341">For more information about this membership condition, see <xref:System.Security.Policy.UrlMembershipCondition?displayProperty=nameWithType>.</span></span>|  
|<span data-ttu-id="549c2-342">**-zone** *zonename*</span><span class="sxs-lookup"><span data-stu-id="549c2-342">**-zone** *zonename*</span></span>|<span data-ttu-id="549c2-343">Задает код с указанной исходной зоной.</span><span class="sxs-lookup"><span data-stu-id="549c2-343">Specifies code with the given zone of origin.</span></span> <span data-ttu-id="549c2-344">Аргумент *zonename* может принимать одно из следующих значений: **MyComputer**, **Intranet**, **Trusted**, **Internet** или **Untrusted**.</span><span class="sxs-lookup"><span data-stu-id="549c2-344">The *zonename* argument can be one of the following values: **MyComputer**, **Intranet**, **Trusted**, **Internet**, or **Untrusted**.</span></span> <span data-ttu-id="549c2-345">Дополнительные сведения об этом условии членства см. в разделе с описанием класса <xref:System.Security.Policy.ZoneMembershipCondition>.</span><span class="sxs-lookup"><span data-stu-id="549c2-345">For more information about this membership condition, see the <xref:System.Security.Policy.ZoneMembershipCondition> Class.</span></span>|  
  
 <span data-ttu-id="549c2-346">Аргумент *flags*, который может использоваться с параметрами **-addgroup** и **-chggroup**, определяется с использованием одного из следующих аргументов.</span><span class="sxs-lookup"><span data-stu-id="549c2-346">The *flags* argument, which can be used with the **–addgroup** and **–chggroup** options, is specified using one of the following.</span></span>  
  
|<span data-ttu-id="549c2-347">Аргумент</span><span class="sxs-lookup"><span data-stu-id="549c2-347">Argument</span></span>|<span data-ttu-id="549c2-348">Описание</span><span class="sxs-lookup"><span data-stu-id="549c2-348">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="549c2-349">**-description** "*description*"</span><span class="sxs-lookup"><span data-stu-id="549c2-349">**-description** "*description*"</span></span>|<span data-ttu-id="549c2-350">В сочетании с параметром **-addgroup** задает описание добавляемой группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-350">If used with the **–addgroup** option, specifies the description for a code group to add.</span></span> <span data-ttu-id="549c2-351">В сочетании с параметром **-chggroup** задает описание редактируемой группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-351">If used with the **–chggroup** option, specifies the description for a code group to edit.</span></span> <span data-ttu-id="549c2-352">Аргумент *description* должен быть заключен в двойные кавычки.</span><span class="sxs-lookup"><span data-stu-id="549c2-352">The *description* argument must be enclosed in double quotes.</span></span>|  
|<span data-ttu-id="549c2-353">**-exclusive** {**on**&#124;**off**}</span><span class="sxs-lookup"><span data-stu-id="549c2-353">**-exclusive** {**on**&#124;**off**}</span></span>|<span data-ttu-id="549c2-354">С аргументом **on** указывает, что при выполнении для некоторого кода условий членства обрабатываются только те наборы разрешений, которые связаны с редактируемой или добавляемой группой кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-354">When set to **on**, indicates that only the permission set associated with the code group you are adding or modifying is considered when some code fits the membership condition of the code group.</span></span> <span data-ttu-id="549c2-355">С аргументом **off** указывает, что должны обрабатываться наборы разрешений всех соответствующих групп кода на данном уровне политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-355">When this option is set to **off**, Caspol.exe considers the permission sets of all matching code groups in the policy level.</span></span>|  
|<span data-ttu-id="549c2-356">**-levelfinal** {**on**&#124;**off**}</span><span class="sxs-lookup"><span data-stu-id="549c2-356">**-levelfinal** {**on**&#124;**off**}</span></span>|<span data-ttu-id="549c2-357">С аргументом **on** исключает из рассмотрения все уровни политики ниже того, на котором расположена добавляемая или редактируемая группа кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-357">When set to **on**, indicates that no policy level below the level in which the added or modified code group occurs is considered.</span></span> <span data-ttu-id="549c2-358">Этот параметр обычно используется на уровне политики компьютера.</span><span class="sxs-lookup"><span data-stu-id="549c2-358">This option is typically used at the machine policy level.</span></span> <span data-ttu-id="549c2-359">Например, если этот флаг указан для группы кода на уровне политики компьютера, политика уровня пользователя не будет вычислена и применена к коду, удовлетворяющему условию членства в этой группе.</span><span class="sxs-lookup"><span data-stu-id="549c2-359">For example, if you set this flag for a code group at the machine level and some code matches this code group's membership condition, Caspol.exe does not calculate or apply the user level policy for this code.</span></span>|  
|<span data-ttu-id="549c2-360">**-name** "*name*"</span><span class="sxs-lookup"><span data-stu-id="549c2-360">**-name** "*name*"</span></span>|<span data-ttu-id="549c2-361">В сочетании с параметром **-addgroup** задает имя скрипта для добавляемой группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-361">If used with the **–addgroup** option, specifies the scripting name for a code group to add.</span></span> <span data-ttu-id="549c2-362">В сочетании с параметром **-chggroup** задает имя скрипта для редактируемой группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-362">If used with the **-chggroup** option, specifies the scripting name for a code group to edit.</span></span> <span data-ttu-id="549c2-363">Аргумент *name* должен быть заключен в двойные кавычки.</span><span class="sxs-lookup"><span data-stu-id="549c2-363">The *name* argument must be enclosed in double quotes.</span></span> <span data-ttu-id="549c2-364">Аргумент *name* не может начинаться с цифры и должен состоять только из символов A–Z, 0–9 и символов подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="549c2-364">The *name* argument cannot begin with a number, and can only contain A-Z, 0-9, and the underscore character.</span></span> <span data-ttu-id="549c2-365">К группам кода можно обращаться по этому аргументу *name* вместо их цифровой метки.</span><span class="sxs-lookup"><span data-stu-id="549c2-365">Code groups can be referred to by this *name* instead of by their numeric label.</span></span> <span data-ttu-id="549c2-366">Кроме того, аргумент *name* очень удобен в работе со сценариями.</span><span class="sxs-lookup"><span data-stu-id="549c2-366">The *name* is also highly useful for scripting purposes.</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="549c2-367">Примечания</span><span class="sxs-lookup"><span data-stu-id="549c2-367">Remarks</span></span>  

 <span data-ttu-id="549c2-368">Политика безопасности задается на трех уровнях: компьютера, пользователя и предприятия.</span><span class="sxs-lookup"><span data-stu-id="549c2-368">Security policy is expressed using three policy levels: machine policy, user policy, and enterprise policy.</span></span> <span data-ttu-id="549c2-369">Набор разрешений, получаемый сборкой, определяется пересечением наборов разрешений, предоставляемых этими тремя уровнями политики.</span><span class="sxs-lookup"><span data-stu-id="549c2-369">The set of permissions that an assembly receives is determined by the intersection of the permission sets allowed by these three policy levels.</span></span> <span data-ttu-id="549c2-370">Каждый уровень политики представлен иерархической структурой групп кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-370">Each policy level is represented by a hierarchical structure of code groups.</span></span> <span data-ttu-id="549c2-371">У каждой группы кода имеется условие членства, по которому определяется принадлежность кода к группе.</span><span class="sxs-lookup"><span data-stu-id="549c2-371">Every code group has a membership condition that determines which code is a member of that group.</span></span> <span data-ttu-id="549c2-372">С каждой группой кода также связан именованный набор разрешений.</span><span class="sxs-lookup"><span data-stu-id="549c2-372">A named permission set is also associated with each code group.</span></span> <span data-ttu-id="549c2-373">Этот набор разрешений задает разрешения, предоставляемые исполняющей средой коду, который удовлетворяет условию членства.</span><span class="sxs-lookup"><span data-stu-id="549c2-373">This permission set specifies the permissions the runtime allows code that satisfies the membership condition to have.</span></span> <span data-ttu-id="549c2-374">Иерархия групп кода и связанный с ней именованный набор разрешений определяют и поддерживают уровни политики безопасности.</span><span class="sxs-lookup"><span data-stu-id="549c2-374">A code group hierarchy, along with its associated named permission sets, defines and maintains each level of security policy.</span></span> <span data-ttu-id="549c2-375">Чтобы задать уровень политики безопасности, используются параметры **-user**, **-customuser**, **-machine** и **-enterprise**.</span><span class="sxs-lookup"><span data-stu-id="549c2-375">You can use the **–user**, **-customuser**, **–machine** and **-enterprise** options to set the level of security policy.</span></span>  
  
 <span data-ttu-id="549c2-376">Дополнительные сведения о политике безопасности и предоставлении коду разрешений исполняющей средой см. в разделе [Управление политикой безопасности](/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="549c2-376">For more information about security policy and how the runtime determines which permissions to grant to code, see [Security Policy Management](/previous-versions/dotnet/netframework-4.0/c1k0eed6(v=vs.100)).</span></span>  
  
## <a name="referencing-code-groups-and-permission-sets"></a><span data-ttu-id="549c2-377">Ссылки на группы кода и наборы разрешений</span><span class="sxs-lookup"><span data-stu-id="549c2-377">Referencing Code Groups and Permission Sets</span></span>  

 <span data-ttu-id="549c2-378">Параметр **-list**, отображающий список групп кода с цифровыми метками (1, 1.1, 1.1.1 и т. д.), упрощает создание ссылок на группы кода в иерархии.</span><span class="sxs-lookup"><span data-stu-id="549c2-378">To facilitate references to code groups in a hierarchy, the **-list** option displays an indented list of code groups along with their numerical labels (1, 1.1, 1.1.1, and so on).</span></span> <span data-ttu-id="549c2-379">Другие функции командной строки, работающие с группами кода, также используют цифровые метки для ссылки на группы кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-379">The other command-line operations that target code groups also use the numerical labels to refer to specific code groups.</span></span>  
  
 <span data-ttu-id="549c2-380">Ссылки на именованные наборы разрешений осуществляются по имени.</span><span class="sxs-lookup"><span data-stu-id="549c2-380">Named permission sets are referenced by their names.</span></span> <span data-ttu-id="549c2-381">Параметр **-list** отображает список групп кода и список именованных наборов разрешений, доступных в политике.</span><span class="sxs-lookup"><span data-stu-id="549c2-381">The **–list** option displays the list of code groups followed by a list of named permission sets available in that policy.</span></span>  
  
## <a name="caspolexe-behavior"></a><span data-ttu-id="549c2-382">Поведение программы Caspol.exe</span><span class="sxs-lookup"><span data-stu-id="549c2-382">Caspol.exe Behavior</span></span>  

 <span data-ttu-id="549c2-383">Все параметры, за исключением **-s**[**ecurity**] {**on** &#124; **off**}, используют версию платформы .NET Framework, с которой была установлена программа Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-383">All options except **-s**[**ecurity**] {**on** &#124; **off**} use the version of the .NET Framework that Caspol.exe was installed with.</span></span> <span data-ttu-id="549c2-384">Изменения, внесенные программой Caspol.exe, которая установлена с версией *X* среды выполнения, будут влиять только на эту версию.</span><span class="sxs-lookup"><span data-stu-id="549c2-384">If you run the Caspol.exe that was installed with version *X* of the runtime, the changes apply only to that version.</span></span> <span data-ttu-id="549c2-385">В другие параллельные установки среды выполнения, при их наличии, изменения вноситься не будут.</span><span class="sxs-lookup"><span data-stu-id="549c2-385">Other side-by-side installations of the runtime, if any, are not affected.</span></span> <span data-ttu-id="549c2-386">Если программа Caspol.exe запущена из командной строки в каталоге, отличном от каталога среды выполнения требуемой версии, программа выполняется из каталога первой версии среды выполнения в пути (обычно это каталог последней установленной версии).</span><span class="sxs-lookup"><span data-stu-id="549c2-386">If you run Caspol.exe from the command line without being in a directory for a specific runtime version, the tool is executed from the first runtime version directory in the path (usually the most recent runtime version installed).</span></span>  
  
 <span data-ttu-id="549c2-387">Параметр **-s**[**ecurity**] {**on** &#124; **off**} представляет собой операцию на уровне всего компьютера.</span><span class="sxs-lookup"><span data-stu-id="549c2-387">The **-s**[**ecurity**] {**on** &#124; **off**} option is a computer-wide operation.</span></span> <span data-ttu-id="549c2-388">При отключении управления доступом для кода отключается проверка безопасности для всего управляемого кода и всех пользователей компьютера.</span><span class="sxs-lookup"><span data-stu-id="549c2-388">Turning off code access security terminates security checks for all managed code and for all users on the computer.</span></span> <span data-ttu-id="549c2-389">Проверки безопасности отключаются для всех установленных на компьютере параллельных версий .NET Framework, если они имеются.</span><span class="sxs-lookup"><span data-stu-id="549c2-389">If side-by-side versions of the .NET Framework are installed, this command turns off security for every version installed on the computer.</span></span> <span data-ttu-id="549c2-390">Хотя параметр **-list** и сообщает о том, что система безопасности отключена, никаких других признаков, по которым другие пользователи могли бы узнать об этом, не существует.</span><span class="sxs-lookup"><span data-stu-id="549c2-390">Although the **-list** option shows that security is turned off, nothing else clearly indicates for other users that security has been turned off.</span></span>  
  
 <span data-ttu-id="549c2-391">При запуске программы Caspol.exe пользователем без прав администратора все изменения вносятся в политику уровня пользователя, если не задан параметр **-machine**.</span><span class="sxs-lookup"><span data-stu-id="549c2-391">When a user without administrative rights runs Caspol.exe, all options refer to the user level policy unless the **–machine** option is specified.</span></span> <span data-ttu-id="549c2-392">При выполнении программы Caspol.exe администратором все изменения вносятся в политику уровня компьютера, если не задан параметр **-user**.</span><span class="sxs-lookup"><span data-stu-id="549c2-392">When an administrator runs Caspol.exe, all options refer to the machine policy unless the **–user** option is specified.</span></span>  
  
 <span data-ttu-id="549c2-393">Для правильной работы программе Caspol.exe требуется набор разрешений, аналогичный **Everything**.</span><span class="sxs-lookup"><span data-stu-id="549c2-393">Caspol.exe must be granted the equivalent of the **Everything** permission set to function.</span></span> <span data-ttu-id="549c2-394">Защитный механизм программы позволяет избежать внесения в политику изменений, препятствующих работе программы.</span><span class="sxs-lookup"><span data-stu-id="549c2-394">The tool has a protective mechanism that prevents policy from being modified in ways that would prevent Caspol.exe from being granted the permissions it needs to run.</span></span> <span data-ttu-id="549c2-395">При попытке внесения таких изменений будет выдано уведомление о том, что изменения не были внесены, так как они нарушат работу программы.</span><span class="sxs-lookup"><span data-stu-id="549c2-395">If you try to make such changes, Caspol.exe notifies you that the requested policy change will break the tool, and the policy change is rejected.</span></span> <span data-ttu-id="549c2-396">Чтобы отключить этот защитный механизм для определенной команды, задайте параметр **-force**.</span><span class="sxs-lookup"><span data-stu-id="549c2-396">You can turn this protective mechanism off for a given command by using the **–force** option.</span></span>  
  
<a name="cpgrfcodeaccesssecuritypolicyutilitycaspolexeanchor1"></a>

## <a name="manually-editing-the-security-configuration-files"></a><span data-ttu-id="549c2-397">Ручная настройка файлов конфигурации безопасности</span><span class="sxs-lookup"><span data-stu-id="549c2-397">Manually Editing the Security Configuration Files</span></span>  

 <span data-ttu-id="549c2-398">Трем уровням политики безопасности (уровни пользователя, компьютера, предприятия), поддерживаемым программой Caspol.exe, соответствуют три файла конфигурации безопасности.</span><span class="sxs-lookup"><span data-stu-id="549c2-398">Three security configuration files correspond to the three policy levels supported by Caspol.exe: one for the machine policy, one for a given user's policy, and one for the enterprise policy.</span></span> <span data-ttu-id="549c2-399">Эти файлы создаются на диске только в том случае, если программа Caspol.exe изменяет политики уровня компьютера, пользователя или предприятия.</span><span class="sxs-lookup"><span data-stu-id="549c2-399">These files are created on disk only when machine, user, or enterprise policy is changed using Caspol.exe.</span></span> <span data-ttu-id="549c2-400">С помощью параметра **-reset** можно сохранять установленную по умолчанию политику безопасности на диск, если это необходимо.</span><span class="sxs-lookup"><span data-stu-id="549c2-400">You can use the **–reset** option in Caspol.exe to save the default security policy to disk, if needed.</span></span>  
  
 <span data-ttu-id="549c2-401">Ручное редактирование файлов конфигурации безопасности в большинстве случаев не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="549c2-401">In most cases, manually editing the security configuration files is not recommended.</span></span> <span data-ttu-id="549c2-402">Однако в некоторых случаях ручное редактирование обязательно, например в том случае, если администратор желает изменить конфигурацию безопасности для конкретного пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-402">But there might be scenarios in which modifying these files becomes necessary, such as when an administrator wants to edit the security configuration for a particular user.</span></span>  
  
## <a name="examples"></a><span data-ttu-id="549c2-403">Примеры</span><span class="sxs-lookup"><span data-stu-id="549c2-403">Examples</span></span>  

 <span data-ttu-id="549c2-404">**-addfulltrust**</span><span class="sxs-lookup"><span data-stu-id="549c2-404">**-addfulltrust**</span></span>  
  
 <span data-ttu-id="549c2-405">Допустим, что в политику компьютера был добавлен набор разрешений с настраиваемым разрешением.</span><span class="sxs-lookup"><span data-stu-id="549c2-405">Assume that a permission set containing a custom permission has been added to machine policy.</span></span> <span data-ttu-id="549c2-406">Настраиваемое разрешение реализовано в программе `MyPerm.exe`. Программа `MyPerm.exe` ссылается на классы программы `MyOther.exe`.</span><span class="sxs-lookup"><span data-stu-id="549c2-406">This custom permission is implemented in `MyPerm.exe`, and `MyPerm.exe` references classes in `MyOther.exe`.</span></span> <span data-ttu-id="549c2-407">Обе сборки должны быть добавлены в список сборок с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="549c2-407">Both assemblies must be added to the full trust assembly list.</span></span> <span data-ttu-id="549c2-408">Чтобы добавить сборку `MyPerm.exe` в список сборок с полным доверием политики компьютера, используется следующая команда.</span><span class="sxs-lookup"><span data-stu-id="549c2-408">The following command adds the `MyPerm.exe` assembly to the full trust list for the machine policy.</span></span>  
  
```console  
caspol -machine -addfulltrust MyPerm.exe  
```  
  
 <span data-ttu-id="549c2-409">Чтобы добавить сборку `MyOther.exe` в список сборок с полным доверием политики компьютера, используется следующая команда.</span><span class="sxs-lookup"><span data-stu-id="549c2-409">The following command adds the `MyOther.exe` assembly to the full trust list for the machine policy.</span></span>  
  
```console  
caspol -machine -addfulltrust MyOther.exe  
```  
  
 <span data-ttu-id="549c2-410">**-addgroup**</span><span class="sxs-lookup"><span data-stu-id="549c2-410">**-addgroup**</span></span>  
  
 <span data-ttu-id="549c2-411">Следующая команда добавляет дочернюю группу кода в корень иерархии групп кода политики компьютера.</span><span class="sxs-lookup"><span data-stu-id="549c2-411">The following command adds a child code group to the root of the machine policy code group hierarchy.</span></span> <span data-ttu-id="549c2-412">Новая группа кода является членом зоны **Internet** и связана с набором разрешений **Execution**.</span><span class="sxs-lookup"><span data-stu-id="549c2-412">The new code group is a member of the **Internet** zone and is associated with the **Execution** permission set.</span></span>  
  
```console  
caspol -machine -addgroup 1.  -zone Internet Execution  
```  
  
 <span data-ttu-id="549c2-413">Следующая команда добавляет дочернюю группу кода, которая предоставляет разрешения локальной интрасети для действий share \\\netserver\netshare.</span><span class="sxs-lookup"><span data-stu-id="549c2-413">The following command adds a child code group that gives the share \\\netserver\netshare local intranet permissions.</span></span>  
  
```console  
caspol -machine -addgroup 1. -url \\netserver\netshare\* LocalIntranet  
```  
  
 <span data-ttu-id="549c2-414">**-addpset**</span><span class="sxs-lookup"><span data-stu-id="549c2-414">**-addpset**</span></span>  
  
 <span data-ttu-id="549c2-415">Следующая команда добавляет набор разрешений `Mypset` в политику пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-415">The following command adds the `Mypset` permission set to the user policy.</span></span>  
  
```console  
caspol -user -addpset Mypset.xml Mypset  
```  
  
 <span data-ttu-id="549c2-416">**-chggroup**</span><span class="sxs-lookup"><span data-stu-id="549c2-416">**-chggroup**</span></span>  
  
 <span data-ttu-id="549c2-417">Следующая команда изменяет набор разрешений в политике пользователя группы кода с меткой 1.2.</span><span class="sxs-lookup"><span data-stu-id="549c2-417">The following command changes the permission set in the user policy of the code group labeled 1.2.</span></span> <span data-ttu-id="549c2-418">на набор разрешений **Execution**.</span><span class="sxs-lookup"><span data-stu-id="549c2-418">to the **Execution** permission set.</span></span>  
  
```console  
caspol -user -chggroup 1.2. Execution  
```  
  
 <span data-ttu-id="549c2-419">Следующая команда изменяет условие членства в политике по умолчанию группы кода с меткой 1.2.1.</span><span class="sxs-lookup"><span data-stu-id="549c2-419">The following command changes the membership condition in the default policy of the code group labeled 1.2.1.</span></span> <span data-ttu-id="549c2-420">и изменяет параметр флага **exclusive**.</span><span class="sxs-lookup"><span data-stu-id="549c2-420">and changes the setting of the **exclusive** flag.</span></span> <span data-ttu-id="549c2-421">В качестве условия членства задано происхождение кода из зоны **Internet** и наличие включенного флага **exclusive**.</span><span class="sxs-lookup"><span data-stu-id="549c2-421">The membership condition is defined to be code that originates from the **Internet** zone and the **exclusive** flag is switched on.</span></span>  
  
```console  
caspol -chggroup 1.2.1. -zone Internet -exclusive on  
```  
  
 <span data-ttu-id="549c2-422">**-chgpset**</span><span class="sxs-lookup"><span data-stu-id="549c2-422">**-chgpset**</span></span>  
  
 <span data-ttu-id="549c2-423">Следующая команда заменяет набор разрешений с именем `Mypset` на набор разрешений, содержащийся в файле `newpset.xml`.</span><span class="sxs-lookup"><span data-stu-id="549c2-423">The following command changes the permission set with name `Mypset` to the permission set contained in `newpset.xml`.</span></span> <span data-ttu-id="549c2-424">Обратите внимание, что в текущем выпуске не поддерживается замена наборов разрешений, используемых иерархией групп кода.</span><span class="sxs-lookup"><span data-stu-id="549c2-424">Note that the current release does not support changing permission sets that are being used by the code group hierarchy.</span></span>  
  
```console  
caspol -chgpset Mypset newpset.xml  
```  
  
 <span data-ttu-id="549c2-425">**-force**</span><span class="sxs-lookup"><span data-stu-id="549c2-425">**-force**</span></span>  
  
 <span data-ttu-id="549c2-426">Следующая команда связывает корневую группу кода (метка 1) политики пользователя с набором разрешений **Nothing**.</span><span class="sxs-lookup"><span data-stu-id="549c2-426">The following command causes the user policy's root code group (labeled 1) to be associated with the **Nothing** named permission set.</span></span> <span data-ttu-id="549c2-427">Выполнение этой команды препятствует работе программы Caspol.exe.</span><span class="sxs-lookup"><span data-stu-id="549c2-427">This prevents Caspol.exe from running.</span></span>  
  
```console  
caspol -force -user -chggroup 1 Nothing  
```  
  
 <span data-ttu-id="549c2-428">**-recover**</span><span class="sxs-lookup"><span data-stu-id="549c2-428">**-recover**</span></span>  
  
 <span data-ttu-id="549c2-429">Следующая команда восстанавливает последнюю сохраненную политику уровня компьютера.</span><span class="sxs-lookup"><span data-stu-id="549c2-429">The following command recovers the most recently saved machine policy.</span></span>  
  
```console  
caspol -machine -recover  
```  
  
 <span data-ttu-id="549c2-430">**-remgroup**</span><span class="sxs-lookup"><span data-stu-id="549c2-430">**-remgroup**</span></span>  
  
 <span data-ttu-id="549c2-431">Следующая команда удаляет группу кода с меткой 1.1.</span><span class="sxs-lookup"><span data-stu-id="549c2-431">The following command removes the code group labeled 1.1.</span></span> <span data-ttu-id="549c2-432">Если у этой группы кода имеются дочерние группы кода, эти группы также будут удалены.</span><span class="sxs-lookup"><span data-stu-id="549c2-432">If this code group has any child code groups, those groups are also deleted.</span></span>  
  
```console  
caspol -remgroup 1.1.  
```  
  
 <span data-ttu-id="549c2-433">**-rempset**</span><span class="sxs-lookup"><span data-stu-id="549c2-433">**-rempset**</span></span>  
  
 <span data-ttu-id="549c2-434">Следующая команда удаляет набор разрешений **Execution** из политики пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-434">The following command removes the **Execution** permission set from the user policy.</span></span>  
  
```console  
caspol -user -rempset Execution  
```  
  
 <span data-ttu-id="549c2-435">Следующая команда удаляет набор разрешений `Mypset` из политики уровня пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-435">The following command removes `Mypset` from the user policy level.</span></span>  
  
```console  
caspol -rempset MyPset  
```  
  
 <span data-ttu-id="549c2-436">**-resolvegroup**</span><span class="sxs-lookup"><span data-stu-id="549c2-436">**-resolvegroup**</span></span>  
  
 <span data-ttu-id="549c2-437">Следующая команда отображает все группы кода политики компьютера, в состав которых входит `myassembly`.</span><span class="sxs-lookup"><span data-stu-id="549c2-437">The following command shows all code groups of the machine policy that `myassembly` belongs to.</span></span>  
  
```console  
caspol -machine -resolvegroup myassembly  
```  
  
 <span data-ttu-id="549c2-438">Следующая команда отображает все группы кода политики компьютера, предприятия и указанной настраиваемой политики пользователя, в состав которых входит `myassembly`.</span><span class="sxs-lookup"><span data-stu-id="549c2-438">The following command shows all code groups of the machine, enterprise, and specified custom user policy that `myassembly` belongs to.</span></span>  
  
```console  
caspol -customall "c:\config_test\security.config" -resolvegroup myassembly  
```  
  
 <span data-ttu-id="549c2-439">**-resolveperm**</span><span class="sxs-lookup"><span data-stu-id="549c2-439">**-resolveperm**</span></span>  
  
 <span data-ttu-id="549c2-440">Следующая команда вычисляет разрешения для сборки `testassembly` на основе политик уровня компьютера и пользователя.</span><span class="sxs-lookup"><span data-stu-id="549c2-440">The following command calculates the permissions for `testassembly` based on the machine and user policy levels.</span></span>  
  
```console  
caspol -all -resolveperm testassembly  
```  
  
## <a name="see-also"></a><span data-ttu-id="549c2-441">См. также</span><span class="sxs-lookup"><span data-stu-id="549c2-441">See also</span></span>

- [<span data-ttu-id="549c2-442">Инструменты</span><span class="sxs-lookup"><span data-stu-id="549c2-442">Tools</span></span>](index.md)
- [<span data-ttu-id="549c2-443">Оболочки командной строки для разработчиков</span><span class="sxs-lookup"><span data-stu-id="549c2-443">Developer command-line shells</span></span>](/visualstudio/ide/reference/command-prompt-powershell)
