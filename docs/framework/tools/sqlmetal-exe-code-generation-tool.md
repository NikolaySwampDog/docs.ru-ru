---
title: SqlMetal.exe (средство создания кода)
description: Общие сведения об SqlMetal.exe, средстве создания кода. Используйте средство для создания кода и сопоставления с компонентом LINQ to SQL в .NET.
ms.date: 03/30/2017
helpviewer_keywords:
- SQLMetal [LINQ to SQL]
- code generation tool
- SQLMetal.exe
- LINQ to SQL, serialization
- LINQ to SQL, DBML files
- LINQ to SQL, SQLMetal
ms.assetid: 819e5a96-7646-4fdb-b14b-fe31221b0614
ms.openlocfilehash: 57229ce767a140e1756fddb2c19fb31893a0ab90
ms.sourcegitcommit: 1dbe25ff484a02025d5c34146e517c236f7161fb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104653625"
---
# <a name="sqlmetalexe-code-generation-tool"></a>SqlMetal.exe (средство создания кода)

Средство командной строки SqlMetal создает код и сопоставление для компонента [!INCLUDE[vbtecdlinq](../../../includes/vbtecdlinq-md.md)] платформы .NET Framework. С помощью описанных ниже параметров можно настраивать SqlMetal на выполнение различных действий, включая следующие.  
  
- Создание исходного кода и атрибутов сопоставления или файла сопоставления на основе базы данных.  
  
- Создание DBLM-файла для настройки на основе базы данных.  
  
- Создание кода и атрибутов сопоставления или файла сопоставления на основе DBML-файла.  
  
Эта программа автоматически устанавливается вместе с Visual Studio. По умолчанию файл располагается в папке `drive`:\Program Files\Microsoft SDKs\Windows\v`n.nn`\bin. Если Visual Studio не установлена, файл SQLMetal можно получить, скачав [Windows SDK](https://go.microsoft.com/fwlink/?LinkId=142225).  
  
> [!NOTE]
> Разработчики, работающие в Visual Studio, также могут использовать реляционный конструктор объектов для создания классов сущностей. Командная строка удобна при работе с большими базами данных. Поскольку SqlMetal представляет собой программу командной строки, ее можно использовать в процессе построения.  
  
Для запуска этого средства используйте [Командную строку разработчика или PowerShell для разработчиков в Visual Studio](/visualstudio/ide/reference/command-prompt-powershell). В командной строке введите следующую команду:

```console  
sqlmetal [options] [<input file>]  
```  
  
## <a name="options"></a>Параметры  

 Чтобы просмотреть текущий список параметров, в командной строке введите `sqlmetal /?` в каталоге установки.  
  
 **Параметры подключения**  
  
|Параметр|Описание|  
|------------|-----------------|  
|**/server:** *\<name>*|Задает имя сервера базы данных.|  
|**/database:** *\<name>*|Задает каталог базы данных на сервере.|  
|**/user:** *\<name>*|Задает идентификатор пользователя для входа. Значение по умолчанию: использование проверки подлинности Windows.|  
|**/password:** *\<password>*|Задает пароль для входа. Значение по умолчанию: использование проверки подлинности Windows.|  
|**/conn:** *\<connection string>*|Задает строку подключения к базе данных. Нельзя использовать с параметрами **/server**, **/database**, **/user** или **/password** .<br /><br /> В строке подключения не следует указывать имя файла. Вместо этого добавьте имя файла в командную строку в качестве входного файла. Например, в следующей строке указывается входной файл "c:\northwnd.mdf": **sqlmetal /code:"c:\northwind.cs" /language:csharp "c:\northwnd.mdf"** .|  
|**/timeout:** *\<seconds>*|Задает время ожидания для доступа SqlMetal к базе данных. Значение по умолчанию: 0 (то есть время не ограничено).|  
  
 **Параметры извлечения**  
  
|Параметр|Описание|  
|------------|-----------------|  
|**/views**|Извлекает представления базы данных.|  
|**/functions**|Извлекает функции базы данных.|  
|**/sprocs**|Извлекает хранимые процедуры.|  
  
 **Параметры вывода**  
  
|Параметр|Описание|  
|------------|-----------------|  
|**/dbml** *[:файл]*|Направляет вывод в DBML-файл. Не может использоваться с параметром **/map** .|  
|**/code** *[:файл]*|Направляет вывод в файл исходного кода. Не может использоваться с параметром **/dbml** .|  
|**/map** *[:файл]*|Создает XML-файл сопоставления вместо атрибутов. Не может использоваться с параметром **/dbml** .|  
  
 **Прочее**  
  
|Параметр|Описание|  
|------------|-----------------|  
|**/language:** *\<language>*|Задает язык исходного кода.<br /><br /> *\<language>* (допускается): vb, csharp.<br /><br /> Значение по умолчанию: определяется по расширению имени файла кода.|  
|**/namespace:** *\<name>*|Задает пространство имен сгенерированного кода. Значение по умолчанию: пространство имен не определяется.|  
|**/context:** *\<type>*|Задает имя класса контекста данных. Значение по умолчанию: определяется по имени базы данных.|  
|**/entitybase:** *\<type>*|Задает базовый класс для классов сущностей в сгенерированном коде. Значение по умолчанию: базовый класс для сущностей не определяется.|  
|**/pluralize**|Автоматически преобразует имена классов и членов в форму множественного или единственного числа.<br /><br /> Этот вариант доступен только в английской версии (США).|  
|**/serialization:** *\<option>*|Создает сериализуемые классы.<br /><br /> *\<option>* (допускается): нет, однонаправленный. Значение по умолчанию: Отсутствует.<br /><br /> Дополнительные сведения см. в разделе [Сериализация](../data/adonet/sql/linq/serialization.md).|  
  
 **Входной файл**  
  
|Параметр|Описание|  
|------------|-----------------|  
|**\<input file>**|Задает MDF-файл SQL Server, экспресс-выпуск, SDF-файл SQL Server Compact 3.5 или промежуточный DBML-файл.|  
  
## <a name="remarks"></a>Примечания  

 Функции SqlMetal фактически выполняются в два этапа.  
  
- Метаданные базы данных извлекаются в DBML-файл.  
  
- Создается выходной файл кода.  
  
     Используя соответствующие параметры командной строки, можно получать исходный код Visual Basic или C# либо XML-файл сопоставления.  
  
 Чтобы извлечь метаданные из MDF-файла, необходимо указать его имя после всех остальных параметров.  
  
 Если не **/server** указан, предполагается **localhost/sqlexpress** .  
  
 Microsoft SQL Server 2005 выдает исключение в следующих случаях:  
  
- SqlMetal пытается извлечь хранимую процедуру, вызывающую саму себя.  
  
- Уровень вложенности хранимой процедуры, функции или представления превышает 32 уровня.  
  
     SqlMetal перехватывает это исключение и сообщает о нем в виде предупреждения.  
  
 Чтобы указать имя входного файла, добавьте имя в командную строку в качестве входного файла. Включение имени файла в строку подключения (параметром **/conn** ) не поддерживается.  
  
## <a name="examples"></a>Примеры  

 Создание DBML-файла, содержащего извлеченные метаданные SQL.  
  
 **sqlmetal /server:myserver /database:northwind /dbml:mymeta.dbml**  
  
 Создание DBML-файла, содержащего извлеченные метаданные SQL из MDF-файла, с помощью SQL Server, экспресс-выпуск.  
  
 **sqlmetal /dbml:mymeta.dbml mydbfile.mdf**  
  
 Создание DBML-файла, содержащего извлеченные метаданные SQL из SQL Server, экспресс-выпуск.  
  
 **sqlmetal /server:.\sqlexpress /dbml:mymeta.dbml /database:northwind**  
  
 Создание исходного кода из DBML-файла метаданных.  
  
 **sqlmetal /namespace:nwind /code:nwind.cs /language:csharp mymetal.dbml**  
  
 Создание исходного кода непосредственно из метаданных SQL.  
  
 **sqlmetal /server:myserver /database:northwind /namespace:nwind /code:nwind.cs /language:csharp**  
  
> [!NOTE]
> При использовании параметра **/pluralize** вместе с учебной базой данных Northwind необходимо иметь в виду следующее. Когда SqlMetal создает имена типов строк для таблиц, имена таблиц представляются в единственном числе. При создании свойств <xref:System.Data.Linq.DataContext> для таблиц имена таблиц представляются во множественном числе. Однако таблицы в учебной базе данных Northwind уже имеют имена в форме множественного числа. Поэтому данная часть процедуры не будет иметь видимого эффекта. Если таблицам базы данных принято присваивать имена в единственном числе, то коллекциям .NET принято присваивать имена во множественном числе.  
  
## <a name="see-also"></a>См. также

- [Практическое руководство. Создание модели объектов на языке Visual Basic или C#](../data/adonet/sql/linq/how-to-generate-the-object-model-in-visual-basic-or-csharp.md)
- [Создание кода в LINQ to SQL](../data/adonet/sql/linq/code-generation-in-linq-to-sql.md)
- [Внешнее сопоставление](../data/adonet/sql/linq/external-mapping.md)
